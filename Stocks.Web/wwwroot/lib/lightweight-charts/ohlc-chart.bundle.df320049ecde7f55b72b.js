!function (t) { var i = {}; function n(e) { if (i[e]) return i[e].exports; var s = i[e] = { i: e, l: !1, exports: {} }; return t[e].call(s.exports, s, s.exports, n), s.l = !0, s.exports } n.m = t, n.c = i, n.d = function (t, i, e) { n.o(t, i) || Object.defineProperty(t, i, { enumerable: !0, get: e }) }, n.r = function (t) { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(t, "__esModule", { value: !0 }) }, n.t = function (t, i) { if (1 & i && (t = n(t)), 8 & i) return t; if (4 & i && "object" == typeof t && t && t.__esModule) return t; var e = Object.create(null); if (n.r(e), Object.defineProperty(e, "default", { enumerable: !0, value: t }), 2 & i && "string" != typeof t) for (var s in t) n.d(e, s, function (i) { return t[i] }.bind(null, s)); return e }, n.n = function (t) { var i = t && t.__esModule ? function () { return t.default } : function () { return t }; return n.d(i, "a", i), i }, n.o = function (t, i) { return Object.prototype.hasOwnProperty.call(t, i) }, n.p = "/static/js/webpack/dist", n(n.s = 0) }([function (t, i, n) {
    "use strict"; n.r(i); var e = { allowDownsampling: !0 }; var s, r, o, h = function () { function t(t, i) { var n = this; this._resolutionMediaQueryList = null, this._resolutionListener = function (t) { return n._onResolutionChanged() }, this._canvasConfiguredListeners = [], this.canvas = t, this._canvasSize = { width: this.canvas.clientWidth, height: this.canvas.clientHeight }, this._options = i, this._configureCanvas(), this._installResolutionListener() } return t.prototype.destroy = function () { this._canvasConfiguredListeners.length = 0, this._uninstallResolutionListener(), this.canvas = null }, Object.defineProperty(t.prototype, "canvasSize", { get: function () { return { width: this._canvasSize.width, height: this._canvasSize.height } }, enumerable: !0, configurable: !0 }), t.prototype.resizeCanvas = function (t) { this._canvasSize = { width: t.width, height: t.height }, this._configureCanvas() }, Object.defineProperty(t.prototype, "pixelRatio", { get: function () { var t = this.canvas.ownerDocument.defaultView; if (null == t) throw new Error("No window is associated with the canvas"); return t.devicePixelRatio > 1 || this._options.allowDownsampling ? t.devicePixelRatio : 1 }, enumerable: !0, configurable: !0 }), t.prototype.subscribeCanvasConfigured = function (t) { this._canvasConfiguredListeners.push(t) }, t.prototype.unsubscribeCanvasConfigured = function (t) { this._canvasConfiguredListeners = this._canvasConfiguredListeners.filter(function (i) { return i != t }) }, t.prototype._configureCanvas = function () { var t = this.pixelRatio; this.canvas.style.width = this._canvasSize.width + "px", this.canvas.style.height = this._canvasSize.height + "px", this.canvas.width = this._canvasSize.width * t, this.canvas.height = this._canvasSize.height * t, this._emitCanvasConfigured() }, t.prototype._emitCanvasConfigured = function () { var t = this; this._canvasConfiguredListeners.forEach(function (i) { return i.call(t) }) }, t.prototype._installResolutionListener = function () { if (null !== this._resolutionMediaQueryList) throw new Error("Resolution listener is already installed"); var t = this.canvas.ownerDocument.defaultView; if (null == t) throw new Error("No window is associated with the canvas"); var i = t.devicePixelRatio; this._resolutionMediaQueryList = t.matchMedia("all and (resolution: " + i + "dppx)"), this._resolutionMediaQueryList.addListener(this._resolutionListener) }, t.prototype._uninstallResolutionListener = function () { null !== this._resolutionMediaQueryList && (this._resolutionMediaQueryList.removeListener(this._resolutionListener), this._resolutionMediaQueryList = null) }, t.prototype._reinstallResolutionListener = function () { this._uninstallResolutionListener(), this._installResolutionListener() }, t.prototype._onResolutionChanged = function () { this._configureCanvas(), this._reinstallResolutionListener() }, t }();
/*!
 * @license
 * TradingView Lightweight Charts v3.1.2
 * Copyright (c) 2020 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */function u(t, i) { var n, e = ((n = {})[0] = [], n[1] = [t.lineWidth, t.lineWidth], n[2] = [2 * t.lineWidth, 2 * t.lineWidth], n[3] = [6 * t.lineWidth, 6 * t.lineWidth], n[4] = [t.lineWidth, 4 * t.lineWidth], n)[i]; t.setLineDash(e) } function l(t, i, n, e) { t.beginPath(); var s = t.lineWidth % 2 ? .5 : 0; t.moveTo(n, i + s), t.lineTo(e, i + s), t.stroke() } (o = s || (s = {}))[o.Simple = 0] = "Simple", o[o.WithSteps = 1] = "WithSteps", function (t) { t[t.Solid = 0] = "Solid", t[t.Dotted = 1] = "Dotted", t[t.Dashed = 2] = "Dashed", t[t.LargeDashed = 3] = "LargeDashed", t[t.SparseDotted = 4] = "SparseDotted" }(r || (r = {})); var a = function (t, i) { return (a = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, i) { t.__proto__ = i } || function (t, i) { for (var n in i) i.hasOwnProperty(n) && (t[n] = i[n]) })(t, i) }; function c(t, i) { function n() { this.constructor = t } a(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } var f = function () { return (f = Object.assign || function (t) { for (var i, n = 1, e = arguments.length; n < e; n++)for (var s in i = arguments[n]) Object.prototype.hasOwnProperty.call(i, s) && (t[s] = i[s]); return t }).apply(this, arguments) }; function p() { for (var t = 0, i = 0, n = arguments.length; i < n; i++)t += arguments[i].length; var e = Array(t), s = 0; for (i = 0; i < n; i++)for (var r = arguments[i], o = 0, h = r.length; o < h; o++, s++)e[s] = r[o]; return e } function v(t, i) { if (!t) throw new Error("Assertion failed" + (i ? ": " + i : "")) } function d(t) { if (void 0 === t) throw new Error("Value is undefined"); return t } function y(t) { if (null === t) throw new Error("Value is null"); return t } function g(t) { return y(d(t)) } function m(t) { for (var i = [], n = 1; n < arguments.length; n++)i[n - 1] = arguments[n]; for (var e = 0, s = i; e < s.length; e++) { var r = s[e]; for (var o in r) void 0 !== r[o] && ("object" != typeof r[o] || void 0 === t[o] ? t[o] = r[o] : m(t[o], r[o])) } return t } function b(t) { return "number" == typeof t && isFinite(t) } function w(t) { return "number" == typeof t && t % 1 == 0 } function M(t) { return "string" == typeof t } function _(t) { return "boolean" == typeof t } function x(t) { var i, n, e, s = t; if (!s || "object" != typeof s) return s; for (n in i = Array.isArray(s) ? [] : {}, s) s.hasOwnProperty(n) && (e = s[n], i[n] = e && "object" == typeof e ? x(e) : e); return i } function S(t) { return null !== t } function P(t) { return null === t ? void 0 : t } var C, L, T, G = function () { function t() { this.t = [] } return t.prototype.i = function (t) { this.t = t }, t.prototype.h = function (t, i, n, e) { this.t.forEach(function (s) { t.save(), s.h(t, i, n, e), t.restore() }) }, t }(), z = function () { function t() { } return t.prototype.h = function (t, i, n, e) { t.save(), t.scale(i, i), this.s(t, n, e), t.restore() }, t.prototype.u = function (t, i, n, e) { t.save(), t.scale(i, i), this.o(t, n, e), t.restore() }, t.prototype.o = function (t, i, n) { }, t }(), k = function (t) { function i() { var i = null !== t && t.apply(this, arguments) || this; return i.l = null, i } return c(i, t), i.prototype.v = function (t) { this.l = t }, i.prototype.s = function (t) { if (null !== this.l && null !== this.l._) { var i = this.l._, n = this.l, e = function (e) { t.beginPath(); for (var s = i.to - 1; s >= i.from; --s) { var r = n.M[s]; t.moveTo(r.m, r.g), t.arc(r.m, r.g, e, 0, 2 * Math.PI) } t.fill() }; t.fillStyle = n.p, e(n.k + 2), t.fillStyle = n.N, e(n.k) } }, i }(z), V = { from: 0, to: 1 }, E = function () { function t(t, i) { this.S = new G, this.D = [], this.C = [], this.T = !0, this.A = t, this.L = i, this.S.i(this.D) } return t.prototype.B = function (t) { var i = this, n = this.A.F(); n.length !== this.D.length && (this.C = n.map(function () { return { M: [{ m: 0, g: 0, V: 0, O: 0 }], N: "", p: i.A.P().layout.backgroundColor, k: 0, _: null } }), this.D = this.C.map(function (t) { var i = new k; return i.v(t), i }), this.S.i(this.D)), this.T = !0 }, t.prototype.I = function (t, i, n) { return this.T && (this.W(), this.T = !1), this.S }, t.prototype.W = function () { var t = this, i = this.A.F(), n = this.L.R(), e = this.A.j(); i.forEach(function (i, s) { var r = t.C[s], o = i.U(n); if (null !== o) { var h = y(i.q()); r.N = i.K().Y(n).H, r.p = t.A.P().layout.backgroundColor, r.k = o.k, r.M[0].O = o.O, r.M[0].g = i.X().$(o.O, h.Z), r.M[0].V = n, r.M[0].m = e.J(n), r._ = V } else r._ = null }) }, t }(), N = function () { function t(t) { this.G = t } return t.prototype.h = function (t, i, n, e) { if (null !== this.G) { var s = this.G.it.tt, r = this.G.nt.tt; if (s || r) { t.save(); var o = Math.round(this.G.m * i), h = Math.round(this.G.g * i), a = Math.ceil(this.G.ht * i), c = Math.ceil(this.G.st * i); t.lineCap = "butt", s && o >= 0 && (t.lineWidth = Math.floor(this.G.it.rt * i), t.strokeStyle = this.G.it.et, t.fillStyle = this.G.it.et, u(t, this.G.it.ut), function (t, i, n, e) { t.beginPath(); var s = t.lineWidth % 2 ? .5 : 0; t.moveTo(i + s, 0), t.lineTo(i + s, e), t.stroke() }(t, o, 0, c)), r && h >= 0 && (t.lineWidth = Math.floor(this.G.nt.rt * i), t.strokeStyle = this.G.nt.et, t.fillStyle = this.G.nt.et, u(t, this.G.nt.ut), l(t, h, 0, a)), t.restore() } } }, t }(), O = function () { function t(t) { this.T = !0, this.at = { it: { rt: 1, ut: 0, et: "", tt: !1 }, nt: { rt: 1, ut: 0, et: "", tt: !1 }, ht: 0, st: 0, m: 0, g: 0 }, this.ot = new N(this.at), this.lt = t } return t.prototype.B = function () { this.T = !0 }, t.prototype.I = function (t, i) { return this.T && (this.W(), this.T = !1), this.ot }, t.prototype.W = function () { var t = this.lt.tt(), i = y(this.lt.ft()), n = i.ct().P().crosshair, e = this.at; e.nt.tt = t && this.lt.vt(i), e.it.tt = t && this.lt._t(), e.nt.rt = n.horzLine.width, e.nt.ut = n.horzLine.style, e.nt.et = n.horzLine.color, e.it.rt = n.vertLine.width, e.it.ut = n.vertLine.style, e.it.et = n.vertLine.color, e.ht = i.dt(), e.st = i.wt(), e.m = this.lt.Mt(), e.g = this.lt.bt() }, t }(), R = { aliceblue: "#f0f8ff", antiquewhite: "#faebd7", aqua: "#00ffff", aquamarine: "#7fffd4", azure: "#f0ffff", beige: "#f5f5dc", bisque: "#ffe4c4", black: "#000000", blanchedalmond: "#ffebcd", blue: "#0000ff", blueviolet: "#8a2be2", brown: "#a52a2a", burlywood: "#deb887", cadetblue: "#5f9ea0", chartreuse: "#7fff00", chocolate: "#d2691e", coral: "#ff7f50", cornflowerblue: "#6495ed", cornsilk: "#fff8dc", crimson: "#dc143c", cyan: "#00ffff", darkblue: "#00008b", darkcyan: "#008b8b", darkgoldenrod: "#b8860b", darkgray: "#a9a9a9", darkgreen: "#006400", darkkhaki: "#bdb76b", darkmagenta: "#8b008b", darkolivegreen: "#556b2f", darkorange: "#ff8c00", darkorchid: "#9932cc", darkred: "#8b0000", darksalmon: "#e9967a", darkseagreen: "#8fbc8f", darkslateblue: "#483d8b", darkslategray: "#2f4f4f", darkturquoise: "#00ced1", darkviolet: "#9400d3", deeppink: "#ff1493", deepskyblue: "#00bfff", dimgray: "#696969", dodgerblue: "#1e90ff", feldspar: "#d19275", firebrick: "#b22222", floralwhite: "#fffaf0", forestgreen: "#228b22", fuchsia: "#ff00ff", gainsboro: "#dcdcdc", ghostwhite: "#f8f8ff", gold: "#ffd700", goldenrod: "#daa520", gray: "#808080", green: "#008000", greenyellow: "#adff2f", honeydew: "#f0fff0", hotpink: "#ff69b4", indianred: "#cd5c5c", indigo: "#4b0082", ivory: "#fffff0", khaki: "#f0e68c", lavender: "#e6e6fa", lavenderblush: "#fff0f5", lawngreen: "#7cfc00", lemonchiffon: "#fffacd", lightblue: "#add8e6", lightcoral: "#f08080", lightcyan: "#e0ffff", lightgoldenrodyellow: "#fafad2", lightgreen: "#90ee90", lightgrey: "#d3d3d3", lightpink: "#ffb6c1", lightsalmon: "#ffa07a", lightseagreen: "#20b2aa", lightskyblue: "#87cefa", lightslateblue: "#8470ff", lightslategray: "#778899", lightsteelblue: "#b0c4de", lightyellow: "#ffffe0", lime: "#00ff00", limegreen: "#32cd32", linen: "#faf0e6", magenta: "#ff00ff", maroon: "#800000", mediumaquamarine: "#66cdaa", mediumblue: "#0000cd", mediumorchid: "#ba55d3", mediumpurple: "#9370d8", mediumseagreen: "#3cb371", mediumslateblue: "#7b68ee", mediumspringgreen: "#00fa9a", mediumturquoise: "#48d1cc", mediumvioletred: "#c71585", midnightblue: "#191970", mintcream: "#f5fffa", mistyrose: "#ffe4e1", moccasin: "#ffe4b5", navajowhite: "#ffdead", navy: "#000080", oldlace: "#fdf5e6", olive: "#808000", olivedrab: "#6b8e23", orange: "#ffa500", orangered: "#ff4500", orchid: "#da70d6", palegoldenrod: "#eee8aa", palegreen: "#98fb98", paleturquoise: "#afeeee", palevioletred: "#d87093", papayawhip: "#ffefd5", peachpuff: "#ffdab9", peru: "#cd853f", pink: "#ffc0cb", plum: "#dda0dd", powderblue: "#b0e0e6", purple: "#800080", red: "#ff0000", rosybrown: "#bc8f8f", royalblue: "#4169e1", saddlebrown: "#8b4513", salmon: "#fa8072", sandybrown: "#f4a460", seagreen: "#2e8b57", seashell: "#fff5ee", sienna: "#a0522d", silver: "#c0c0c0", skyblue: "#87ceeb", slateblue: "#6a5acd", slategray: "#708090", snow: "#fffafa", springgreen: "#00ff7f", steelblue: "#4682b4", tan: "#d2b48c", teal: "#008080", thistle: "#d8bfd8", tomato: "#ff6347", turquoise: "#40e0d0", violet: "#ee82ee", violetred: "#d02090", wheat: "#f5deb3", white: "#ffffff", whitesmoke: "#f5f5f5", yellow: "#ffff00", yellowgreen: "#9acd32" }; function I(t) { return (n = i = t) <= 0 || n > 0 ? i < 0 ? 0 : i > 255 ? 255 : Math.round(i) : 0; var i, n } function D(t) { var i, n = function (t) { if ("transparent" === (t = t.toLowerCase())) return [0, 0, 0]; t in R && (t = R[t]); var i = function (t) { var i = T.rgbaRe.exec(t) || T.rgbRe.exec(t); return null !== i ? T.parse(i) : null }(t); if (null !== i) return i; var n, e, s = (n = t, null !== (e = L.re.exec(n)) ? L.parse(e) : null); if (null !== s) return s; var r = function (t) { var i = C.re.exec(t); return null !== i ? C.parse(i) : null }(t); if (null !== r) return r; throw new Error("Cannot parse color: " + t) }(t); return { gt: "rgb(" + n[0] + ", " + n[1] + ", " + n[2] + ")", pt: (i = n, .199 * i[0] + .687 * i[1] + .114 * i[2] > 160 ? "black" : "white") } } function B(t, i, n, e, s, r) { t.fillRect(i, n, r, s), t.fillRect(i + r, n, e - 2 * r, r), t.fillRect(i + r, n + s - r, e - 2 * r, r), t.fillRect(i + e - r, n, r, s) } function J(t, i, n) { t.save(), t.scale(i, i), n(), t.restore() } function X(t, i, n, e, s, r) { t.save(), t.globalCompositeOperation = "copy", t.fillStyle = r, t.fillRect(i, n, e, s), t.restore() } !function (t) { t.re = /^#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])?$/, t.parse = function (t) { return [I(parseInt(t[1] + t[1], 16)), I(parseInt(t[2] + t[2], 16)), I(parseInt(t[3] + t[3], 16))] } }(C || (C = {})), function (t) { t.re = /^#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?$/, t.parse = function (t) { return [I(parseInt(t[1], 16)), I(parseInt(t[2], 16)), I(parseInt(t[3], 16))] } }(L || (L = {})), function (t) { t.rgbRe = /^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/, t.rgbaRe = /^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?[\d]{0,10}(?:\.\d+)?)\s*\)$/, t.parse = function (t) { return [I(parseInt(t[1], 10)), I(parseInt(t[2], 10)), I(parseInt(t[3], 10))] } }(T || (T = {})); var A, W = function () { function t(t, i) { this.v(t, i) } return t.prototype.v = function (t, i) { this.G = t, this.yt = i }, t.prototype.h = function (t, i, n, e, s, r) { if (this.G.tt) { t.font = i.kt; var o = this.G.xt || !this.G.Nt ? i.St : 0, h = i.Dt, u = i.Ct, l = i.Tt, a = i.At, c = i.Et, f = this.G.Lt, p = Math.ceil(n.Bt(t, f)), v = i.Ft, d = i.Vt + u + l, y = Math.ceil(.5 * d), g = h + p + a + c + o, m = this.yt.zt; this.yt.Ot && (m = this.yt.Ot); var b, w, M = (m = Math.round(m)) - y, _ = M + d, x = "right" === s, S = x ? e : 0, P = Math.ceil(e * r), C = S; if (t.fillStyle = this.yt.gt, t.lineWidth = 1, t.lineCap = "butt", f) { x ? (b = S - o, w = (C = S - g) + c) : (C = S + g, b = S + o, w = S + h + o + a); var L = Math.max(1, Math.floor(r)), T = Math.max(1, Math.floor(h * r)), G = x ? P : 0, z = Math.round(M * r), k = Math.round(C * r), V = Math.round(m * r) - Math.floor(.5 * r), E = V + L + (V - z), N = Math.round(b * r); t.save(), t.beginPath(), t.moveTo(G, z), t.lineTo(k, z), t.lineTo(k, E), t.lineTo(G, E), t.fill(), t.fillStyle = this.G.Pt, t.fillRect(x ? P - T : 0, z, T, E - z), this.G.xt && (t.fillStyle = this.yt.et, t.fillRect(G, V, N - G, L)), t.textAlign = "left", t.fillStyle = this.yt.et, J(t, r, function () { t.fillText(f, w, _ - l - v) }), t.restore() } } }, t.prototype.wt = function (t, i) { return this.G.tt ? t.Vt + t.Ct + t.Tt : 0 }, t }(), j = function () { function t(t) { this.It = { zt: 0, et: "#FFF", gt: "#000" }, this.Wt = { Lt: "", tt: !1, xt: !0, Nt: !1, Pt: "" }, this.Rt = { Lt: "", tt: !1, xt: !1, Nt: !0, Pt: "" }, this.T = !0, this.jt = new (t || W)(this.Wt, this.It), this.Ut = new (t || W)(this.Rt, this.It) } return t.prototype.Lt = function () { return this.Wt.Lt }, t.prototype.zt = function () { return this.qt(), this.It.zt }, t.prototype.B = function () { this.T = !0 }, t.prototype.wt = function (t, i) { return void 0 === i && (i = !1), Math.max(this.jt.wt(t, i), this.Ut.wt(t, i)) }, t.prototype.Ht = function () { return this.It.Ot || 0 }, t.prototype.Yt = function (t) { this.It.Ot = t }, t.prototype.Kt = function () { return this.qt(), this.Wt.tt || this.Rt.tt }, t.prototype.$t = function () { return this.qt(), this.Wt.tt }, t.prototype.I = function (t) { return this.qt(), this.Wt.xt = this.Wt.xt && t.P().drawTicks, this.Rt.xt = this.Rt.xt && t.P().drawTicks, this.jt.v(this.Wt, this.It), this.Ut.v(this.Rt, this.It), this.jt }, t.prototype.Xt = function () { return this.qt(), this.jt.v(this.Wt, this.It), this.Ut.v(this.Rt, this.It), this.Ut }, t.prototype.qt = function () { this.T && (this.Wt.xt = !0, this.Rt.xt = !1, this.Zt(this.Wt, this.Rt, this.It)) }, t }(), F = function (t) { function i(i, n, e) { var s = t.call(this) || this; return s.lt = i, s.Jt = n, s.Gt = e, s } return c(i, t), i.prototype.Zt = function (t, i, n) { t.tt = !1; var e = this.lt.P().horzLine; if (e.labelVisible) { var s = this.Jt.q(); if (this.lt.tt() && !this.Jt.Qt() && null !== s) { var r = D(e.labelBackgroundColor); n.gt = r.gt, n.et = r.pt; var o = this.Gt(this.Jt); n.zt = o.zt, t.Lt = this.Jt.ti(o.O, s), t.tt = !0 } } }, i }(j), K = /[1-9]/g, Q = function () { function t() { this.G = null } return t.prototype.v = function (t) { this.G = t }, t.prototype.h = function (t, i, n) { var e = this; if (null !== this.G && !1 !== this.G.tt && 0 !== this.G.Lt.length) { t.font = i.kt; var s = Math.round(i.ii.Bt(t, this.G.Lt, K)); if (!(s <= 0)) { t.save(); var r = i.ni, o = s + 2 * r, h = o / 2, u = this.G.dt, l = this.G.zt, a = Math.floor(l - h) + .5; a < 0 ? (l += Math.abs(0 - a), a = Math.floor(l - h) + .5) : a + o > u && (l -= Math.abs(u - (a + o)), a = Math.floor(l - h) + .5); var c = a + o, f = 0 + i.Dt + i.Ct + i.Vt + i.Tt; t.fillStyle = this.G.gt; var p = Math.round(a * n), v = Math.round(0 * n), d = Math.round(c * n), g = Math.round(f * n); t.fillRect(p, v, d - p, g - v); var m = Math.round(this.G.zt * n), b = v, w = Math.round((b + i.Dt + i.St) * n); t.fillStyle = this.G.et; var M = Math.max(1, Math.floor(n)), _ = Math.floor(.5 * n); t.fillRect(m - _, b, M, w - b); var x = f - i.Ft - i.Tt; t.textAlign = "left", t.fillStyle = this.G.et, J(t, n, function () { t.fillText(y(e.G).Lt, a + r, x) }), t.restore() } } }, t }(), Z = function () { function t(t, i, n) { this.T = !0, this.ot = new Q, this.at = { tt: !1, gt: "#4c525e", et: "white", Lt: "", dt: 0, zt: NaN }, this.L = t, this.hi = i, this.Gt = n } return t.prototype.B = function () { this.T = !0 }, t.prototype.I = function () { return this.T && (this.W(), this.T = !1), this.ot.v(this.at), this.ot }, t.prototype.W = function () { var t = this.at; t.tt = !1; var i = this.L.P().vertLine; if (i.labelVisible) { var n = this.hi.j(); if (!n.Qt()) { var e = n.si(this.L.R()); t.dt = n.dt(); var s = this.Gt(); if (s.V) { t.zt = s.zt, t.Lt = n.ri(y(e)), t.tt = !0; var r = D(i.labelBackgroundColor); t.gt = r.gt, t.et = r.pt } } } }, t }(), H = function () { function t() { this.ei = null, this.ui = 0 } return t.prototype.ai = function () { return this.ui }, t.prototype.oi = function (t) { this.ui = t }, t.prototype.X = function () { return this.ei }, t.prototype.li = function (t) { this.ei = t }, t.prototype.fi = function (t, i) { return [] }, t.prototype.ci = function (t) { return [] }, t.prototype.vi = function () { return [] }, t }(); !function (t) { t[t.Normal = 0] = "Normal", t[t.Magnet = 1] = "Magnet" }(A || (A = {})); var q = function (t) { function i(i, n) { var e, s, r = t.call(this) || this; r._i = null, r.di = NaN, r.wi = 0, r.Mi = !0, r.bi = new Map, r.mi = !1, r.gi = NaN, r.pi = NaN, r.yi = NaN, r.ki = NaN, r.hi = i, r.xi = n, r.Ni = new E(i, r), r.Si = (e = function () { return r.di }, s = function () { return r.pi }, function (t) { var i = s(), n = e(); if (t === y(r._i).Di()) return { O: n, zt: i }; var o = y(t.q()); return { O: t.Ci(i, o), zt: i } }); var o = function () { return { V: r.hi.j().si(r.wi), zt: r.Mt() } }; return r.Ti = new Z(r, i, o), r.Ai = new O(r), r } return c(i, t), i.prototype.P = function () { return this.xi }, i.prototype.Ei = function (t, i) { this.yi = t, this.ki = i }, i.prototype.Li = function () { this.yi = NaN, this.ki = NaN }, i.prototype.Bi = function () { return this.yi }, i.prototype.Fi = function () { return this.ki }, i.prototype.Vi = function (t, i, n) { this.mi || (this.mi = !0), this.Mi = !0, this.zi(t, i, n) }, i.prototype.R = function () { return this.wi }, i.prototype.Mt = function () { return this.gi }, i.prototype.bt = function () { return this.pi }, i.prototype.tt = function () { return this.Mi }, i.prototype.Oi = function () { this.Mi = !1, this.Pi(), this.di = NaN, this.gi = NaN, this.pi = NaN, this._i = null, this.Li() }, i.prototype.ci = function (t) { return null !== this._i ? [this.Ai, this.Ni] : [] }, i.prototype.vt = function (t) { return t === this._i && this.xi.horzLine.visible }, i.prototype._t = function () { return this.xi.vertLine.visible }, i.prototype.fi = function (t, i) { this.Mi && this._i === t || this.bi.clear(); var n = []; return this._i === t && n.push(this.Ii(this.bi, i, this.Si)), n }, i.prototype.vi = function () { return this.Mi ? [this.Ti] : [] }, i.prototype.ft = function () { return this._i }, i.prototype.Wi = function () { this.Ai.B(), this.bi.forEach(function (t) { return t.B() }), this.Ti.B(), this.Ni.B() }, i.prototype.Ri = function (t) { return t && !t.Di().Qt() ? t.Di() : null }, i.prototype.zi = function (t, i, n) { this.ji(t, i, n) && this.Wi() }, i.prototype.ji = function (t, i, n) { var e = this.gi, s = this.pi, r = this.di, o = this.wi, h = this._i, u = this.Ri(n); this.wi = t, this.gi = isNaN(t) ? NaN : this.hi.j().J(t), this._i = n; var l = null !== u ? u.q() : null; return null !== u && null !== l ? (this.di = i, this.pi = u.$(i, l)) : (this.di = NaN, this.pi = NaN), e !== this.gi || s !== this.pi || o !== this.wi || r !== this.di || h !== this._i }, i.prototype.Pi = function () { var t = this.hi.F().map(function (t) { return t.qi().Ui() }).filter(S), i = 0 === t.length ? null : Math.max.apply(Math, t); this.wi = null !== i ? i : NaN }, i.prototype.Ii = function (t, i, n) { var e = t.get(i); return void 0 === e && (e = new F(this, i, n), t.set(i, e)), e }, i }(H); function U(t, i) { if (!b(t)) return "n/a"; if (!w(i)) throw new TypeError("invalid length"); if (i < 0 || i > 16) throw new TypeError("invalid length"); return 0 === i ? t.toString() : ("0000000000000000" + t.toString()).slice(-i) } var Y = function () { function t(t, i, n, e) { if (i || (i = 1), b(t) && w(t) || (t = 100), t < 0) throw new TypeError("invalid base"); this.Jt = t, this.Hi = i, this.Yi = e, n && void 0 !== e && e > 0 && 2 !== e && 4 !== e && 8 !== e || (this.Ki = n, this.$i()) } return t.prototype.Xi = function (t) { var i = t < 0 ? "−" : ""; return t = Math.abs(t), this.Ki ? i + this.Zi(t) : i + this.Ji(t) }, t.prototype.$i = function () { if (this.Gi = 0, this.Jt > 0 && this.Hi > 0) { var t = this.Jt; for (this.Ki && this.Yi && (t /= this.Yi); t > 1;)t /= 10, this.Gi++ } }, t.prototype.Ji = function (t) { var i; i = this.Ki ? Math.pow(10, this.Gi || 0) : this.Jt / this.Hi; var n = Math.floor(t), e = "", s = void 0 !== this.Gi ? this.Gi : NaN; if (i > 1) { var r = +(Math.round(t * i) - n * i).toFixed(this.Gi); r >= i && (r -= i, n += 1), e = "." + U(+r.toFixed(this.Gi) * this.Hi, s) } else n = Math.round(n * i) / i, s > 0 && (e = "." + U(0, s)); return n.toFixed(0) + e }, t.prototype.Zi = function (t) { var i = this.Jt / this.Hi, n = Math.floor(t), e = Math.round(t * i) - n * i; if (e === i && (e = 0, n += 1), !this.Gi) throw new Error("_fractionalLength is not calculated"); var s = ""; if (this.Yi) { var r = e % this.Yi; s = U(e = (e - r) / this.Yi, this.Gi) + "'" + (2 === this.Yi ? ["0", "5"][r] : 8 === this.Yi ? ["0", "1", "2", "3", "4", "5", "6", "7"][r] : ["0", "2", "5", "7"][r]) } else s = U(e * this.Hi, this.Gi); return n.toString() + "'" + s }, t }(), $ = function (t) { function i(i) { return void 0 === i && (i = 100), t.call(this, i) || this } return c(i, t), i.prototype.Xi = function (i) { return t.prototype.Xi.call(this, i) + "%" }, i }(Y), tt = function () { function t() { this.Qi = [] } return t.prototype.tn = function (t, i, n) { var e = { in: t, nn: i, hn: !0 === n }; this.Qi.push(e) }, t.prototype.sn = function (t) { var i = this.Qi.findIndex(function (i) { return t === i.in }); i > -1 && this.Qi.splice(i, 1) }, t.prototype.rn = function (t) { this.Qi = this.Qi.filter(function (i) { return i.nn === t }) }, t.prototype.en = function (t, i) { var n = p(this.Qi); this.Qi = this.Qi.filter(function (t) { return !t.hn }), n.forEach(function (n) { return n.in(t, i) }) }, t.prototype.un = function () { return this.Qi.length > 0 }, t.prototype.an = function () { this.Qi = [] }, t }(), it = function () { function t(t, i) { this.on = t, this.ln = i } return t.prototype.fn = function (t) { return null !== t && this.on === t.on && this.ln === t.ln }, t.prototype.cn = function () { return new t(this.on, this.ln) }, t.prototype.vn = function () { return this.on }, t.prototype._n = function () { return this.ln }, t.prototype.dn = function () { return this.ln - this.on }, t.prototype.Qt = function () { return this.ln === this.on || Number.isNaN(this.ln) || Number.isNaN(this.on) }, t.prototype.wn = function (i) { return null === i ? this : new t(Math.min(this.vn(), i.vn()), Math.max(this._n(), i._n())) }, t.prototype.Mn = function (t) { if (b(t) && 0 != this.ln - this.on) { var i = .5 * (this.ln + this.on), n = this.ln - i, e = this.on - i; n *= t, e *= t, this.ln = i + n, this.on = i + e } }, t.prototype.bn = function (t) { b(t) && (this.ln += t, this.on += t) }, t.prototype.mn = function () { return { minValue: this.on, maxValue: this.ln } }, t.gn = function (i) { return null === i ? null : new t(i.minValue, i.maxValue) }, t }(); function nt(t, i, n) { return Math.min(Math.max(t, i), n) } function et(t, i, n) { return i - t <= n } function st(t) { return t <= 0 ? NaN : Math.log(t) / Math.log(10) } function rt(t) { var i = Math.ceil(t); return i % 2 != 0 ? i - 1 : i } function ot(t) { var i = Math.ceil(t); return i % 2 == 0 ? i - 1 : i } function ht(t, i) { var n = 100 * (t - i) / i; return i < 0 ? -n : n } function ut(t, i) { var n = ht(t.vn(), i), e = ht(t._n(), i); return new it(n, e) } function lt(t, i) { var n = 100 * (t - i) / i + 100; return i < 0 ? -n : n } function at(t, i) { var n = lt(t.vn(), i), e = lt(t._n(), i); return new it(n, e) } function ct(t) { var i = Math.abs(t); if (i < 1e-8) return 0; var n = st(i + 1e-4) + 4; return t < 0 ? -n : n } function ft(t) { var i = Math.abs(t); if (i < 1e-8) return 0; var n = Math.pow(10, i - 4) - 1e-4; return t < 0 ? -n : n } function pt(t) { if (null === t) return null; var i = ct(t.vn()), n = ct(t._n()); return new it(i, n) } var vt, dt = function () { function t(t, i) { if (this.pn = t, this.yn = i, function (t) { if (t < 0) return !1; for (var i = t; i > 1; i /= 10)if (i % 10 != 0) return !1; return !0 }(this.pn)) this.kn = [2, 2.5, 2]; else { this.kn = []; for (var n = this.pn; 1 !== n;) { if (n % 2 == 0) this.kn.push(2), n /= 2; else { if (n % 5 != 0) throw new Error("unexpected base"); this.kn.push(2), this.kn.push(2.5), n /= 5 } if (this.kn.length > 100) throw new Error("something wrong with base") } } } return t.prototype.xn = function (t, i, n) { for (var e, s, r, o = 0 === this.pn ? 0 : 1 / this.pn, h = Math.pow(10, Math.max(0, Math.ceil(st(t - i)))), u = 0, l = this.yn[0]; ;) { var a = et(h, o, 1e-9) && h > o + 1e-9, c = et(h, n * l, 1e-9), f = et(h, 1, 1e-9); if (!(a && c && f)) break; h /= l, l = this.yn[++u % this.yn.length] } if (h <= o + 1e-9 && (h = o), h = Math.max(1, h), this.kn.length > 0 && (e = h, s = 1, r = 1e-9, Math.abs(e - s) < r)) for (u = 0, l = this.kn[0]; et(h, n * l, 1e-9) && h > o + 1e-9;)h /= l, l = this.kn[++u % this.kn.length]; return h }, t }(), yt = function () { function t(t, i, n, e) { this.Nn = [], this.Jt = t, this.pn = i, this.Sn = n, this.Dn = e } return t.prototype.xn = function (t, i) { if (t < i) throw new Error("high < low"); var n = this.Jt.wt(), e = (t - i) * this.Cn() / n, s = new dt(this.pn, [2, 2.5, 2]), r = new dt(this.pn, [2, 2, 2.5]), o = new dt(this.pn, [2.5, 2, 2]), h = []; return h.push(s.xn(t, i, e)), h.push(r.xn(t, i, e)), h.push(o.xn(t, i, e)), function (t) { if (t.length < 1) throw Error("array is empty"); for (var i = t[0], n = 1; n < t.length; ++n)t[n] < i && (i = t[n]); return i }(h) }, t.prototype.Tn = function () { var t = this.Jt, i = t.q(); if (null !== i) { var n = t.wt(), e = this.Sn(n - 1, i), s = this.Sn(0, i), r = this.Jt.P().entireTextOnly ? this.An() / 2 : 0, o = r, h = n - 1 - r, u = Math.max(e, s), l = Math.min(e, s); if (u !== l) { for (var a = this.xn(u, l), c = u % a, f = u >= l ? 1 : -1, p = null, v = 0, d = u - (c += c < 0 ? a : 0); d > l; d -= a) { var y = this.Dn(d, i, !0); null !== p && Math.abs(y - p) < this.Cn() || y < o || y > h || (v < this.Nn.length ? (this.Nn[v].En = y, this.Nn[v].Ln = t.Bn(d)) : this.Nn.push({ En: y, Ln: t.Bn(d) }), v++, p = y, t.Fn() && (a = this.xn(d * f, l))) } this.Nn.length = v } else this.Nn = [] } else this.Nn = [] }, t.prototype.Vn = function () { return this.Nn }, t.prototype.An = function () { return this.Jt.Vt() }, t.prototype.Cn = function () { return Math.ceil(2.5 * this.An()) }, t }(); function gt(t) { return t.slice().sort(function (t, i) { return y(t.ai()) - y(i.ai()) }) } !function (t) { t[t.Normal = 0] = "Normal", t[t.Logarithmic = 1] = "Logarithmic", t[t.Percentage = 2] = "Percentage", t[t.IndexedTo100 = 3] = "IndexedTo100" }(vt || (vt = {})); var mt, bt = new $, wt = new Y(100, 1), Mt = function () { function t(t, i, n, e) { this.zn = 0, this.On = null, this.Pn = null, this.In = null, this.Wn = { Rn: !1, jn: null }, this.Un = 0, this.qn = 0, this.Hn = new tt, this.Yn = new tt, this.Kn = [], this.$n = null, this.Xn = null, this.Zn = null, this.Jn = null, this.Gn = wt, this.Qn = t, this.xi = i, this.th = n, this.ih = e, this.nh = new yt(this, 100, this.hh.bind(this), this.sh.bind(this)) } return t.prototype.rh = function () { return this.Qn }, t.prototype.P = function () { return this.xi }, t.prototype.eh = function (t) { if (m(this.xi, t), this.uh(), void 0 !== t.mode && this.ah({ oh: t.mode }), void 0 !== t.scaleMargins) { var i = d(t.scaleMargins.top), n = d(t.scaleMargins.bottom); if (i < 0 || i > 1) throw new Error("Invalid top margin - expect value between 0 and 1, given=" + i); if (n < 0 || n > 1 || i + n > 1) throw new Error("Invalid bottom margin - expect value between 0 and 1, given=" + n); if (i + n > 1) throw new Error("Invalid margins - sum of margins must be less than 1, given=" + (i + n)); this.lh(), this.Xn = null } }, t.prototype.fh = function () { return this.xi.autoScale }, t.prototype.Fn = function () { return 1 === this.xi.mode }, t.prototype.vh = function () { return 2 === this.xi.mode }, t.prototype._h = function () { return 3 === this.xi.mode }, t.prototype.oh = function () { return { dh: this.xi.autoScale, wh: this.xi.invertScale, oh: this.xi.mode } }, t.prototype.ah = function (t) { var i = this.oh(), n = null; void 0 !== t.dh && (this.xi.autoScale = t.dh), void 0 !== t.oh && (this.xi.mode = t.oh, 2 !== t.oh && 3 !== t.oh || (this.xi.autoScale = !0), this.Wn.Rn = !1), 1 === i.oh && t.oh !== i.oh && (function (t) { if (null === t) return !1; var i = ft(t.vn()), n = ft(t._n()); return isFinite(i) && isFinite(n) }(this.Pn) ? null !== (n = function (t) { if (null === t) return null; var i = ft(t.vn()), n = ft(t._n()); return new it(i, n) }(this.Pn)) && this.Mh(n) : this.xi.autoScale = !0), 1 === t.oh && t.oh !== i.oh && null !== (n = pt(this.Pn)) && this.Mh(n); var e = i.oh !== this.xi.mode; e && (2 === i.oh || this.vh()) && this.uh(), e && (3 === i.oh || this._h()) && this.uh(), void 0 !== t.wh && i.wh !== t.wh && (this.xi.invertScale = t.wh, this.bh()), this.Yn.en(i, this.oh()) }, t.prototype.mh = function () { return this.Yn }, t.prototype.Vt = function () { return this.th.fontSize }, t.prototype.wt = function () { return this.zn }, t.prototype.gh = function (t) { this.zn !== t && (this.zn = t, this.lh(), this.Xn = null) }, t.prototype.ph = function () { if (this.On) return this.On; var t = this.wt() - this.yh() - this.kh(); return this.On = t, t }, t.prototype.xh = function () { return this.Nh(), this.Pn }, t.prototype.Mh = function (t, i) { var n = this.Pn; (i || null === n && null !== t || null !== n && !n.fn(t)) && (this.Xn = null, this.Pn = t) }, t.prototype.Qt = function () { return this.Nh(), 0 === this.zn || !this.Pn || this.Pn.Qt() }, t.prototype.Sh = function (t) { return this.wh() ? t : this.wt() - 1 - t }, t.prototype.$ = function (t, i) { return this.vh() ? t = ht(t, i) : this._h() && (t = lt(t, i)), this.sh(t, i) }, t.prototype.Dh = function (t, i, n) { this.Nh(); for (var e = this.kh(), s = y(this.xh()), r = s.vn(), o = s._n(), h = this.ph() - 1, u = this.wh(), l = h / (o - r), a = void 0 === n ? 0 : n.from, c = void 0 === n ? t.length : n.to, f = this.Ch(), p = a; p < c; p++) { var v = t[p], d = v.O; if (!isNaN(d)) { var g = d; null !== f && (g = f(v.O, i)); var m = e + l * (g - r), b = u ? m : this.zn - 1 - m; v.g = b } } }, t.prototype.Th = function (t, i, n) { this.Nh(); for (var e = this.kh(), s = y(this.xh()), r = s.vn(), o = s._n(), h = this.ph() - 1, u = this.wh(), l = h / (o - r), a = void 0 === n ? 0 : n.from, c = void 0 === n ? t.length : n.to, f = this.Ch(), p = a; p < c; p++) { var v = t[p], d = v.open, g = v.high, m = v.low, b = v.close; null !== f && (d = f(v.open, i), g = f(v.high, i), m = f(v.low, i), b = f(v.close, i)); var w = e + l * (d - r), M = u ? w : this.zn - 1 - w; v.Ah = M, w = e + l * (g - r), M = u ? w : this.zn - 1 - w, v.Eh = M, w = e + l * (m - r), M = u ? w : this.zn - 1 - w, v.Lh = M, w = e + l * (b - r), M = u ? w : this.zn - 1 - w, v.Bh = M } }, t.prototype.Ci = function (t, i) { var n = this.hh(t, i); return this.Fh(n, i) }, t.prototype.Fh = function (t, i) { var n = t; return this.vh() ? n = function (t, i) { return i < 0 && (t = -t), t / 100 * i + i }(n, i) : this._h() && (n = function (t, i) { return t -= 100, i < 0 && (t = -t), t / 100 * i + i }(n, i)), n }, t.prototype.Vh = function () { return this.Kn }, t.prototype.zh = function () { if (this.$n) return this.$n; for (var t = [], i = 0; i < this.Kn.length; i++) { var n = this.Kn[i]; null === n.ai() && n.oi(i + 1), t.push(n) } return t = gt(t), this.$n = t, this.$n }, t.prototype.Oh = function (t) { -1 === this.Kn.indexOf(t) && (this.Kn.push(t), this.uh(), this.Ph()) }, t.prototype.Ih = function (t) { var i = this.Kn.indexOf(t); if (-1 === i) throw new Error("source is not attached to scale"); this.Kn.splice(i, 1), this.Qt() && this.ah({ dh: !0 }), this.uh(), this.Ph() }, t.prototype.q = function () { for (var t = null, i = 0, n = this.Kn; i < n.length; i++) { var e = n[i].q(); null !== e && (null === t || e.Wh < t.Wh) && (t = e) } return null === t ? null : t.Z }, t.prototype.wh = function () { return this.xi.invertScale }, t.prototype.Vn = function () { return this.Xn || (this.nh.Tn(), this.Xn = this.nh.Vn(), this.Hn.en()), this.Xn }, t.prototype.Rh = function () { return this.Hn }, t.prototype.jh = function (t) { this.vh() || this._h() || null === this.Zn && null === this.In && (this.Qt() || (this.Zn = this.zn - t, this.In = y(this.xh()).cn())) }, t.prototype.Uh = function (t) { if (!this.vh() && !this._h() && null !== this.Zn) { this.ah({ dh: !1 }), (t = this.zn - t) < 0 && (t = 0); var i = (this.Zn + .2 * (this.zn - 1)) / (t + .2 * (this.zn - 1)), n = y(this.In).cn(); i = Math.max(i, .1), n.Mn(i), this.Mh(n) } }, t.prototype.qh = function () { this.vh() || this._h() || (this.Zn = null, this.In = null) }, t.prototype.Hh = function (t) { this.fh() || null === this.Jn && null === this.In && (this.Qt() || (this.Jn = t, this.In = y(this.xh()).cn())) }, t.prototype.Yh = function (t) { if (!this.fh() && null !== this.Jn) { var i = y(this.xh()).dn() / (this.ph() - 1), n = t - this.Jn; this.wh() && (n *= -1); var e = n * i, s = y(this.In).cn(); s.bn(e), this.Mh(s, !0), this.Xn = null } }, t.prototype.Kh = function () { this.fh() || null !== this.Jn && (this.Jn = null, this.In = null) }, t.prototype.$h = function () { return this.Gn || this.uh(), this.Gn }, t.prototype.ti = function (t, i) { switch (this.xi.mode) { case 2: return this.$h().Xi(ht(t, i)); case 3: return this.$h().Xi(lt(t, i)); default: return this.Xh(t) } }, t.prototype.Bn = function (t) { switch (this.xi.mode) { case 2: case 3: return this.$h().Xi(t); default: return this.Xh(t) } }, t.prototype.Zh = function (t) { return this.Xh(t, y(this.Jh()).$h()) }, t.prototype.Gh = function (t, i) { return t = ht(t, i), bt.Xi(t) }, t.prototype.Qh = function () { return this.Kn }, t.prototype.ts = function (t) { this.Wn = { jn: t, Rn: !1 } }, t.prototype.Wi = function () { this.Kn.forEach(function (t) { return t.Wi() }) }, t.prototype.uh = function () { this.Xn = null; var t = this.Jh(), i = 100; null !== t && (i = Math.round(1 / t.ns())), this.Gn = wt, this.vh() ? (this.Gn = bt, i = 100) : this._h() ? (this.Gn = new Y(100, 1), i = 100) : null !== t && (this.Gn = t.$h()), this.nh = new yt(this, i, this.hh.bind(this), this.sh.bind(this)), this.nh.Tn() }, t.prototype.Ph = function () { this.$n = null }, t.prototype.Jh = function () { return this.Kn[0] || null }, t.prototype.yh = function () { return this.wh() ? this.xi.scaleMargins.bottom * this.wt() + this.qn : this.xi.scaleMargins.top * this.wt() + this.Un }, t.prototype.kh = function () { return this.wh() ? this.xi.scaleMargins.top * this.wt() + this.Un : this.xi.scaleMargins.bottom * this.wt() + this.qn }, t.prototype.Nh = function () { this.Wn.Rn || (this.Wn.Rn = !0, this.hs()) }, t.prototype.lh = function () { this.On = null }, t.prototype.sh = function (t, i) { if (this.Nh(), this.Qt()) return 0; t = this.Fn() && t ? ct(t) : t; var n = y(this.xh()), e = this.kh() + (this.ph() - 1) * (t - n.vn()) / n.dn(); return this.Sh(e) }, t.prototype.hh = function (t, i) { if (this.Nh(), this.Qt()) return 0; var n = this.Sh(t), e = y(this.xh()), s = e.vn() + e.dn() * ((n - this.kh()) / (this.ph() - 1)); return this.Fn() ? ft(s) : s }, t.prototype.bh = function () { this.Xn = null, this.nh.Tn() }, t.prototype.hs = function () { var t = this.Wn.jn; if (null !== t) { for (var i = null, n = 0, e = 0, s = 0, r = this.Qh(); s < r.length; s++) { var o = r[s], h = o.q(); if (null !== h) { var u = o.ss(t.rs(), t.es()), l = u && u.xh(); if (null !== l) { switch (this.xi.mode) { case 1: l = pt(l); break; case 2: l = ut(l, h.Z); break; case 3: l = at(l, h.Z) }if (i = null === i ? l : i.wn(y(l)), null !== u) { var a = u.us(); null !== a && (n = Math.max(n, a.above), e = Math.max(n, a.below)) } } } } if (n === this.Un && e === this.qn || (this.Un = n, this.qn = e, this.Xn = null, this.lh()), null !== i) { if (i.vn() === i._n()) { var c = this.Jh(), f = 5 * (null === c || this.vh() || this._h() ? 1 : c.ns()); i = new it(i.vn() - f, i._n() + f) } this.Mh(i) } else null === this.Pn && this.Mh(new it(-.5, .5)); this.Wn.Rn = !0 } }, t.prototype.Ch = function () { return this.vh() ? ht : this._h() ? lt : this.Fn() ? ct : null }, t.prototype.Xh = function (t, i) { return void 0 === this.ih.priceFormatter ? (void 0 === i && (i = this.$h()), i.Xi(t)) : this.ih.priceFormatter(t) }, t }(); function _t(t) { void 0 !== t.borderColor && (t.borderUpColor = t.borderColor, t.borderDownColor = t.borderColor), void 0 !== t.wickColor && (t.wickUpColor = t.wickColor, t.wickDownColor = t.wickColor) } !function (t) { t[t.LastBar = 0] = "LastBar", t[t.LastVisible = 1] = "LastVisible" }(mt || (mt = {})); var xt = function (t) { return t.getUTCFullYear() }; var St = function () { function t(t, i) { void 0 === t && (t = "yyyy-MM-dd"), void 0 === i && (i = "default"), this.as = t, this.os = i } return t.prototype.Xi = function (t) { return function (t, i, n) { return i.replace(/yyyy/g, function (t) { return U(xt(t), 4) }(t)).replace(/yy/g, function (t) { return U(xt(t) % 100, 2) }(t)).replace(/MMMM/g, function (t, i) { return new Date(t.getUTCFullYear(), t.getUTCMonth(), 1).toLocaleString(i, { month: "long" }) }(t, n)).replace(/MMM/g, function (t, i) { return new Date(t.getUTCFullYear(), t.getUTCMonth(), 1).toLocaleString(i, { month: "short" }) }(t, n)).replace(/MM/g, function (t) { return U(function (t) { return t.getUTCMonth() + 1 }(t), 2) }(t)).replace(/dd/g, function (t) { return U(function (t) { return t.getUTCDate() }(t), 2) }(t)) }(t, this.as, this.os) }, t }(), Pt = function () { function t(t) { this.ls = t || "%h:%m:%s" } return t.prototype.Xi = function (t) { return this.ls.replace("%h", U(t.getUTCHours(), 2)).replace("%m", U(t.getUTCMinutes(), 2)).replace("%s", U(t.getUTCSeconds(), 2)) }, t }(), Ct = { fs: "yyyy-MM-dd", cs: "%h:%m:%s", vs: " ", _s: "default" }, Lt = function () { function t(t) { void 0 === t && (t = {}); var i = f(f({}, Ct), t); this.ds = new St(i.fs, i._s), this.ws = new Pt(i.cs), this.Ms = i.vs } return t.prototype.Xi = function (t) { return "" + this.ds.Xi(t) + this.Ms + this.ws.Xi(t) }, t }(), Tt = function () { function t(t, i) { void 0 === i && (i = 50), this.bs = 0, this.ms = 1, this.gs = 1, this.ps = new Map, this.ys = new Map, this.ks = t, this.xs = i } return t.prototype.Xi = function (t) { var i = void 0 === t.Ns ? new Date(1e3 * t.Ss).getTime() : new Date(Date.UTC(t.Ns.year, t.Ns.month - 1, t.Ns.day)).getTime(), n = this.ps.get(i); if (void 0 !== n) return n.Ds; if (this.bs === this.xs) { var e = this.ys.get(this.gs); this.ys.delete(this.gs), this.ps.delete(d(e)), this.gs++, this.bs-- } var s = this.ks(t); return this.ps.set(i, { Ds: s, Cs: this.ms }), this.ys.set(this.ms, i), this.bs++, this.ms++, s }, t }(), Gt = function () { function t(t, i) { v(t <= i, "right should be >= left"), this.Ts = t, this.As = i } return t.prototype.rs = function () { return this.Ts }, t.prototype.es = function () { return this.As }, t.prototype.Es = function () { return this.As - this.Ts + 1 }, t.prototype.Ls = function (t) { return this.Ts <= t && t <= this.As }, t.prototype.fn = function (t) { return this.Ts === t.rs() && this.As === t.es() }, t }(); function zt(t, i) { return null === t || null === i ? t === i : t.fn(i) } var kt, Vt = function () { function t() { this.Bs = new Map, this.ps = null } return t.prototype.Fs = function (t) { var i = this; this.ps = null, this.Bs.clear(), t.forEach(function (t, n) { var e = i.Bs.get(t.Vs); void 0 === e && (e = [], i.Bs.set(t.Vs, e)), e.push({ zs: n, V: t.V, Os: t.Vs }) }) }, t.prototype.Ps = function (t, i) { var n = Math.ceil(i / t); return null !== this.ps && this.ps.Is === n || (this.ps = { Vn: this.Ws(n), Is: n }), this.ps.Vn }, t.prototype.Ws = function (t) { for (var i = [], n = 0, e = Array.from(this.Bs.keys()).sort(function (t, i) { return i - t }); n < e.length; n++) { var s = e[n]; if (this.Bs.get(s)) { var r = i; i = []; for (var o = r.length, h = 0, u = d(this.Bs.get(s)), l = u.length, a = 1 / 0, c = -1 / 0, f = 0; f < l; f++) { for (var p = u[f], v = p.zs; h < o;) { var y = r[h], g = y.zs; if (!(g < v)) { a = g; break } h++, i.push(y), c = g, a = 1 / 0 } a - v >= t && v - c >= t && (i.push(p), c = v) } for (; h < o; h++)i.push(r[h]) } } return i }, t }(), Et = function () { function t(t) { this.Rs = t } return t.prototype.js = function () { return null === this.Rs ? null : new Gt(Math.floor(this.Rs.rs()), Math.ceil(this.Rs.es())) }, t.prototype.Us = function () { return this.Rs }, t.qs = function () { return new t(null) }, t }(); !function (t) { t[t.Year = 0] = "Year", t[t.Month = 1] = "Month", t[t.DayOfMonth = 2] = "DayOfMonth", t[t.Time = 3] = "Time", t[t.TimeWithSeconds = 4] = "TimeWithSeconds" }(kt || (kt = {})); var Nt = function () { function t(t, i, n) { this.Hs = 0, this.Ys = null, this.Ks = [], this.Jn = null, this.Zn = null, this.$s = new Vt, this.Xs = new Map, this.Zs = Et.qs(), this.Js = !0, this.Gs = new tt, this.Qs = new tt, this.tr = new tt, this.ir = null, this.nr = null, this.hr = [], this.xi = i, this.ih = n, this.sr = i.rightOffset, this.rr = i.barSpacing, this.hi = t, this.er() } return t.prototype.P = function () { return this.xi }, t.prototype.ur = function (t) { m(this.ih, t), this.ar(), this.er() }, t.prototype.eh = function (t, i) { m(this.xi, t), this.xi.fixLeftEdge && this.or(), void 0 !== t.barSpacing && this.lr(t.barSpacing), void 0 !== t.rightOffset && this.cr(t.rightOffset), this.ar(), this.er(), this.tr.en() }, t.prototype.si = function (t) { var i; return (null === (i = this.Ks[t]) || void 0 === i ? void 0 : i.V) || null }, t.prototype.vr = function (t, i) { if (this.Ks.length < 1) return null; if (t.Ss > this.Ks[this.Ks.length - 1].V.Ss) return i ? this.Ks.length - 1 : null; for (var n = 0; n < this.Ks.length; ++n) { if (t.Ss === this.Ks[n].V.Ss) return n; if (t.Ss < this.Ks[n].V.Ss) return i ? n : null } return null }, t.prototype.Qt = function () { return 0 === this.Hs || 0 === this.Ks.length }, t.prototype._r = function () { return this.dr(), this.Zs.js() }, t.prototype.wr = function () { return this.dr(), this.Zs.Us() }, t.prototype.Mr = function () { var t = this._r(); if (null === t) return null; var i = { from: t.rs(), to: t.es() }; return this.br(i) }, t.prototype.br = function (t) { var i = Math.round(t.from), n = Math.round(t.to), e = y(this.mr()), s = y(this.gr()); return { from: y(this.si(Math.max(e, i))), to: y(this.si(Math.min(s, n))) } }, t.prototype.pr = function (t) { var i = this.hi.j(); return { from: y(i.vr(t.from, !0)), to: y(i.vr(t.to, !0)) } }, t.prototype.yr = function () { return this.$s }, t.prototype.dt = function () { return this.Hs }, t.prototype.kr = function (t) { if (isFinite(t) && !(t <= 0) && this.Hs !== t) { if (this.xi.lockVisibleTimeRangeOnResize && this.Hs) { var i = this.rr * t / this.Hs; this.xr(i) } if (this.xi.fixLeftEdge) { var n = this._r(); if (null !== n && n.rs() <= 0) { var e = this.Hs - t; this.sr -= Math.round(e / this.rr) + 1 } } this.Hs = t, this.Js = !0, this.Nr(), this.Sr() } }, t.prototype.J = function (t) { if (this.Qt() || !w(t)) return 0; var i = this.Dr() + this.sr - t; return this.Hs - (i + .5) * this.rr }, t.prototype.Cr = function (t, i) { for (var n = this.Dr(), e = void 0 === i ? 0 : i.from, s = void 0 === i ? t.length : i.to, r = e; r < s; r++) { var o = t[r].V, h = n + this.sr - o, u = this.Hs - (h + .5) * this.rr; t[r].m = u } }, t.prototype.Tr = function (t) { return Math.ceil(this.Ar(t)) }, t.prototype.cr = function (t) { this.Js = !0, this.sr = t, this.Sr(), this.hi.Er(), this.hi.Lr() }, t.prototype.Br = function () { return this.rr }, t.prototype.lr = function (t) { this.xr(t), this.Sr(), this.hi.Er(), this.hi.Lr() }, t.prototype.Fr = function () { return this.sr }, t.prototype.Vn = function () { if (this.Qt()) return null; if (null !== this.nr) return this.nr; for (var t = this.rr, i = 5 * (this.hi.P().layout.fontSize + 4), n = Math.round(i / t), e = y(this._r()), s = Math.max(e.rs(), e.rs() - n), r = Math.max(e.es(), e.es() - n), o = 0, h = 0, u = this.$s.Ps(t, i); h < u.length; h++) { var l = u[h]; if (s <= l.zs && l.zs <= r) { var a = this.si(l.zs); if (null !== a) { if (o < this.hr.length) { var c = this.hr[o]; c.En = this.J(l.zs), c.Ln = this.Vr(a, l.Os), c.Os = l.Os } else this.hr.push({ En: this.J(l.zs), Ln: this.Vr(a, l.Os), Os: l.Os }); o++ } } } return this.hr.length = o, this.nr = this.hr, this.hr }, t.prototype.zr = function () { this.Js = !0, this.lr(this.xi.barSpacing), this.cr(this.xi.rightOffset) }, t.prototype.Or = function (t) { this.Js = !0, this.Ys = t, this.Sr(), this.or() }, t.prototype.Pr = function (t, i) { var n = this.Ar(t), e = this.Br(), s = e + i * (e / 10); this.lr(s), this.xi.rightBarStaysOnScroll || this.cr(this.Fr() + (n - this.Ar(t))) }, t.prototype.jh = function (t) { this.Jn && this.Kh(), null === this.Zn && null === this.ir && (this.Qt() || (this.Zn = t, this.Ir())) }, t.prototype.Uh = function (t) { if (null !== this.ir) { var i = nt(this.Hs - t, 0, this.Hs), n = nt(this.Hs - y(this.Zn), 0, this.Hs); 0 !== i && 0 !== n && this.lr(this.ir.Br * i / n) } }, t.prototype.qh = function () { null !== this.Zn && (this.Zn = null, this.Wr()) }, t.prototype.Hh = function (t) { null === this.Jn && null === this.ir && (this.Qt() || (this.Jn = t, this.Ir())) }, t.prototype.Yh = function (t) { if (null !== this.Jn) { var i = (this.Jn - t) / this.Br(); this.sr = y(this.ir).Fr + i, this.Js = !0, this.Sr() } }, t.prototype.Kh = function () { null !== this.Jn && (this.Jn = null, this.Wr()) }, t.prototype.Rr = function () { this.jr(this.xi.rightOffset) }, t.prototype.jr = function (t, i) { var n = this; if (void 0 === i && (i = 400), !isFinite(t)) throw new RangeError("offset is required and must be finite number"); if (!isFinite(i) || i <= 0) throw new RangeError("animationDuration (optional) must be finite positive number"); var e = this.sr, s = (new Date).getTime(), r = function () { var o = ((new Date).getTime() - s) / i, h = o >= 1, u = h ? t : e + (t - e) * o; n.cr(u), h || setTimeout(r, 20) }; r() }, t.prototype.B = function (t) { this.Js = !0, this.Ks = t, this.$s.Fs(t), this.Sr() }, t.prototype.Ur = function () { return this.Gs }, t.prototype.qr = function () { return this.Qs }, t.prototype.Hr = function () { return this.tr }, t.prototype.Dr = function () { return this.Ys || 0 }, t.prototype.Yr = function (t) { var i = t.Es(); this.xr(this.Hs / i), this.sr = t.es() - this.Dr(), this.Sr(), this.Js = !0, this.hi.Er(), this.hi.Lr() }, t.prototype.Kr = function () { var t = this.mr(), i = this.gr(); null !== t && null !== i && this.Yr(new Gt(t, i + this.xi.rightOffset)) }, t.prototype.$r = function (t) { var i = new Gt(t.from, t.to); this.Yr(i) }, t.prototype.ri = function (t) { return void 0 !== this.ih.timeFormatter ? this.ih.timeFormatter(t.Ns || t.Ss) : this.Xr.Xi(new Date(1e3 * t.Ss)) }, t.prototype.mr = function () { return 0 === this.Ks.length ? null : 0 }, t.prototype.gr = function () { return 0 === this.Ks.length ? null : this.Ks.length - 1 }, t.prototype.Zr = function (t) { return (this.Hs + 1 - t) / this.rr }, t.prototype.Ar = function (t) { var i = this.Zr(t), n = this.Dr() + this.sr - i; return Math.round(1e6 * n) / 1e6 }, t.prototype.xr = function (t) { var i = this.rr; this.rr = t, this.Nr(), i !== this.rr && (this.Js = !0, this.Jr()) }, t.prototype.dr = function () { if (this.Js) if (this.Js = !1, this.Qt()) this.Gr(Et.qs()); else { var t = this.Dr(), i = this.Hs / this.rr, n = this.sr + t, e = new Gt(n - i + 1, n); this.Gr(new Et(e)) } }, t.prototype.Nr = function () { if (this.rr < .5 && (this.rr = .5, this.Js = !0), 0 !== this.Hs) { var t = .5 * this.Hs; this.rr > t && (this.rr = t, this.Js = !0) } }, t.prototype.Sr = function () { var t = this.Qr(); this.sr > t && (this.sr = t, this.Js = !0); var i = this.te(); null !== i && this.sr < i && (this.sr = i, this.Js = !0) }, t.prototype.te = function () { var t = this.mr(), i = this.Ys; return null === t || null === i ? null : t - i - 1 + (this.xi.fixLeftEdge ? this.Hs / this.rr : Math.min(2, this.Ks.length)) }, t.prototype.Qr = function () { return this.Hs / this.rr - Math.min(2, this.Ks.length) }, t.prototype.Ir = function () { this.ir = { Br: this.Br(), Fr: this.Fr() } }, t.prototype.Wr = function () { this.ir = null }, t.prototype.Vr = function (t, i) { var n = this, e = this.Xs.get(i); return void 0 === e && (e = new Tt(function (t) { return n.ie(t, i) }), this.Xs.set(i, e)), e.Xi(t) }, t.prototype.ie = function (t, i) { var n, e, s = this.xi.timeVisible; return e = i < 20 && s ? this.xi.secondsVisible ? 4 : 3 : i < 40 && s ? 3 : i < 50 || i < 60 ? 2 : i < 70 ? 1 : 0, void 0 !== this.xi.tickMarkFormatter ? this.xi.tickMarkFormatter(null !== (n = t.Ns) && void 0 !== n ? n : t.Ss, e, this.ih.locale) : function (t, i, n) { var e = {}; switch (i) { case 0: e.year = "numeric"; break; case 1: e.month = "short"; break; case 2: e.day = "numeric"; break; case 3: e.hour12 = !1, e.hour = "2-digit", e.minute = "2-digit"; break; case 4: e.hour12 = !1, e.hour = "2-digit", e.minute = "2-digit", e.second = "2-digit" }var s = void 0 === t.Ns ? new Date(1e3 * t.Ss) : new Date(Date.UTC(t.Ns.year, t.Ns.month - 1, t.Ns.day)); return new Date(s.getUTCFullYear(), s.getUTCMonth(), s.getUTCDate(), s.getUTCHours(), s.getUTCMinutes(), s.getUTCSeconds(), s.getUTCMilliseconds()).toLocaleString(n, e) }(t, e, this.ih.locale) }, t.prototype.Gr = function (t) { var i = this.Zs; this.Zs = t, zt(i.js(), this.Zs.js()) || this.Gs.en(), zt(i.Us(), this.Zs.Us()) || this.Qs.en(), this.Jr() }, t.prototype.Jr = function () { this.nr = null }, t.prototype.ar = function () { this.Jr(), this.Xs.clear() }, t.prototype.er = function () { var t = this.ih.dateFormat; this.xi.timeVisible ? this.Xr = new Lt({ fs: t, cs: this.xi.secondsVisible ? "%h:%m:%s" : "%h:%m", vs: "   ", _s: this.ih.locale }) : this.Xr = new St(t, this.ih.locale) }, t.prototype.or = function () { if (this.xi.fixLeftEdge) { var t = this.mr(); if (null !== t) { var i = y(this._r()).rs() - t; if (i < 0) { var n = this.sr - i - 1; this.cr(n) } } } }, t }(); function Ot(t) { return !b(t) && !M(t) } function Rt(t) { return b(t) } var It = "'Trebuchet MS', Roboto, Ubuntu, sans-serif"; function Dt(t, i, n) { return void 0 !== n ? n += " " : n = "", void 0 === i && (i = It), "" + n + t + "px " + i } var Bt = function () { function t(t) { this.ne = { Dt: 1, St: 4, Vt: NaN, kt: "", he: "", et: "", Tt: 0, At: 0, Et: 0, Ct: 0, Ft: 0 }, this.A = t } return t.prototype.P = function () { var t = this.ne, i = this.se(), n = this.ee(); return t.Vt === i && t.he === n || (t.Vt = i, t.he = n, t.kt = Dt(i, n), t.Ct = Math.floor(i / 3.5), t.Tt = t.Ct, t.At = Math.max(Math.ceil(i / 2 - t.St / 2), 0), t.Et = Math.ceil(i / 2 + t.St / 2), t.Ft = Math.round(i / 10)), t.et = this.ue(), this.ne }, t.prototype.ue = function () { return this.A.P().layout.textColor }, t.prototype.se = function () { return this.A.P().layout.fontSize }, t.prototype.ee = function () { return this.A.P().layout.fontFamily }, t }(); function Jt(t) { return "left" === t || "right" === t } var Xt = function () { function t() { this.G = null } return t.prototype.v = function (t) { this.G = t }, t.prototype.h = function (t, i, n, e) { var s = this; if (null !== this.G) { var r = Math.floor(i); t.lineWidth = r; var o = Math.ceil(this.G.st * i), h = Math.ceil(this.G.ht * i); !function (t, i) { t.save(), t.lineWidth % 2 && t.translate(.5, .5), i(), t.restore() }(t, function () { var n = y(s.G); if (n.ae) { t.strokeStyle = n.oe, u(t, n.le), t.beginPath(); for (var e = 0, l = n.fe; e < l.length; e++) { var a = l[e], c = Math.round(a.En * i); t.moveTo(c, -r), t.lineTo(c, o + r) } t.stroke() } if (n.ce) { t.strokeStyle = n.ve, u(t, n._e), t.beginPath(); for (var f = 0, p = n.de; f < p.length; f++) { var v = p[f], d = Math.round(v.En * i); t.moveTo(-r, d), t.lineTo(h + r, d) } t.stroke() } }) } }, t }(), At = function () { function t(t) { this.ot = new Xt, this.T = !0, this._i = t } return t.prototype.B = function () { this.T = !0 }, t.prototype.I = function (t, i) { if (this.T) { var n = this._i.ct().P().grid, e = { st: t, ht: i, ce: n.horzLines.visible, ae: n.vertLines.visible, ve: n.horzLines.color, oe: n.vertLines.color, _e: n.horzLines.style, le: n.vertLines.style, de: this._i.Di().Vn(), fe: this._i.ct().j().Vn() || [] }; this.ot.v(e), this.T = !1 } return this.ot }, t }(), Wt = function () { function t() { this.we = new WeakMap, this.T = !0 } return t.prototype.ci = function (t) { var i = this.we.get(t); return void 0 === i && (i = [new At(t)], this.we.set(t, i)), this.T && (i.forEach(function (t) { return t.B() }), this.T = !1), i }, t.prototype.Me = function () { this.T = !0 }, t }(), jt = function () { function t(t) { this.be = new Map, this.me = !1, this.ge = !1, this.Rs = null, this.pe = t } return t.prototype.ye = function (t, i) { var n = function (t, i) { return void 0 === t ? i : { ke: Math.max(t.ke, i.ke), dh: t.dh || i.dh } }(this.be.get(t), i); this.be.set(t, n) }, t.prototype.xe = function () { return this.pe }, t.prototype.Ne = function (t) { var i = this.be.get(t); return void 0 === i ? { ke: this.pe } : { ke: Math.max(this.pe, i.ke), dh: i.dh } }, t.prototype.Se = function () { this.ge = !0, this.Rs = null }, t.prototype.De = function () { return this.ge }, t.prototype.$r = function (t) { this.Rs = t, this.ge = !1 }, t.prototype.Ce = function () { return this.Rs }, t.prototype.wn = function (t) { var i = this; this.me = this.me || t.me, t.ge && this.Se(), t.Rs && this.$r(t.Rs), this.pe = Math.max(this.pe, t.pe), t.be.forEach(function (t, n) { i.ye(n, t) }) }, t }(), Ft = function () { function t(t) { this.Te = t } return t.prototype.Xi = function (t) { var i = ""; return t < 0 && (i = "-", t = -t), t < 995 ? i + this.Ae(t) : t < 999995 ? i + this.Ae(t / 1e3) + "K" : t < 999999995 ? (t = 1e3 * Math.round(t / 1e3), i + this.Ae(t / 1e6) + "M") : (t = 1e6 * Math.round(t / 1e6), i + this.Ae(t / 1e9) + "B") }, t.prototype.Ae = function (t) { var i = Math.pow(10, this.Te); return ((t = Math.round(t * i) / i) >= 1e-15 && t < 1 ? t.toFixed(this.Te).replace(/\.?0+$/, "") : String(t)).replace(/(\.[1-9]*)0+$/, function (t, i) { return i }) }, t }(); function Kt(t, i, n, e) { if (0 !== i.length) { var s = i[e.from].m, r = i[e.from].g; t.moveTo(s, r); for (var o = e.from + 1; o < e.to; ++o) { var h = i[o]; if (1 === n) { var u = i[o - 1].g, l = h.m; t.lineTo(l, u) } t.lineTo(h.m, h.g) } } } var Qt = function (t) { function i() { var i = null !== t && t.apply(this, arguments) || this; return i.l = null, i } return c(i, t), i.prototype.v = function (t) { this.l = t }, i.prototype.s = function (t) { if (null !== this.l && 0 !== this.l.M.length && null !== this.l._) { t.lineCap = "butt", t.strokeStyle = this.l.N, t.lineWidth = this.l.rt, u(t, this.l.ut), t.lineWidth = 1, t.beginPath(), t.moveTo(this.l.M[this.l._.from].m, this.l.Ee), t.lineTo(this.l.M[this.l._.from].m, this.l.M[this.l._.from].g), Kt(t, this.l.M, this.l.Le, this.l._), this.l._.to > this.l._.from && (t.lineTo(this.l.M[this.l._.to - 1].m, this.l.Ee), t.lineTo(this.l.M[this.l._.from].m, this.l.Ee)), t.closePath(); var i = t.createLinearGradient(0, 0, 0, this.l.Ee); i.addColorStop(0, this.l.Be), i.addColorStop(1, this.l.Fe), t.fillStyle = i, t.fill() } }, i }(z), Zt = function (t) { function i() { var i = null !== t && t.apply(this, arguments) || this; return i.l = null, i } return c(i, t), i.prototype.v = function (t) { this.l = t }, i.prototype.s = function (t) { null !== this.l && 0 !== this.l.M.length && null !== this.l._ && (t.lineCap = "square", t.lineWidth = this.l.rt, u(t, this.l.ut), t.strokeStyle = this.l.N, t.lineJoin = "miter", t.beginPath(), Kt(t, this.l.M, this.l.Le, this.l._), t.stroke()) }, i }(z); function Ht(t, i, n, e, s) { void 0 === e && (e = 0), void 0 === s && (s = t.length); for (var r = s - e; 0 < r;) { var o = r >> 1, h = e + o; n(t[h], i) ? (e = h + 1, r -= o + 1) : r = o } return e } function qt(t, i, n, e, s) { void 0 === e && (e = 0), void 0 === s && (s = t.length); for (var r = s - e; 0 < r;) { var o = r >> 1, h = e + o; n(i, t[h]) ? r = o : (e = h + 1, r -= o + 1) } return e } function Ut(t, i) { return t.V < i } function Yt(t, i) { return t < i.V } function $t(t, i, n) { var e = i.rs(), s = i.es(), r = Ht(t, e, Ut), o = qt(t, s, Yt); if (!n) return { from: r, to: o }; var h = r, u = o; return r > 0 && r < t.length && t[r].V >= e && (h = r - 1), o > 0 && o < t.length && t[o - 1].V <= s && (u = o + 1), { from: h, to: u } } var ti = function () { function t(t, i, n) { this.Ve = !0, this.ze = !0, this.Oe = [], this.Pe = null, this.Ie = t, this.We = i, this.Re = n } return t.prototype.B = function (t) { this.Ve = !0, "data" === t && (this.ze = !0) }, t.prototype.je = function () { this.ze && (this.Ue(), this.ze = !1), this.Ve && (this.qe(), this.Ve = !1) }, t.prototype.He = function () { this.Pe = null }, t.prototype.qe = function () { var t = this.Ie.X(), i = this.We.j(); if (this.He(), !i.Qt() && !t.Qt()) { var n = i._r(); if (null !== n && 0 !== this.Ie.qi().Ye()) { var e = this.Ie.q(); null !== e && (this.Pe = $t(this.Oe, n, this.Re), this.Ke(t, i, e.Z)) } } }, t }(), ii = function (t) { function i(i, n) { return t.call(this, i, n, !0) || this } return c(i, t), i.prototype.Ke = function (t, i, n) { i.Cr(this.Oe, P(this.Pe)), t.Dh(this.Oe, n, P(this.Pe)) }, i.prototype.$e = function (t, i) { return { V: t, O: i, m: NaN, g: NaN } }, i.prototype.Ue = function () { var t = this, i = this.Ie.K(); this.Oe = this.Ie.qi().Xe().map(function (n) { var e = n.Z[3]; return t.Ze(n.zs, e, i) }) }, i }(ti), ni = function (t) { function i(i, n) { var e = t.call(this, i, n) || this; return e.ot = new G, e.Je = new Qt, e.Ge = new Zt, e.ot.i([e.Je, e.Ge]), e } return c(i, t), i.prototype.I = function (t, i) { this.je(); var n = this.Ie.P(), e = { Le: n.lineType, M: this.Oe, N: n.lineColor, ut: n.lineStyle, rt: n.lineWidth, Be: n.topColor, Fe: n.bottomColor, Ee: t, _: this.Pe }; return this.Je.v(e), this.Ge.v(e), this.ot }, i.prototype.Ze = function (t, i) { return this.$e(t, i) }, i }(ii), ei = function () { function t() { this.G = null, this.Qe = 0, this.tu = 0 } return t.prototype.v = function (t) { this.G = t }, t.prototype.h = function (t, i, n, e) { if (null !== this.G && 0 !== this.G.qi.length && null !== this.G._) { this.Qe = Math.max(1, Math.floor(function (t, i) { return Math.floor(.3 * t * i) }(this.G.Br, i))), this.Qe >= 2 && Math.floor(i) % 2 != this.Qe % 2 && this.Qe--, this.tu = this.G.iu ? Math.min(this.Qe, Math.floor(i)) : this.Qe; for (var s = null, r = this.G._.from; r < this.G._.to; ++r) { var o = this.G.qi[r]; s !== o.et && (t.fillStyle = o.et, s = o.et); var h = Math.floor(.5 * this.tu), u = Math.round(o.m * i), l = u - h, a = this.tu, c = l + a - 1, f = Math.round(o.Eh * i) - h, p = Math.round(o.Lh * i) + h, v = Math.max(p - f, this.tu); t.fillRect(l, f, a, v); var d = Math.ceil(1.5 * this.Qe); if (this.tu <= this.Qe) { if (this.G.nu) { var y = u - d, g = Math.max(f, Math.round(o.Ah * i) - h), m = g + a - 1; m > f + v - 1 && (g = (m = f + v - 1) - a + 1), t.fillRect(y, g, l - y, m - g + 1) } var b = u + d, w = Math.max(f, Math.round(o.Bh * i) - h), M = w + a - 1; M > f + v - 1 && (w = (M = f + v - 1) - a + 1), t.fillRect(c + 1, w, b - c, M - w + 1) } } } }, t }(), si = function (t) { function i(i, n) { return t.call(this, i, n, !1) || this } return c(i, t), i.prototype.Ke = function (t, i, n) { i.Cr(this.Oe, P(this.Pe)), t.Th(this.Oe, n, P(this.Pe)) }, i.prototype.hu = function (t, i, n) { return { V: t, open: i.Z[0], high: i.Z[1], low: i.Z[2], close: i.Z[3], m: NaN, Ah: NaN, Eh: NaN, Lh: NaN, Bh: NaN } }, i.prototype.Ue = function () { var t = this, i = this.Ie.K(); this.Oe = this.Ie.qi().Xe().map(function (n) { return t.Ze(n.zs, n, i) }) }, i }(ti), ri = function (t) { function i() { var i = null !== t && t.apply(this, arguments) || this; return i.ot = new ei, i } return c(i, t), i.prototype.I = function (t, i) { this.je(); var n = this.Ie.P(), e = { qi: this.Oe, Br: this.We.j().Br(), nu: n.openVisible, iu: n.thinBars, _: this.Pe }; return this.ot.v(e), this.ot }, i.prototype.Ze = function (t, i, n) { return f(f({}, this.hu(t, i, n)), { et: n.Y(t).H }) }, i }(si), oi = function () { function t() { this.G = null, this.Qe = 0 } return t.prototype.v = function (t) { this.G = t }, t.prototype.h = function (t, i, n, e) { if (null !== this.G && 0 !== this.G.qi.length && null !== this.G._) { this.Qe = function (t, i) { var n = Math.floor(.8 * t * i), e = Math.floor(t * i), s = Math.min(n, e - 1); return Math.max(1, s) }(this.G.Br, i), this.Qe >= 2 && Math.floor(i) % 2 != this.Qe % 2 && this.Qe--; var s = this.G.qi; this.G.su && this.ru(t, s, this.G._, i), this.G.eu && this.uu(t, s, this.G._, this.G.Br, i); var r = this.au(i); (!this.G.eu || this.Qe > 2 * r) && this.ou(t, s, this.G._, i) } }, t.prototype.ru = function (t, i, n, e) { if (null !== this.G) { var s = "", r = Math.min(Math.floor(e), Math.floor(this.G.Br * e)); r = Math.min(r, this.Qe); for (var o = Math.floor(.5 * r), h = n.from; h < n.to; h++) { var u = i[h]; u.lu !== s && (t.fillStyle = u.lu, s = u.lu); var l = Math.round(Math.min(u.Ah, u.Bh) * e), a = Math.round(Math.max(u.Ah, u.Bh) * e), c = Math.round(u.Eh * e), f = Math.round(u.Lh * e), p = Math.round(e * u.m); t.fillRect(p - o, c, r, l - c), t.fillRect(p - o, a + 1, r, f - a) } } }, t.prototype.au = function (t) { var i = Math.floor(1 * t); this.Qe <= 2 * i && (i = Math.floor(.5 * (this.Qe - 1))); var n = Math.max(1, i); return this.Qe <= 2 * n ? Math.floor(1 * t) : n }, t.prototype.uu = function (t, i, n, e, s) { for (var r = "", o = this.au(s), h = n.from; h < n.to; h++) { var u = i[h]; u.Pt !== r && (t.fillStyle = u.Pt, r = u.Pt); var l = Math.round(u.m * s) - Math.floor(.5 * this.Qe), a = l + this.Qe - 1, c = Math.round(Math.min(u.Ah, u.Bh) * s), f = Math.round(Math.max(u.Ah, u.Bh) * s); e > 2 * o ? B(t, l, c, a - l + 1, f - c + 1, o) : t.fillRect(l, c, a - l + 1, f - c + 1) } }, t.prototype.ou = function (t, i, n, e) { if (null !== this.G) for (var s = "", r = this.au(e), o = n.from; o < n.to; o++) { var h = i[o], u = Math.round(Math.min(h.Ah, h.Bh) * e), l = Math.round(Math.max(h.Ah, h.Bh) * e), a = Math.round(h.m * e) - Math.floor(.5 * this.Qe), c = a + this.Qe - 1; if (this.G.eu && (a += r, u += r, c -= r, l -= r), !(u > l)) { if (h.et !== s) { var f = h.et; t.fillStyle = f, s = f } t.fillRect(a, u, c - a + 1, l - u + 1) } } }, t }(), hi = function (t) { function i() { var i = null !== t && t.apply(this, arguments) || this; return i.ot = new oi, i } return c(i, t), i.prototype.I = function (t, i) { this.je(); var n = this.Ie.P(), e = { qi: this.Oe, Br: this.We.j().Br(), su: n.wickVisible, eu: n.borderVisible, _: this.Pe }; return this.ot.v(e), this.ot }, i.prototype.Ze = function (t, i, n) { var e = n.Y(t); return f(f({}, this.hu(t, i, n)), { et: e.H, lu: e.fu, Pt: e.cu }) }, i }(si), ui = function () { function t() { this.G = null, this.vu = [] } return t.prototype.v = function (t) { this.G = t, this.vu = [] }, t.prototype.h = function (t, i, n, e) { if (null !== this.G && 0 !== this.G.M.length && null !== this.G._) { this.vu.length || this._u(i); for (var s = Math.round(this.G.du * i), r = Math.max(1, Math.floor(i)), o = this.G._.from; o < this.G._.to; o++) { var h = this.G.M[o], u = this.vu[o - this.G._.from], l = Math.round(h.g * i); t.fillStyle = h.et, t.fillRect(u.rs, l, u.es - u.rs + 1, s - l + r) } } }, t.prototype._u = function (t) { if (null !== this.G && 0 !== this.G.M.length && null !== this.G._) { var i = Math.ceil(this.G.Br * t) <= 3 ? 0 : Math.max(1, Math.floor(t)), n = Math.round(this.G.Br * t) - i; this.vu = new Array(this.G._.to - this.G._.from); for (var e = this.G._.from; e < this.G._.to; e++) { var s, r = this.G.M[e], o = Math.round(r.m * t), h = void 0, u = void 0; n % 2 ? (h = o - (s = (n - 1) / 2), u = o + s) : (h = o - (s = n / 2), u = o + s - 1), this.vu[e - this.G._.from] = { rs: h, es: u, wu: o, Mu: r.m * t, V: r.V } } for (e = this.G._.from + 1; e < this.G._.to; e++) { var l = this.vu[e - this.G._.from], a = this.vu[e - this.G._.from - 1]; l.V === a.V + 1 && l.rs - a.es !== i + 1 && (a.wu > a.Mu ? a.es = l.rs - i - 1 : l.rs = a.es + i + 1) } var c = Math.ceil(this.G.Br * t); for (e = this.G._.from; e < this.G._.to; e++) { (l = this.vu[e - this.G._.from]).es < l.rs && (l.es = l.rs); var f = l.es - l.rs + 1; c = Math.min(f, c) } if (i > 0 && c < 4) for (e = this.G._.from; e < this.G._.to; e++)(f = (l = this.vu[e - this.G._.from]).es - l.rs + 1) > c && (l.wu > l.Mu ? l.es -= 1 : l.rs += 1) } else this.vu = [] }, t }(); function li(t) { return { M: [], Br: t, du: NaN, _: null } } function ai(t, i, n) { return { V: t, O: i, m: NaN, g: NaN, et: n } } var ci = function (t) { function i(i, n) { var e = t.call(this, i, n, !1) || this; return e.S = new G, e.bu = li(0), e.ot = new ui, e } return c(i, t), i.prototype.I = function (t, i) { return this.je(), this.S }, i.prototype.Ue = function () { var t = this.We.j().Br(); this.bu = li(t); for (var i = 0, n = 0, e = this.Ie.P().color, s = 0, r = this.Ie.qi().Xe(); s < r.length; s++) { var o = r[s], h = o.Z[3], u = void 0 !== o.et ? o.et : e, l = ai(o.zs, h, u); ++i < this.bu.M.length ? this.bu.M[i] = l : this.bu.M.push(l), this.Oe[n++] = { V: o.zs, m: 0 } } this.ot.v(this.bu), this.S.i([this.ot]) }, i.prototype.He = function () { t.prototype.He.call(this), this.bu._ = null }, i.prototype.Ke = function (t, i, n) { if (null !== this.Pe) { var e = i.Br(), s = y(i._r()), r = t.$(this.Ie.P().base, n); i.Cr(this.bu.M), t.Dh(this.bu.M, n), this.bu.du = r, this.bu._ = $t(this.bu.M, s, !1), this.bu.Br = e, this.ot.v(this.bu) } }, i }(ti), fi = function (t) { function i(i, n) { var e = t.call(this, i, n) || this; return e.Ge = new Zt, e } return c(i, t), i.prototype.I = function (t, i) { this.je(); var n = this.Ie.P(), e = { M: this.Oe, N: n.color, ut: n.lineStyle, Le: n.lineType, rt: n.lineWidth, _: this.Pe }; return this.Ge.v(e), this.Ge }, i.prototype.Ze = function (t, i) { return this.$e(t, i) }, i }(ii), pi = /[2-9]/g, vi = function () { function t(t) { void 0 === t && (t = 50), this.ps = new Map, this.mu = 0, this.gu = Array.from(new Array(t)) } return t.prototype.pu = function () { this.ps.clear(), this.gu.fill(void 0) }, t.prototype.Bt = function (t, i, n) { var e = n || pi, s = String(i).replace(e, "0"), r = this.ps.get(s); if (void 0 === r) { if (0 === (r = t.measureText(s).width) && 0 !== i.length) return 0; var o = this.gu[this.mu]; void 0 !== o && this.ps.delete(o), this.gu[this.mu] = s, this.mu = (this.mu + 1) % this.gu.length, this.ps.set(s, r) } return r }, t }(), di = function () { function t(t) { this.yu = null, this.ne = null, this.ku = "right", this.Hs = 0, this.xu = t } return t.prototype.Nu = function (t, i, n, e) { this.yu = t, this.ne = i, this.Hs = n, this.ku = e }, t.prototype.h = function (t, i) { null !== this.ne && null !== this.yu && this.yu.h(t, this.ne, this.xu, this.Hs, this.ku, i) }, t }(), yi = function () { function t(t, i, n) { this.Su = t, this.xu = new vi(50), this.Du = i, this.A = n, this.se = -1, this.ot = new di(this.xu) } return t.prototype.I = function (t, i) { var n = this.A.Cu(this.Du); if (null === n) return null; var e = n.Tu(this.Du) ? n.Di() : this.Du.X(); if (null === e) return null; var s = n.Au(e); if ("overlay" === s) return null; var r = this.A.Eu(); return r.Vt !== this.se && (this.se = r.Vt, this.xu.pu()), this.ot.Nu(this.Su.Xt(), r, i, s), this.ot }, t }(), gi = function () { function t() { this.G = null } return t.prototype.v = function (t) { this.G = t }, t.prototype.h = function (t, i, n, e) { if (null !== this.G && !1 !== this.G.tt) { var s = Math.round(this.G.g * i); if (!(s < 0 || s > Math.ceil(this.G.wt * i))) { var r = Math.ceil(this.G.dt * i); t.lineCap = "butt", t.strokeStyle = this.G.et, t.lineWidth = Math.floor(this.G.rt * i), u(t, this.G.ut), l(t, s, 0, r) } } }, t }(), mi = function () { function t(t) { this.Lu = { dt: 0, wt: 0, g: 0, et: "rgba(0, 0, 0, 0)", rt: 1, ut: 0, tt: !1 }, this.Bu = new gi, this.T = !0, this.Ie = t, this.We = t.ct(), this.Bu.v(this.Lu) } return t.prototype.B = function () { this.T = !0 }, t.prototype.I = function (t, i) { return this.T && (this.Fu(t, i), this.T = !1), this.Bu }, t }(), bi = function (t) { function i(i) { return t.call(this, i) || this } return c(i, t), i.prototype.Fu = function (t, i) { this.Lu.tt = !1; var n = this.Ie.X(), e = n.oh().oh; if (2 === e || 3 === e) { var s = this.Ie.P(); if (s.baseLineVisible) { var r = this.Ie.q(); null !== r && (this.Lu.tt = !0, this.Lu.g = n.$(r.Z, r.Z), this.Lu.dt = i, this.Lu.wt = t, this.Lu.et = s.baseLineColor, this.Lu.rt = s.baseLineWidth, this.Lu.ut = s.baseLineStyle) } } }, i }(mi); function wi(t, i) { return ot(Math.min(Math.max(t, 12), 30) * i) } function Mi(t, i) { switch (t) { case "arrowDown": case "arrowUp": return wi(i, 1); case "circle": return wi(i, .8); case "square": return wi(i, .7) } } function _i(t) { return rt(wi(t, 1)) } function xi(t) { return Math.max(wi(t, .1), 3) } function Si(t, i, n, e, s) { var r = Mi("square", n), o = (r - 1) / 2, h = t - o, u = i - o; return e >= h && e <= h + r && s >= u && s <= u + r } function Pi(t, i, n, e, s) { var r = (Mi("arrowUp", s) - 1) / 2, o = (ot(s / 2) - 1) / 2; i.beginPath(), t ? (i.moveTo(n - r, e), i.lineTo(n, e - r), i.lineTo(n + r, e), i.lineTo(n + o, e), i.lineTo(n + o, e + r), i.lineTo(n - o, e + r), i.lineTo(n - o, e)) : (i.moveTo(n - r, e), i.lineTo(n, e + r), i.lineTo(n + r, e), i.lineTo(n + o, e), i.lineTo(n + o, e - r), i.lineTo(n - o, e - r), i.lineTo(n - o, e)), i.fill() } var Ci = function (t) { function i() { var i = null !== t && t.apply(this, arguments) || this; return i.G = null, i.xu = new vi, i.se = -1, i.ee = "", i.Vu = "", i } return c(i, t), i.prototype.v = function (t) { this.G = t }, i.prototype.Nu = function (t, i) { this.se === t && this.ee === i || (this.se = t, this.ee = i, this.Vu = Dt(t, i), this.xu.pu()) }, i.prototype.zu = function (t, i) { if (null === this.G || null === this.G._) return null; for (var n = this.G._.from; n < this.G._.to; n++) { var e = this.G.M[n]; if (Ti(e, t, i)) return { Ou: e.Pu, Iu: e.Iu } } return null }, i.prototype.s = function (t, i, n) { if (null !== this.G && null !== this.G._) { t.textBaseline = "middle", t.font = this.Vu; for (var e = this.G._.from; e < this.G._.to; e++) { var s = this.G.M[e]; void 0 !== s.Lt && (s.Lt.dt = this.xu.Bt(t, s.Lt.Wu), s.Lt.wt = this.se), Li(s, t) } } }, i }(z); function Li(t, i) { i.fillStyle = t.et, void 0 !== t.Lt && function (t, i, n, e) { t.fillText(i, n, e) }(i, t.Lt.Wu, t.m - t.Lt.dt / 2, t.Lt.g), function (t, i) { if (0 !== t.Ye) { switch (t.Ru) { case "arrowDown": return void Pi(!1, i, t.m, t.g, t.Ye); case "arrowUp": return void Pi(!0, i, t.m, t.g, t.Ye); case "circle": return void function (t, i, n, e) { var s = (Mi("circle", e) - 1) / 2; t.beginPath(), t.arc(i, n, s, 0, 2 * Math.PI, !1), t.fill() }(i, t.m, t.g, t.Ye); case "square": return void function (t, i, n, e) { var s = Mi("square", e), r = (s - 1) / 2, o = i - r, h = n - r; t.fillRect(o, h, s, s) }(i, t.m, t.g, t.Ye) }t.Ru } }(t, i) } function Ti(t, i, n) { return !(void 0 === t.Lt || !function (t, i, n, e, s, r) { var o = e / 2; return s >= t && s <= t + n && r >= i - o && r <= i + o }(t.m, t.Lt.g, t.Lt.dt, t.Lt.wt, i, n)) || function (t, i, n) { if (0 === t.Ye) return !1; switch (t.Ru) { case "arrowDown": case "arrowUp": return function (t, i, n, e, s, r) { return Si(i, n, e, s, r) }(0, t.m, t.g, t.Ye, i, n); case "circle": return function (t, i, n, e, s) { var r = 2 + Mi("circle", n) / 2, o = t - e, h = i - s; return Math.sqrt(o * o + h * h) <= r }(t.m, t.g, t.Ye, i, n); case "square": return Si(t.m, t.g, t.Ye, i, n) }t.Ru }(t, i, n) } function Gi(t, i, n, e, s, r, o, h, u) { var l = b(n) ? n : n.close, a = b(n) ? n : n.high, c = b(n) ? n : n.low, f = b(i.size) ? Math.max(i.size, 0) : 1, p = _i(h.Br()) * f, v = p / 2; switch (t.Ye = p, i.position) { case "inBar": return t.g = o.$(l, u), void (void 0 !== t.Lt && (t.Lt.g = t.g + v + r + .6 * s)); case "aboveBar": return t.g = o.$(a, u) - v - e.ju, void 0 !== t.Lt && (t.Lt.g = t.g - v - .6 * s, e.ju += 1.2 * s), void (e.ju += p + r); case "belowBar": return t.g = o.$(c, u) + v + e.Uu, void 0 !== t.Lt && (t.Lt.g = t.g + v + r + .6 * s, e.Uu += 1.2 * s), void (e.Uu += p + r) }i.position } var zi = function () { function t(t, i) { this.T = !0, this.qu = !0, this.Hu = !0, this.Yu = null, this.ot = new Ci, this.Ku = t, this.hi = i, this.G = { M: [], _: null } } return t.prototype.B = function (t) { this.T = !0, this.Hu = !0, "data" === t && (this.qu = !0) }, t.prototype.I = function (t, i, n) { this.T && this.je(); var e = this.hi.P().layout; return this.ot.Nu(e.fontSize, e.fontFamily), this.ot.v(this.G), this.ot }, t.prototype.$u = function () { if (this.Hu) { if (this.Ku.Xu().length > 0) { var t = this.hi.j().Br(), i = xi(t), n = 1.5 * _i(t) + 2 * i; this.Yu = { above: n, below: n } } else this.Yu = null; this.Hu = !1 } return this.Yu }, t.prototype.je = function () { var t = this.Ku.X(), i = this.hi.j(), n = this.Ku.Xu(); this.qu && (this.G.M = n.map(function (t) { return { V: t.time, m: 0, g: 0, Ye: 0, Ru: t.shape, et: t.color, Pu: t.Pu, Iu: t.id, Lt: void 0 } }), this.qu = !1); var e = this.hi.P().layout; this.G._ = null; var s = i._r(); if (null !== s) { var r = this.Ku.q(); if (null !== r && 0 !== this.G.M.length) { var o = NaN, h = xi(i.Br()), u = { ju: h, Uu: h }; this.G._ = $t(this.G.M, s, !0); for (var l = this.G._.from; l < this.G._.to; l++) { var a = n[l]; a.time !== o && (u.ju = h, u.Uu = h, o = a.time); var c = this.G.M[l]; c.m = i.J(a.time), void 0 !== a.text && a.text.length > 0 && (c.Lt = { Wu: a.text, g: 0, dt: 0, wt: 0 }); var f = this.Ku.Zu(a.time); null !== f && Gi(c, a, f, u, e.fontSize, h, t, i, r.Z) } this.T = !1 } } }, t }(), ki = function (t) { function i(i) { return t.call(this, i) || this } return c(i, t), i.prototype.Fu = function (t, i) { var n = this.Lu; n.tt = !1; var e = this.Ie.P(); if (e.priceLineVisible) { var s = this.Ie.Ju(0 === e.priceLineSource); s.Gu || (n.tt = !0, n.g = s.zt, n.et = this.Ie.Qu(s.et), n.dt = i, n.wt = t, n.rt = e.priceLineWidth, n.ut = e.priceLineStyle) } }, i }(mi), Vi = function (t) { function i(i) { var n = t.call(this) || this; return n.lt = i, n } return c(i, t), i.prototype.Zt = function (t, i, n) { t.tt = !1, i.tt = !1; var e = this.lt.P(), s = e.lastValueVisible, r = "" !== this.lt.ta(), o = 0 === e.seriesLastValueMode, h = this.lt.Ju(!1); if (!h.Gu) { s && (t.Lt = this.ia(h, s, o), t.tt = 0 !== t.Lt.length), (r || o) && (i.Lt = this.na(h, s, r, o), i.tt = i.Lt.length > 0); var u = this.lt.Qu(h.et), l = D(u); n.gt = l.gt, n.et = l.pt, n.zt = h.zt, i.Pt = this.lt.ct().P().layout.backgroundColor, t.Pt = u } }, i.prototype.na = function (t, i, n, e) { var s = "", r = this.lt.ta(); return n && 0 !== r.length && (s += r + " "), i && e && (s += this.lt.X().vh() ? t.ha : t.sa), s.trim() }, i.prototype.ia = function (t, i, n) { return i ? n ? this.lt.X().vh() ? t.sa : t.ha : t.Lt : "" }, i }(j), Ei = function () { function t(t, i) { this.Pn = t, this.ra = i || null } return t.prototype.xh = function () { return this.Pn }, t.prototype.us = function () { return this.ra }, t.prototype.mn = function () { return null === this.Pn ? null : { priceRange: this.Pn.mn(), margins: this.ra || void 0 } }, t.gn = function (i) { return null === i ? null : new t(it.gn(i.priceRange), i.margins) }, t }(), Ni = function (t) { function i(i, n) { var e = t.call(this, i) || this; return e.ea = n, e } return c(i, t), i.prototype.Fu = function (t, i) { var n = this.Lu; n.tt = !1; var e = this.ea.ua(); if (null !== e) { var s = this.ea.P(); n.tt = !0, n.g = e, n.et = s.color, n.dt = i, n.wt = t, n.rt = s.lineWidth, n.ut = s.lineStyle } }, i }(mi), Oi = function (t) { function i(i, n) { var e = t.call(this) || this; return e.Ku = i, e.ea = n, e } return c(i, t), i.prototype.Zt = function (t, i, n) { t.tt = !1, i.tt = !1; var e = this.ea.P(); if (e.axisLabelVisible) { var s = this.ea.ua(); if (null !== s) { t.Lt = this.Ku.X().Zh(e.price), t.tt = !0; var r = D(e.color); n.gt = r.gt, n.et = r.pt, n.zt = s } } }, i }(j), Ri = function () { function t(t, i) { this.Ku = t, this.xi = i, this.aa = new Ni(t, this), this.Su = new Oi(t, this) } return t.prototype.eh = function (t) { m(this.xi, t), this.B(), this.Ku.ct().Lr() }, t.prototype.P = function () { return this.xi }, t.prototype.oa = function () { return this.aa }, t.prototype.la = function () { return this.Su }, t.prototype.B = function () { this.aa.B(), this.Su.B() }, t.prototype.ua = function () { var t = this.Ku, i = t.X(); if (t.ct().j().Qt() || i.Qt()) return null; var n = t.q(); return null === n ? null : i.$(this.xi.price, n.Z) }, t }(), Ii = function (t) { function i(i) { var n = t.call(this) || this; return n.hi = i, n } return c(i, t), i.prototype.ct = function () { return this.hi }, i }(H), Di = { H: "", cu: "", fu: "" }, Bi = function () { function t(t) { this.Ku = t } return t.prototype.Y = function (t, i) { var n = this.Ku.fa(), e = this.Ku.P(); switch (n) { case "Line": return this.ca(e); case "Area": return this.va(e); case "Bar": return this._a(e, t, i); case "Candlestick": return this.da(e, t, i); case "Histogram": return this.wa(e, t, i) }throw new Error("Unknown chart style") }, t.prototype._a = function (t, i, n) { var e = f({}, Di), s = t.upColor, r = t.downColor, o = s, h = r, u = y(this.Ma(i, n)), l = g(u.Z[0]) <= g(u.Z[3]); return e.H = l ? s : r, e.cu = l ? o : h, e }, t.prototype.da = function (t, i, n) { var e = f({}, Di), s = t.upColor, r = t.downColor, o = t.borderUpColor, h = t.borderDownColor, u = t.wickUpColor, l = t.wickDownColor, a = y(this.Ma(i, n)), c = g(a.Z[0]) <= g(a.Z[3]); return e.H = c ? s : r, e.cu = c ? o : h, e.fu = c ? u : l, e }, t.prototype.va = function (t) { return f(f({}, Di), { H: t.lineColor }) }, t.prototype.ca = function (t) { return f(f({}, Di), { H: t.color }) }, t.prototype.wa = function (t, i, n) { var e = f({}, Di), s = y(this.Ma(i, n)); return e.H = void 0 !== s.et ? s.et : t.color, e }, t.prototype.Ma = function (t, i) { return void 0 !== i ? i.Z : this.Ku.qi().ba(t) }, t }(), Ji = function () { function t() { this.ma = [], this.ga = new Map, this.pa = new Map } return t.prototype.ya = function () { this.ma = [], this.ga.clear(), this.pa.clear() }, t.prototype.ka = function () { return this.Ye() > 0 ? this.ma[this.ma.length - 1] : null }, t.prototype.xa = function () { return this.Ye() > 0 ? this.Na(0) : null }, t.prototype.Ui = function () { return this.Ye() > 0 ? this.Na(this.ma.length - 1) : null }, t.prototype.Ye = function () { return this.ma.length }, t.prototype.Qt = function () { return 0 === this.Ye() }, t.prototype.Ls = function (t) { return null !== this.Sa(t, 0) }, t.prototype.ba = function (t) { return this.Da(t) }, t.prototype.Da = function (t, i) { void 0 === i && (i = 0); var n = this.Sa(t, i); return null === n ? null : f(f({}, this.Ca(n)), { zs: this.Na(n) }) }, t.prototype.Xe = function () { return this.ma }, t.prototype.Ta = function (t, i, n) { if (this.Qt()) return null; for (var e = null, s = 0, r = n; s < r.length; s++) { var o = r[s]; e = Xi(e, this.Aa(t, i, o)) } return e }, t.prototype.wn = function (t) { 0 !== t.length && (this.Qt() || t[t.length - 1].zs < this.ma[0].zs ? this.Ea(t) : t[0].zs > this.ma[this.ma.length - 1].zs ? this.La(t) : 1 !== t.length || t[0].zs !== this.ma[this.ma.length - 1].zs ? this.Ba(t) : this.Fa(t[0])) }, t.prototype.Na = function (t) { return this.ma[t].zs }, t.prototype.Ca = function (t) { return this.ma[t] }, t.prototype.Sa = function (t, i) { var n = this.Va(t); if (null === n && 0 !== i) switch (i) { case -1: return this.za(t); case 1: return this.Oa(t); default: throw new TypeError("Unknown search mode") }return n }, t.prototype.za = function (t) { var i = this.Pa(t); return i > 0 && (i -= 1), i !== this.ma.length && this.Na(i) < t ? i : null }, t.prototype.Oa = function (t) { var i = this.Ia(t); return i !== this.ma.length && t < this.Na(i) ? i : null }, t.prototype.Va = function (t) { var i = this.Pa(t); return i === this.ma.length || t < this.ma[i].zs ? null : i }, t.prototype.Pa = function (t) { return Ht(this.ma, t, function (t, i) { return t.zs < i }) }, t.prototype.Ia = function (t) { return qt(this.ma, t, function (t, i) { return i.zs > t }) }, t.prototype.Wa = function (t, i, n) { for (var e = null, s = t; s < i; s++) { var r = this.ma[s].Z[n]; Number.isNaN(r) || (null === e ? e = { Ra: r, ja: r } : (r < e.Ra && (e.Ra = r), r > e.ja && (e.ja = r))) } return e }, t.prototype.Ua = function (t) { var i = Math.floor(t.zs / 30); this.ga.forEach(function (t) { return t.delete(i) }) }, t.prototype.Ea = function (t) { v(0 !== t.length, "plotRows should not be empty"), this.pa.clear(), this.ga.clear(), this.ma = t.concat(this.ma) }, t.prototype.La = function (t) { v(0 !== t.length, "plotRows should not be empty"), this.pa.clear(), this.ga.clear(), this.ma = this.ma.concat(t) }, t.prototype.Fa = function (t) { v(!this.Qt(), "plot list should not be empty"), v(this.ma[this.ma.length - 1].zs === t.zs, "last row index should match new row index"), this.Ua(t), this.pa.delete(t.zs), this.ma[this.ma.length - 1] = t }, t.prototype.Ba = function (t) { v(0 !== t.length, "plot rows should not be empty"), this.pa.clear(), this.ga.clear(), this.ma = function (t, i) { for (var n = function (t, i) { for (var n = t.length, e = i.length, s = n + e, r = 0, o = 0; r < n && o < e;)t[r].zs < i[o].zs ? r++ : t[r].zs > i[o].zs ? o++ : (r++, o++, s--); return s }(t, i), e = new Array(n), s = 0, r = 0, o = t.length, h = i.length, u = 0; s < o && r < h;)t[s].zs < i[r].zs ? (e[u] = t[s], s++) : t[s].zs > i[r].zs ? (e[u] = i[r], r++) : (e[u] = i[r], s++, r++), u++; for (; s < o;)e[u] = t[s], s++, u++; for (; r < h;)e[u] = i[r], r++, u++; return e }(this.ma, t) }, t.prototype.Aa = function (t, i, n) { if (this.Qt()) return null; var e = null, s = y(this.xa()), r = y(this.Ui()), o = Math.max(t, s), h = Math.min(i, r), u = 30 * Math.ceil(o / 30), l = Math.max(u, 30 * Math.floor(h / 30)), a = this.Pa(o), c = this.Ia(Math.min(h, u, i)); e = Xi(e, this.Wa(a, c, n)); var f = this.ga.get(n); void 0 === f && (f = new Map, this.ga.set(n, f)); for (var p = Math.max(u + 1, o); p < l; p += 30) { var v = Math.floor(p / 30), d = f.get(v); if (void 0 === d) { var g = this.Pa(30 * v), m = this.Ia(30 * (v + 1) - 1); d = this.Wa(g, m, n), f.set(v, d) } e = Xi(e, d) } return a = this.Pa(l), c = this.Ia(h), Xi(e, this.Wa(a, c, n)) }, t }(); function Xi(t, i) { return null === t ? i : null === i ? t : { Ra: Math.min(t.Ra, i.Ra), ja: Math.max(t.ja, i.ja) } } var Ai = function (t) { function i(i, n, e) { var s = t.call(this, i) || this; s.G = new Ji, s.aa = new ki(s), s.qa = [], s.Ha = new bi(s), s.Ya = null, s.Ka = [], s.$a = [], s.xi = n, s.Xa = e; var r = new Vi(s); return s.bi = [r], s.Za = new yi(r, s, i), s.Ja(), s.Ga(), s } return c(i, t), i.prototype.an = function () { }, i.prototype.Qu = function (t) { return this.xi.priceLineColor || t }, i.prototype.Ju = function (t, i) { var n = { Gu: !0 }, e = this.X(); if (this.ct().j().Qt() || e.Qt() || this.G.Qt()) return n; var s, r, o = this.ct().j()._r(), h = this.q(); if (null === o || null === h) return n; if (t) { var u = this.G.ka(); if (null === u) return n; s = u, r = u.zs } else { var l = this.G.Da(o.es(), -1); if (null === l) return n; if (null === (s = this.G.ba(l.zs))) return n; r = l.zs } var a = s.Z[3], c = this.K().Y(r, { Z: s }), f = e.$(a, h.Z); return { Gu: !1, O: i ? a : void 0, Lt: e.ti(a, h.Z), ha: e.Zh(a), sa: e.Gh(a, h.Z), et: c.H, zt: f, zs: r } }, i.prototype.K = function () { return null !== this.Ya || (this.Ya = new Bi(this)), this.Ya }, i.prototype.P = function () { return this.xi }, i.prototype.eh = function (t) { var i = t.priceScaleId; void 0 !== i && i !== this.xi.priceScaleId && this.ct().Qa(this, i), m(this.xi, t), null !== this.ei && void 0 !== t.scaleMargins && this.ei.eh({ scaleMargins: t.scaleMargins }), void 0 !== t.priceFormat && this.Ja(), this.ct().io(this) }, i.prototype.no = function () { this.G.ya(), this.Ga() }, i.prototype.ho = function (t, i) { i && this.G.ya(), this.G.wn(t), this.so(), this.Ai.B("data"), this.Ni.B("data"); var n = this.ct().Cu(this); this.ct().ro(n), this.ct().io(this), this.ct().eo(), this.ct().Lr() }, i.prototype.uo = function (t) { this.Ka = t.map(function (t) { return f({}, t) }), this.so(); var i = this.ct().Cu(this); this.Ni.B("data"), this.ct().ro(i), this.ct().io(this), this.ct().eo(), this.ct().Lr() }, i.prototype.Xu = function () { return this.$a }, i.prototype.ao = function (t) { var i = new Ri(this, t); return this.qa.push(i), this.ct().io(this), i }, i.prototype.oo = function (t) { var i = this.qa.indexOf(t); -1 !== i && this.qa.splice(i, 1), this.ct().io(this) }, i.prototype.fa = function () { return this.Xa }, i.prototype.q = function () { var t = this.lo(); return null === t ? null : { Z: t.Z[3], Wh: t.V } }, i.prototype.lo = function () { var t = this.ct().j()._r(); if (null === t) return null; var i = t.rs(); return this.G.Da(i, 1) }, i.prototype.qi = function () { return this.G }, i.prototype.Zu = function (t) { var i = this.G.ba(t); return null === i ? null : "Bar" === this.Xa || "Candlestick" === this.Xa ? { open: i.Z[0], high: i.Z[1], low: i.Z[2], close: i.Z[3] } : i.Z[3] }, i.prototype.ci = function () { var t = []; this.fo() || t.push(this.Ha); for (var i = 0, n = this.qa; i < n.length; i++) { var e = n[i]; t.push(e.oa()) } return t.push(this.Ai), t.push(this.aa), t.push(this.Za), t.push(this.Ni), t }, i.prototype.fi = function (t, i) { for (var n = i === this.ei || this.fo() ? p(this.bi) : [], e = 0, s = this.qa; e < s.length; e++) { var r = s[e]; n.push(r.la()) } return n }, i.prototype.ss = function (t, i) { var n = this; if (void 0 !== this.xi.autoscaleInfoProvider) { var e = this.xi.autoscaleInfoProvider(function () { var e = n.co(t, i); return null === e ? null : e.mn() }); return Ei.gn(e) } return this.co(t, i) }, i.prototype.ns = function () { return this.xi.priceFormat.minMove }, i.prototype.$h = function () { return this.Gn }, i.prototype.Wi = function () { this.Ai.B(), this.Ni.B(); for (var t = 0, i = this.bi; t < i.length; t++)i[t].B(); for (var n = 0, e = this.qa; n < e.length; n++)e[n].B(); this.aa.B(), this.Ha.B() }, i.prototype.X = function () { return y(this.ei) }, i.prototype.U = function (t) { if ("Line" !== this.Xa && "Area" !== this.Xa || !this.xi.crosshairMarkerVisible) return null; var i = this.G.ba(t); return null === i ? null : { O: i.Z[3], k: this.vo() } }, i.prototype.ta = function () { return this.xi.title }, i.prototype.fo = function () { return !Jt(this.X().rh()) }, i.prototype.co = function (t, i) { if (!w(t) || !w(i) || this.G.Qt()) return null; var n = "Line" === this.Xa || "Area" === this.Xa || "Histogram" === this.Xa ? [3] : [2, 1], e = this.G.Ta(t, i, n), s = null !== e ? new it(e.Ra, e.ja) : null; if ("Histogram" === this.fa()) { var r = this.xi.base, o = new it(r, r); s = null !== s ? s.wn(o) : o } return new Ei(s, this.Ni.$u()) }, i.prototype.vo = function () { switch (this.Xa) { case "Line": case "Area": return this.xi.crosshairMarkerRadius }return 0 }, i.prototype.Ja = function () { switch (this.xi.priceFormat.type) { case "custom": this.Gn = { Xi: this.xi.priceFormat.formatter }; break; case "volume": this.Gn = new Ft(this.xi.priceFormat.precision); break; case "percent": this.Gn = new $(this.xi.priceFormat.precision); break; default: var t = Math.pow(10, this.xi.priceFormat.precision); this.Gn = new Y(t, this.xi.priceFormat.minMove * t, !1, void 0) }null !== this.ei && this.ei.uh() }, i.prototype.so = function () { var t = this, i = this.ct().j(); if (i.Qt() || 0 === this.G.Ye()) this.$a = []; else { var n = y(this.G.xa()); this.$a = this.Ka.map(function (e, s) { var r = y(i.vr(e.time, !0)), o = r < n ? 1 : -1; return { time: y(t.G.Da(r, o)).zs, position: e.position, shape: e.shape, color: e.color, id: e.id, Pu: s, text: e.text, size: e.size } }) } }, i.prototype.Ga = function () { switch (this.Ni = new zi(this, this.ct()), this.Xa) { case "Bar": this.Ai = new ri(this, this.ct()); break; case "Candlestick": this.Ai = new hi(this, this.ct()); break; case "Line": this.Ai = new fi(this, this.ct()); break; case "Area": this.Ai = new ni(this, this.ct()); break; case "Histogram": this.Ai = new ci(this, this.ct()); break; default: throw Error("Unknown chart style assigned: " + this.Xa) } }, i }(Ii), Wi = function () { function t(t) { this.xi = t } return t.prototype._o = function (t, i, n) { var e = t; if (0 === this.xi.mode) return e; var s = n.Di(), r = s.q(); if (null === r) return e; var o = s.$(t, r), h = n.Vh().filter(function (t) { return t instanceof Ai }).reduce(function (t, e) { if (n.Tu(e)) return t; var s = e.X(), r = e.qi(); if (s.Qt() || !r.Ls(i)) return t; var o = r.ba(i); if (null === o) return t; var h = g(e.q()); return t.concat([s.$(o.Z[3], h.Z)]) }, []); if (0 === h.length) return e; h.sort(function (t, i) { return Math.abs(t - o) - Math.abs(i - o) }); var u = h[0]; return s.Ci(u, r) }, t }(), ji = function () { function t(t, i) { this.Kn = [], this.do = new Map, this.zn = 0, this.Hs = 0, this.wo = 1e3, this.$n = null, this.Mo = new tt, this.bo = t, this.hi = i; var n = i.P(); this.mo = this.po("left", n.leftPriceScale), this.yo = this.po("right", n.rightPriceScale), this.mo.mh().tn(this.ko.bind(this, this.mo), this), this.yo.mh().tn(this.ko.bind(this, this.mo), this), this.xo(n) } return t.prototype.xo = function (t) { if (t.leftPriceScale && this.mo.eh(t.leftPriceScale), t.rightPriceScale && this.yo.eh(t.rightPriceScale), t.localization && (this.mo.uh(), this.yo.uh()), t.overlayPriceScales) for (var i = 0, n = Array.from(this.do.values()); i < n.length; i++) { var e = y(n[i][0].X()); e.eh(t.overlayPriceScales), t.localization && e.uh() } }, t.prototype.No = function (t) { switch (t) { case "left": return this.mo; case "right": return this.yo }return this.do.has(t) ? d(this.do.get(t))[0].X() : null }, t.prototype.an = function () { this.ct().So().rn(this), this.mo.mh().rn(this), this.yo.mh().rn(this), this.Kn.forEach(function (t) { t.an && t.an() }), this.Mo.en() }, t.prototype.Do = function () { return this.wo }, t.prototype.Co = function (t) { this.wo = t }, t.prototype.ct = function () { return this.hi }, t.prototype.dt = function () { return this.Hs }, t.prototype.wt = function () { return this.zn }, t.prototype.kr = function (t) { this.Hs = t, this.To() }, t.prototype.gh = function (t) { var i = this; this.zn = t, this.mo.gh(t), this.yo.gh(t), this.Kn.forEach(function (n) { if (i.Tu(n)) { var e = n.X(); null !== e && e.gh(t) } }), this.To() }, t.prototype.Vh = function () { return this.Kn }, t.prototype.Tu = function (t) { var i = t.X(); return null === i || this.mo !== i && this.yo !== i }, t.prototype.Oh = function (t, i, n) { var e = void 0 !== n ? n : this.Eo().Ao - 1; this.Lo(t, i, e) }, t.prototype.Ih = function (t) { var i = this.Kn.indexOf(t); v(-1 !== i, "removeDataSource: invalid data source"), this.Kn.splice(i, 1); var n = y(t.X()).rh(); if (this.do.has(n)) { var e = d(this.do.get(n)), s = e.indexOf(t); -1 !== s && (e.splice(s, 1), 0 === e.length && this.do.delete(n)) } var r = t.X(); r && r.Vh().indexOf(t) >= 0 && r.Ih(t), null !== r && (r.Ph(), this.Bo(r)), this.$n = null }, t.prototype.Au = function (t) { return t === this.mo ? "left" : t === this.yo ? "right" : "overlay" }, t.prototype.Fo = function () { return this.mo }, t.prototype.Vo = function () { return this.yo }, t.prototype.zo = function (t, i) { t.jh(i) }, t.prototype.Oo = function (t, i) { t.Uh(i), this.To() }, t.prototype.Po = function (t) { t.qh() }, t.prototype.Io = function (t, i) { t.Hh(i) }, t.prototype.Wo = function (t, i) { t.Yh(i), this.To() }, t.prototype.Ro = function (t) { t.Kh() }, t.prototype.To = function () { this.Kn.forEach(function (t) { t.Wi() }) }, t.prototype.Di = function () { var t = null; return this.hi.P().rightPriceScale.visible && 0 !== this.yo.Vh().length ? t = this.yo : this.hi.P().leftPriceScale.visible && 0 !== this.mo.Vh().length ? t = this.mo : 0 !== this.Kn.length && (t = this.Kn[0].X()), null === t && (t = this.yo), t }, t.prototype.Bo = function (t) { null !== t && t.fh() && this.jo(t) }, t.prototype.Uo = function (t) { var i = this.bo._r(); t.ah({ dh: !0 }), null !== i && t.ts(i), this.To() }, t.prototype.qo = function () { this.jo(this.mo), this.jo(this.yo) }, t.prototype.Ho = function () { var t = this; this.Bo(this.mo), this.Bo(this.yo), this.Kn.forEach(function (i) { t.Tu(i) && t.Bo(i.X()) }), this.To(), this.hi.Lr() }, t.prototype.zh = function () { return null === this.$n && (this.$n = gt(this.Kn)), this.$n }, t.prototype.Yo = function () { return this.Mo }, t.prototype.jo = function (t) { var i = t.Qh(); if (i && i.length > 0 && !this.bo.Qt()) { var n = this.bo._r(); null !== n && t.ts(n) } t.Wi() }, t.prototype.Eo = function () { var t = this.zh(); if (0 === t.length) return { Ao: 0, Ko: 0 }; for (var i = 0, n = 0, e = 0; e < t.length; e++) { var s = t[e].ai(); null !== s && (s < i && (i = s), s > n && (n = s)) } return { Ao: i, Ko: n } }, t.prototype.Lo = function (t, i, n) { var e = this.No(i); if (null === e && (e = this.po(i, this.hi.P().overlayPriceScales)), this.Kn.push(t), !Jt(i)) { var s = this.do.get(i) || []; s.push(t), this.do.set(i, s) } e.Oh(t), t.li(e), t.oi(n), this.Bo(e), this.$n = null }, t.prototype.ko = function (t, i, n) { i.oh !== n.oh && this.jo(t) }, t.prototype.po = function (t, i) { var n = f({ visible: !0, autoScale: !0 }, x(i)), e = new Mt(t, n, this.hi.P().layout, this.hi.P().localization); return e.gh(this.wt()), e }, t }(), Fi = function (t) { function i(i) { var n = t.call(this) || this; return n.$o = new Map, n.G = i, n } return c(i, t), i.prototype.s = function (t) { }, i.prototype.o = function (t) { if (this.G.tt) { t.save(); for (var i = 0, n = 0, e = this.G.Xo; n < e.length; n++)if (0 !== (u = e[n]).Lt.length) { t.font = u.kt; var s = this.Zo(t, u.Lt); s > this.G.dt ? u.Pr = this.G.dt / s : u.Pr = 1, i += u.Jo * u.Pr } var r = 0; switch (this.G.Go) { case "top": r = 0; break; case "center": r = Math.max((this.G.wt - i) / 2, 0); break; case "bottom": r = Math.max(this.G.wt - i, 0) }t.fillStyle = this.G.et; for (var o = 0, h = this.G.Xo; o < h.length; o++) { var u = h[o]; t.save(); var l = 0; switch (this.G.Qo) { case "left": t.textAlign = "left", l = u.Jo / 2; break; case "center": t.textAlign = "center", l = this.G.dt / 2; break; case "right": t.textAlign = "right", l = this.G.dt - 1 - u.Jo / 2 }t.translate(l, r), t.textBaseline = "top", t.font = u.kt, t.scale(u.Pr, u.Pr), t.fillText(u.Lt, 0, u.tl), t.restore(), r += u.Jo * u.Pr } t.restore() } }, i.prototype.Zo = function (t, i) { var n = this.il(t.font), e = n.get(i); return void 0 === e && (e = t.measureText(i).width, n.set(i, e)), e }, i.prototype.il = function (t) { var i = this.$o.get(t); return void 0 === i && (i = new Map, this.$o.set(t, i)), i }, i }(z), Ki = function () { function t(t) { this.T = !0, this.at = { tt: !1, et: "", wt: 0, dt: 0, Xo: [], Go: "center", Qo: "center" }, this.ot = new Fi(this.at), this.lt = t } return t.prototype.B = function () { this.T = !0 }, t.prototype.I = function (t, i) { return this.T && (this.W(t, i), this.T = !1), this.ot }, t.prototype.W = function (t, i) { var n = this.lt.P(), e = this.at; e.tt = n.visible, e.tt && (e.et = n.color, e.dt = i, e.wt = t, e.Qo = n.horzAlign, e.Go = n.vertAlign, e.Xo = [{ Lt: n.text, kt: Dt(n.fontSize, n.fontFamily, n.fontStyle), Jo: 1.2 * n.fontSize, tl: 0, Pr: 0 }]) }, t }(), Qi = function (t) { function i(i, n) { var e = t.call(this) || this; return e.xi = n, e.Ai = new Ki(e), e } return c(i, t), i.prototype.ci = function () { return [this.Ai] }, i.prototype.P = function () { return this.xi }, i.prototype.Wi = function () { this.Ai.B() }, i }(H), Zi = function () { function t(t, i) { this.nl = [], this.hl = [], this.Hs = 0, this.sl = null, this.rl = null, this.el = new tt, this.ul = new tt, this.al = t, this.xi = i, this.ol = new Bt(this), this.bo = new Nt(this, i.timeScale, this.xi.localization), this.ll = new Wt, this.L = new q(this, i.crosshair), this.fl = new Wi(i.crosshair), this.cl = new Qi(this, i.watermark), this.vl(), this.nl[0].Co(2e3) } return t.prototype._l = function () { this.dl(new jt(3)) }, t.prototype.Lr = function () { this.dl(new jt(2)) }, t.prototype.io = function (t) { var i = this.wl(t); this.dl(i) }, t.prototype.Ml = function () { return this.rl }, t.prototype.bl = function (t) { var i = this.rl; this.rl = t, null !== i && this.io(i.ml), null !== t && this.io(t.ml) }, t.prototype.P = function () { return this.xi }, t.prototype.eh = function (t) { m(this.xi, t), this.nl.forEach(function (i) { return i.xo(t) }), void 0 !== t.timeScale && this.bo.eh(t.timeScale), void 0 !== t.localization && this.bo.ur(t.localization), (t.leftPriceScale || t.rightPriceScale) && this.el.en(), this._l() }, t.prototype.gl = function (t, i) { var n = this.pl(t); null !== n && (n.X.eh(i), this.el.en()) }, t.prototype.pl = function (t) { for (var i = 0, n = this.nl; i < n.length; i++) { var e = n[i], s = e.No(t); if (null !== s) return { ft: e, X: s } } return null }, t.prototype.j = function () { return this.bo }, t.prototype.yl = function () { return this.nl }, t.prototype.kl = function () { return this.ll }, t.prototype.xl = function () { return this.cl }, t.prototype.Nl = function () { return this.L }, t.prototype.Sl = function () { return this.ul }, t.prototype.Dl = function (t, i) { t.gh(i), this.Er() }, t.prototype.kr = function (t) { this.Hs = t, this.bo.kr(this.Hs), this.nl.forEach(function (i) { return i.kr(t) }), this.Er() }, t.prototype.vl = function (t) { var i = new ji(this.bo, this); void 0 !== t ? this.nl.splice(t, 0, i) : this.nl.push(i); var n = void 0 === t ? this.nl.length - 1 : t, e = new jt(3); return e.ye(n, { ke: 0, dh: !0 }), this.Me(e), i }, t.prototype.zo = function (t, i, n) { t.zo(i, n) }, t.prototype.Oo = function (t, i, n) { t.Oo(i, n), this.eo(), this.dl(this.Cl(t, 2)) }, t.prototype.Po = function (t, i) { t.Po(i), this.dl(this.Cl(t, 2)) }, t.prototype.Io = function (t, i, n) { i.fh() || t.Io(i, n) }, t.prototype.Wo = function (t, i, n) { i.fh() || (t.Wo(i, n), this.eo(), this.dl(this.Cl(t, 2))) }, t.prototype.Ro = function (t, i) { i.fh() || (t.Ro(i), this.dl(this.Cl(t, 2))) }, t.prototype.Uo = function (t, i) { t.Uo(i), this.dl(this.Cl(t, 2)) }, t.prototype.Tl = function (t) { this.bo.jh(t) }, t.prototype.Al = function (t, i) { var n = this.j(); if (!n.Qt() && 0 !== i) { var e = n.dt(); t = Math.max(1, Math.min(t, e)), n.Pr(t, i), this.Er() } }, t.prototype.El = function (t) { this.Ll(0), this.Bl(t), this.Fl() }, t.prototype.Vl = function (t) { this.bo.Uh(t), this.Er() }, t.prototype.zl = function () { this.bo.qh(), this.Lr() }, t.prototype.Ll = function (t) { this.sl = t, this.bo.Hh(t) }, t.prototype.Bl = function (t) { var i = !1; return null !== this.sl && Math.abs(t - this.sl) > 20 && (this.sl = null, i = !0), this.bo.Yh(t), this.Er(), i }, t.prototype.Fl = function () { this.bo.Kh(), this.Lr(), this.sl = null }, t.prototype.Ol = function () { this.bo.zr(), this.Er() }, t.prototype.Me = function (t) { this.al && this.al(t), this.ll.Me(), this.Lr() }, t.prototype.F = function () { return this.hl }, t.prototype.Pl = function (t, i, n) { this.L.Ei(t, i); var e = NaN, s = this.bo.Tr(t), r = this.bo._r(); null !== r && (s = Math.min(Math.max(r.rs(), s), r.es())); var o = n.Di(), h = o.q(); null !== h && (e = o.Ci(i, h)), e = this.fl._o(e, s, n), this.L.Vi(s, e, n), this.Il(), this.ul.en(this.L.R(), { x: t, y: i }) }, t.prototype.Wl = function () { this.Nl().Oi(), this.Il(), this.ul.en(null, null) }, t.prototype.eo = function () { var t = this.L.ft(); if (null !== t) { var i = this.L.Bi(), n = this.L.Fi(); this.Pl(i, n, t) } }, t.prototype.Rl = function (t, i) { void 0 !== i && this.bo.B(i); var n = this.bo.Dr(), e = this.bo._r(); if (null !== e) { var s = e.Ls(n); if (t > n && !s) { var r = t - n; this.bo.cr(this.bo.Fr() - r) } } this.bo.Or(t) }, t.prototype.ro = function (t) { null !== t && t.Ho() }, t.prototype.Cu = function (t) { var i = this.nl.find(function (i) { return i.zh().includes(t) }); return void 0 === i ? null : i }, t.prototype.Er = function () { this.cl.Wi(), this.nl.forEach(function (t) { return t.Ho() }), this.eo() }, t.prototype.an = function () { this.nl.forEach(function (t) { return t.an() }), this.nl.length = 0, this.xi.localization.priceFormatter = void 0, this.xi.localization.timeFormatter = void 0 }, t.prototype.jl = function () { return this.ol }, t.prototype.Eu = function () { return this.ol.P() }, t.prototype.So = function () { return this.el }, t.prototype.Ul = function (t, i) { var n = this.nl[0], e = this.ql(i, t, n); return this.hl.push(e), 1 === this.hl.length ? this._l() : this.Lr(), e }, t.prototype.Hl = function (t) { var i = this.Cu(t), n = this.hl.indexOf(t); v(-1 !== n, "Series not found"), this.hl.splice(n, 1), y(i).Ih(t), t.an && t.an() }, t.prototype.Qa = function (t, i) { var n = y(this.Cu(t)); n.Ih(t); var e = this.pl(i); if (null === e) { var s = t.ai(); n.Oh(t, i, s) } else s = e.ft === n ? t.ai() : void 0, e.ft.Oh(t, i, s) }, t.prototype.Kr = function () { var t = new jt(2); t.Se(), this.dl(t) }, t.prototype.Yl = function (t) { var i = new jt(2); i.$r(t), this.dl(i) }, t.prototype.Kl = function () { return this.xi.rightPriceScale.visible ? "right" : "left" }, t.prototype.Cl = function (t, i) { var n = new jt(i); if (null !== t) { var e = this.nl.indexOf(t); n.ye(e, { ke: i }) } return n }, t.prototype.wl = function (t, i) { return void 0 === i && (i = 2), this.Cl(this.Cu(t), i) }, t.prototype.dl = function (t) { this.al && this.al(t), this.ll.Me() }, t.prototype.Il = function () { this.dl(new jt(1)) }, t.prototype.ql = function (t, i, n) { var e = new Ai(this, t, i), s = void 0 !== t.priceScaleId ? t.priceScaleId : this.Kl(); return n.Oh(e, s), Jt(s) || e.eh(t), e }, t }(), Hi = function () { function t(t, i) { this.ht = t, this.st = i } return t.prototype.fn = function (t) { return this.ht === t.ht && this.st === t.st }, t }(); function qi(t) { return t.ownerDocument && t.ownerDocument.defaultView && t.ownerDocument.defaultView.devicePixelRatio || 1 } function Ui(t) { var i = y(t.getContext("2d")); return i.setTransform(1, 0, 0, 1, 0, 0), i } function Yi(t) { var i = t.createElement("canvas"); return function (t) { t.style.userSelect = "none", t.style.webkitUserSelect = "none", t.style.msUserSelect = "none", t.style.MozUserSelect = "none", t.style.webkitTapHighlightColor = "transparent" }(i), i } function $i(t, i) { var n = Yi(t), e = qi(n); return n.style.width = i.ht + "px", n.style.height = i.st + "px", n.width = i.ht * e, n.height = i.st * e, n } function tn(t, i) { var n = Yi(y(t.ownerDocument)); t.appendChild(n); var s, r = (void 0 === s && (s = e), new h(n, s)); return r.resizeCanvas({ width: i.ht, height: i.st }), r } var nn = "undefined" != typeof window, en = function () { if (!nn) return !1; var t = !!navigator.maxTouchPoints || !!navigator.msMaxTouchPoints || !!nn && ("ontouchstart" in window || Boolean(window.DocumentTouch && document instanceof window.DocumentTouch)); return "onorientationchange" in window && t }(), sn = function () { if (!nn) return !1; var t = /Android/i.test(navigator.userAgent), i = /iPhone|iPad|iPod|AppleWebKit.+Mobile/i.test(navigator.userAgent); return t || i }(), rn = function () { function t(t, i, n) { this.$l = 0, this.Xl = null, this.Zl = null, this.Jl = !1, this.Gl = null, this.Ql = !1, this.tf = !1, this.if = null, this.nf = null, this.hf = null, this.sf = null, this.rf = 0, this.ef = !1, this.uf = !1, this.af = !1, this.lf = t, this.ff = i, this.xi = n, this.cf() } return t.prototype.an = function () { null !== this.if && (this.if(), this.if = null), null !== this.nf && (this.nf(), this.nf = null), null !== this.hf && (this.hf(), this.hf = null), this.vf(), this._f() }, t.prototype.df = function (t) { var i = this; this.nf && this.nf(); var n = this.wf.bind(this); this.nf = function () { i.lf.removeEventListener("mousemove", n) }, this.lf.addEventListener("mousemove", n), un(t) && this.wf(t); var e = this.Mf(t); this.bf(e, this.ff.mf) }, t.prototype._f = function () { null !== this.Xl && clearTimeout(this.Xl), this.$l = 0, this.Xl = null }, t.prototype.wf = function (t) { if (!this.af || un(t)) { var i = this.Mf(t); this.bf(i, this.ff.gf) } }, t.prototype.pf = function (t) { if (!("button" in t && 0 !== t.button || null !== this.sf)) { var i = un(t); if (!this.uf || !i) { this.ef = !0; var n = this.Mf(t), e = g(this.Gl), s = Math.abs(e.m - n.yf), r = Math.abs(e.g - n.kf), o = s + r > 5; if (o || !i) { if (o && !this.Ql && i) { var h = .5 * s, u = r >= h && !this.xi.xf, l = h > r && !this.xi.Nf; u || l || (this.uf = !0) } o && (this.Ql = !0, this.tf = !0, i && this.vf()), this.uf || (this.bf(n, this.ff.Sf), i && ln(t)) } } } }, t.prototype.Df = function (t) { if (!("button" in t) || 0 === t.button) { var i = this.Mf(t); this.vf(), this.Gl = null, this.af = !1, this.hf && (this.hf(), this.hf = null), un(t) && this.Cf(t), this.bf(i, this.ff.Tf), ++this.$l, this.Xl && this.$l > 1 ? (this.bf(i, this.ff.Af), this._f()) : this.tf || this.bf(i, this.ff.Ef), un(t) && (ln(t), this.Cf(t), 0 === t.touches.length && (this.Jl = !1)) } }, t.prototype.vf = function () { null !== this.Zl && (clearTimeout(this.Zl), this.Zl = null) }, t.prototype.Lf = function (t) { if (!("button" in t) || 0 === t.button) { var i = this.Mf(t); this.tf = !1, this.Ql = !1, this.uf = !1, un(t) && this.df(t), this.Gl = { m: i.yf, g: i.kf }, this.hf && (this.hf(), this.hf = null); var n = this.pf.bind(this), e = this.Df.bind(this), s = this.lf.ownerDocument.documentElement; this.hf = function () { s.removeEventListener("touchmove", n), s.removeEventListener("touchend", e), s.removeEventListener("mousemove", n), s.removeEventListener("mouseup", e) }, s.addEventListener("touchmove", n, { passive: !1 }), s.addEventListener("touchend", e, { passive: !1 }), this.vf(), un(t) && 1 === t.touches.length ? this.Zl = setTimeout(this.Bf.bind(this, t), 240) : (s.addEventListener("mousemove", n), s.addEventListener("mouseup", e)), this.af = !0, this.bf(i, this.ff.Ff), this.Xl || (this.$l = 0, this.Xl = setTimeout(this._f.bind(this), 500)) } }, t.prototype.cf = function () { var t = this; this.lf.addEventListener("mouseenter", this.df.bind(this)), this.lf.addEventListener("touchcancel", this.vf.bind(this)); var i = this.lf.ownerDocument, n = function (i) { t.ff.Vf && (i.composed && t.lf.contains(i.composedPath()[0]) || i.target && t.lf.contains(i.target) || t.ff.Vf()) }; this.if = function () { i.removeEventListener("mousedown", n), i.removeEventListener("touchstart", n) }, i.addEventListener("mousedown", n), i.addEventListener("touchstart", n, { passive: !0 }), this.lf.addEventListener("mouseleave", this.Cf.bind(this)), this.lf.addEventListener("touchstart", this.Lf.bind(this), { passive: !0 }), en || this.lf.addEventListener("mousedown", this.Lf.bind(this)), this.zf(), this.lf.addEventListener("touchmove", function () { }, { passive: !1 }) }, t.prototype.zf = function () { var t = this; void 0 === this.ff.Of && void 0 === this.ff.Pf && void 0 === this.ff.If || (this.lf.addEventListener("touchstart", function (i) { return t.Wf(i.touches) }, { passive: !0 }), this.lf.addEventListener("touchmove", function (i) { if (2 === i.touches.length && null !== t.sf && void 0 !== t.ff.Pf) { var n = hn(i.touches[0], i.touches[1]) / t.rf; t.ff.Pf(t.sf, n), ln(i) } }, { passive: !1 }), this.lf.addEventListener("touchend", function (i) { t.Wf(i.touches) })) }, t.prototype.Wf = function (t) { 1 === t.length && (this.ef = !1), 2 !== t.length || this.ef || this.Jl ? this.Rf() : this.jf(t) }, t.prototype.jf = function (t) { var i = on(this.lf); this.sf = { m: (t[0].clientX - i.left + (t[1].clientX - i.left)) / 2, g: (t[0].clientY - i.top + (t[1].clientY - i.top)) / 2 }, this.rf = hn(t[0], t[1]), void 0 !== this.ff.Of && this.ff.Of(), this.vf() }, t.prototype.Rf = function () { null !== this.sf && (this.sf = null, void 0 !== this.ff.If && this.ff.If()) }, t.prototype.Cf = function (t) { this.nf && this.nf(); var i = this.Mf(t); this.bf(i, this.ff.Uf) }, t.prototype.Bf = function (t) { var i = this.Mf(t); this.bf(i, this.ff.qf), this.tf = !0, this.Jl = !0 }, t.prototype.bf = function (t, i) { i && i.call(this.ff, t) }, t.prototype.Mf = function (t) { var i; i = "touches" in t && t.touches.length ? t.touches[0] : "changedTouches" in t && t.changedTouches.length ? t.changedTouches[0] : t; var n = on(this.lf); return { Hf: i.clientX, Yf: i.clientY, yf: i.pageX, kf: i.pageY, Kf: i.screenX, $f: i.screenY, Xf: i.clientX - n.left, Zf: i.clientY - n.top, Jf: t.ctrlKey, Gf: t.altKey, Qf: t.shiftKey, tc: t.metaKey, ic: t.type.startsWith("mouse") ? "mouse" : "touch", nc: t.view } }, t }(); function on(t) { return t.getBoundingClientRect() || { left: 0, top: 0 } } function hn(t, i) { var n = t.clientX - i.clientX, e = t.clientY - i.clientY; return Math.sqrt(n * n + e * e) } function un(t) { return Boolean(t.touches) } function ln(t) { t.cancelable && t.preventDefault() } var an = function () { function t(t, i, n, e) { this.xu = new vi(200), this.se = 0, this.hc = "", this.Vu = "", this.gu = [], this.sc = new Map, this.se = t, this.hc = i, this.Vu = Dt(t, n, e) } return t.prototype.an = function () { delete this.xu, this.gu = [], this.sc.clear() }, t.prototype.rc = function (t, i, n, e, s) { var r = this.ec(t, i); if ("left" !== s) { var o = qi(t.canvas); n -= Math.floor(r.uc * o) } e -= Math.floor(r.wt / 2), t.drawImage(r.ac, n, e, r.dt, r.wt) }, t.prototype.ec = function (t, i) { var n, e = this; if (this.sc.has(i)) n = d(this.sc.get(i)); else { if (this.gu.length >= 200) { var s = d(this.gu.shift()); this.sc.delete(s) } var r = qi(t.canvas), o = Math.ceil(this.se / 4.5), h = Math.round(this.se / 10), u = Math.ceil(this.xu.Bt(t, i)), l = rt(Math.round(u + 2 * o)), a = rt(this.se + 2 * o), c = $i(document, new Hi(l, a)); n = { Lt: i, uc: Math.round(Math.max(1, u)), dt: Math.ceil(l * r), wt: Math.ceil(a * r), ac: c }, 0 !== u && (this.gu.push(n.Lt), this.sc.set(n.Lt, n)), J(t = Ui(n.ac), r, function () { t.font = e.Vu, t.fillStyle = e.hc, t.fillText(i, 0, a - o - h) }) } return n }, t }(), cn = function () { function t(t, i, n, e) { var s = this; this.Jt = null, this.oc = null, this.lc = null, this.fc = !1, this.cc = new vi(50), this.vc = new an(11, "#000"), this.hc = null, this.Vu = null, this._c = 0, this.dc = function () { s.wc(s.ol.P()), s._i.Mc().ct().Lr() }, this.bc = function () { s._i.Mc().ct().Lr() }, this._i = t, this.xi = i, this.ol = n, this.mc = "left" === e, this.gc = document.createElement("div"), this.gc.style.height = "100%", this.gc.style.overflow = "hidden", this.gc.style.width = "25px", this.gc.style.left = "0", this.gc.style.position = "relative", this.pc = tn(this.gc, new Hi(16, 16)), this.pc.subscribeCanvasConfigured(this.dc); var r = this.pc.canvas; r.style.position = "absolute", r.style.zIndex = "1", r.style.left = "0", r.style.top = "0", this.yc = tn(this.gc, new Hi(16, 16)), this.yc.subscribeCanvasConfigured(this.bc); var o = this.yc.canvas; o.style.position = "absolute", o.style.zIndex = "2", o.style.left = "0", o.style.top = "0"; var h = { Ff: this.kc.bind(this), Sf: this.xc.bind(this), Vf: this.Nc.bind(this), Tf: this.Sc.bind(this), Af: this.Dc.bind(this), mf: this.Cc.bind(this), Uf: this.Tc.bind(this) }; this.Ac = new rn(this.yc.canvas, h, { xf: !1, Nf: !0 }) } return t.prototype.an = function () { this.Ac.an(), this.yc.unsubscribeCanvasConfigured(this.bc), this.yc.destroy(), this.pc.unsubscribeCanvasConfigured(this.dc), this.pc.destroy(), null !== this.Jt && this.Jt.Rh().rn(this), this.Jt = null, null !== this.lc && (clearTimeout(this.lc), this.lc = null), this.vc.an() }, t.prototype.Ec = function () { return this.gc }, t.prototype.Lc = function () { return this.xi.backgroundColor }, t.prototype.N = function () { return y(this.Jt).P().borderColor }, t.prototype.Bc = function () { return this.xi.textColor }, t.prototype.Vt = function () { return this.xi.fontSize }, t.prototype.Fc = function () { return Dt(this.Vt(), this.xi.fontFamily) }, t.prototype.Vc = function () { var t = this.ol.P(), i = this.hc !== t.et, n = this.Vu !== t.kt; return (i || n) && (this.wc(t), this.hc = t.et), n && (this.cc.pu(), this.Vu = t.kt), t }, t.prototype.zc = function () { if (null === this.Jt) return 0; var t = 34, i = this.Vc(), n = Ui(this.pc.canvas), e = this.Jt.Vn(); n.font = this.Fc(), e.length > 0 && (t = Math.max(this.cc.Bt(n, e[0].Ln), this.cc.Bt(n, e[e.length - 1].Ln))); for (var s = this.Oc(), r = s.length; r--;) { var o = this.cc.Bt(n, s[r].Lt()); o > t && (t = o) } var h = Math.ceil(i.Dt + i.St + i.At + i.Et + t); return h + h % 2 }, t.prototype.Pc = function (t) { if (t.ht < 0 || t.st < 0) throw new Error("Try to set invalid size to PriceAxisWidget " + JSON.stringify(t)); null !== this.oc && this.oc.fn(t) || (this.oc = t, this.pc.resizeCanvas({ width: t.ht, height: t.st }), this.yc.resizeCanvas({ width: t.ht, height: t.st }), this.gc.style.width = t.ht + "px", this.gc.style.height = t.st + "px", this.gc.style.minWidth = t.ht + "px") }, t.prototype.Ic = function () { return y(this.oc).ht }, t.prototype.li = function (t) { this.Jt !== t && (null !== this.Jt && this.Jt.Rh().rn(this), this.Jt = t, t.Rh().tn(this.Hn.bind(this), this)) }, t.prototype.X = function () { return this.Jt }, t.prototype.pu = function () { var t = this._i.Wc(); this._i.Mc().ct().Uo(t, y(this.X())) }, t.prototype.Rc = function (t) { if (null !== this.oc) { if (1 !== t) { var i = Ui(this.pc.canvas); this.jc(), this.Uc(i, this.pc.pixelRatio), this.uu(i, this.pc.pixelRatio), this.qc(i, this.pc.pixelRatio), this.Hc(i, this.pc.pixelRatio) } var n = Ui(this.yc.canvas), e = this.oc.ht, s = this.oc.st; J(n, this.yc.pixelRatio, function () { n.clearRect(0, 0, e, s) }), this.Yc(n, this.yc.pixelRatio) } }, t.prototype.Kc = function () { return this.pc.canvas }, t.prototype.kc = function (t) { if (null !== this.Jt && !this.Jt.Qt() && this._i.Mc().P().Xc.$c.price) { var i = this._i.Mc().ct(), n = this._i.Wc(); this.fc = !0, i.zo(n, this.Jt, t.Zf) } }, t.prototype.xc = function (t) { if (null !== this.Jt && this._i.Mc().P().Xc.$c.price) { var i = this._i.Mc().ct(), n = this._i.Wc(), e = this.Jt; i.Oo(n, e, t.Zf) } }, t.prototype.Nc = function () { if (null !== this.Jt && this._i.Mc().P().Xc.$c.price) { var t = this._i.Mc().ct(), i = this._i.Wc(), n = this.Jt; this.fc && (this.fc = !1, t.Po(i, n)) } }, t.prototype.Sc = function (t) { if (null !== this.Jt && this._i.Mc().P().Xc.$c.price) { var i = this._i.Mc().ct(), n = this._i.Wc(); this.fc = !1, i.Po(n, this.Jt) } }, t.prototype.Dc = function (t) { this._i.Mc().P().Xc.axisDoubleClickReset && this.pu() }, t.prototype.Cc = function (t) { null !== this.Jt && (!this._i.Mc().ct().P().Xc.$c.price || this.Jt.vh() || this.Jt._h() || this.Zc(1)) }, t.prototype.Tc = function (t) { this.Zc(0) }, t.prototype.Oc = function () { var t = this, i = [], n = null === this.Jt ? void 0 : this.Jt; return function (e) { for (var s = 0; s < e.length; ++s)for (var r = e[s].fi(t._i.Wc(), n), o = 0; o < r.length; o++)i.push(r[o]) }(this._i.Wc().zh()), i }, t.prototype.Uc = function (t, i) { var n = this; if (null !== this.oc) { var e = this.oc.ht, s = this.oc.st; J(t, i, function () { X(t, 0, 0, e, s, n.Lc()) }) } }, t.prototype.uu = function (t, i) { if (null !== this.oc && null !== this.Jt && this.Jt.P().borderVisible) { t.save(), t.fillStyle = this.N(); var n, e = Math.max(1, Math.floor(this.Vc().Dt * i)); n = this.mc ? Math.floor(this.oc.ht * i) - e : 0, t.fillRect(n, 0, e, Math.ceil(this.oc.st * i)), t.restore() } }, t.prototype.qc = function (t, i) { if (null !== this.oc && null !== this.Jt) { var n = this.Jt.Vn(); t.save(), t.strokeStyle = this.N(), t.font = this.Fc(), t.fillStyle = this.N(); var e = this.Vc(), s = this.Jt.P().borderVisible && this.Jt.P().drawTicks, r = this.mc ? Math.floor((this.oc.ht - e.St) * i - e.Dt * i) : Math.floor(e.Dt * i), o = this.mc ? Math.round(r - e.At * i) : Math.round(r + e.St * i + e.At * i), h = this.mc ? "right" : "left", u = Math.max(1, Math.floor(i)), l = Math.floor(.5 * i); if (s) { var a = Math.round(e.St * i); t.beginPath(); for (var c = 0, f = n; c < f.length; c++) { var p = f[c]; t.rect(r, Math.round(p.En * i) - l, a, u) } t.fill() } t.fillStyle = this.Bc(); for (var v = 0, d = n; v < d.length; v++)p = d[v], this.vc.rc(t, p.Ln, o, Math.round(p.En * i), h); t.restore() } }, t.prototype.jc = function () { if (null !== this.oc && null !== this.Jt) { var t = this.oc.st / 2, i = [], n = this.Jt.zh().slice(), e = this._i.Wc(), s = this.Vc(); this.Jt === e.Di() && this._i.Wc().zh().forEach(function (t) { e.Tu(t) && n.push(t) }); var r = this.Jt.Vh()[0], o = this.Jt; n.forEach(function (n) { var s = n.fi(e, o); s.forEach(function (t) { t.Yt(null), t.Kt() && i.push(t) }), r === n && s.length > 0 && (t = s[0].zt()) }); var h = i.filter(function (i) { return i.zt() <= t }), u = i.filter(function (i) { return i.zt() > t }); if (h.sort(function (t, i) { return i.zt() - t.zt() }), h.length && u.length && u.push(h[0]), u.sort(function (t, i) { return t.zt() - i.zt() }), i.forEach(function (t) { return t.Yt(t.zt()) }), this.Jt.P().alignLabels) { for (var l = 1; l < h.length; l++) { var a = h[l], c = (p = h[l - 1]).wt(s, !1); a.zt() > (v = p.Ht()) - c && a.Yt(v - c) } for (var f = 1; f < u.length; f++) { var p, v; a = u[f], c = (p = u[f - 1]).wt(s, !0), a.zt() < (v = p.Ht()) + c && a.Yt(v + c) } } } }, t.prototype.Hc = function (t, i) { var n = this; if (null !== this.oc) { t.save(); var e = this.oc, s = this.Oc(), r = this.Vc(), o = this.mc ? "right" : "left"; s.forEach(function (s) { if (s.$t()) { var h = s.I(y(n.Jt)); t.save(), h.h(t, r, n.cc, e.ht, o, i), t.restore() } }), t.restore() } }, t.prototype.Yc = function (t, i) { var n = this; if (null !== this.oc && null !== this.Jt) { t.save(); var e = this.oc, s = this._i.Mc().ct(), r = [], o = this._i.Wc(), h = s.Nl().fi(o, this.Jt); h.length && r.push(h); var u = this.Vc(), l = this.mc ? "right" : "left"; r.forEach(function (s) { s.forEach(function (s) { t.save(), s.I(y(n.Jt)).h(t, u, n.cc, e.ht, l, i), t.restore() }) }), t.restore() } }, t.prototype.Zc = function (t) { this.gc.style.cursor = 1 === t ? "ns-resize" : "default" }, t.prototype.Hn = function () { var t = this, i = this.zc(); if (this._c < i) { var n = this._i.Mc(); null === this.lc && (this.lc = setTimeout(function () { n && n.ct()._l(), t.lc = null }, 100)) } this._c = i }, t.prototype.wc = function (t) { this.vc.an(), this.vc = new an(t.Vt, t.et, t.he) }, t }(), fn = sn, pn = function () { function t(t, i) { var n = this; this.oc = new Hi(0, 0), this.Jc = null, this.Gc = null, this.Qc = null, this.tv = !1, this.iv = new tt, this.nv = 0, this.hv = !1, this.sv = null, this.rv = !1, this.ev = null, this.dc = function () { return n.uv && n.hi().Lr() }, this.bc = function () { return n.uv && n.hi().Lr() }, this.av = t, this.uv = i, this.uv.Yo().tn(this.ov.bind(this), this, !0), this.lv = document.createElement("td"), this.lv.style.padding = "0", this.lv.style.position = "relative"; var e = document.createElement("div"); e.style.width = "100%", e.style.height = "100%", e.style.position = "relative", e.style.overflow = "hidden", this.fv = document.createElement("td"), this.fv.style.padding = "0", this.cv = document.createElement("td"), this.cv.style.padding = "0", this.lv.appendChild(e), this.pc = tn(e, new Hi(16, 16)), this.pc.subscribeCanvasConfigured(this.dc); var s = this.pc.canvas; s.style.position = "absolute", s.style.zIndex = "1", s.style.left = "0", s.style.top = "0", this.yc = tn(e, new Hi(16, 16)), this.yc.subscribeCanvasConfigured(this.bc); var r = this.yc.canvas; r.style.position = "absolute", r.style.zIndex = "2", r.style.left = "0", r.style.top = "0", this.vv = document.createElement("tr"), this.vv.appendChild(this.fv), this.vv.appendChild(this.lv), this.vv.appendChild(this.cv), this._v(); var o = this.Mc().P().dv; this.Ac = new rn(this.yc.canvas, this, { xf: !o.vertTouchDrag, Nf: !o.horzTouchDrag }) } return t.prototype.an = function () { null !== this.Jc && this.Jc.an(), null !== this.Gc && this.Gc.an(), this.yc.unsubscribeCanvasConfigured(this.bc), this.yc.destroy(), this.pc.unsubscribeCanvasConfigured(this.dc), this.pc.destroy(), null !== this.uv && this.uv.Yo().rn(this), this.Ac.an() }, t.prototype.Wc = function () { return y(this.uv) }, t.prototype.wv = function (i) { null !== this.uv && this.uv.Yo().rn(this), this.uv = i, null !== this.uv && this.uv.Yo().tn(t.prototype.ov.bind(this), this, !0), this._v() }, t.prototype.Mc = function () { return this.av }, t.prototype.Ec = function () { return this.vv }, t.prototype._v = function () { if (null !== this.uv && (this.Mv(), 0 !== this.hi().F().length)) { if (null !== this.Jc) { var t = this.uv.Fo(); this.Jc.li(y(t)) } if (null !== this.Gc) { var i = this.uv.Vo(); this.Gc.li(y(i)) } } }, t.prototype.Do = function () { return null !== this.uv ? this.uv.Do() : 0 }, t.prototype.Co = function (t) { this.uv && this.uv.Co(t) }, t.prototype.mf = function (t) { if (this.uv) { var i = t.Xf, n = t.Zf; en || this.bv(i, n) } }, t.prototype.Ff = function (t) { if (this.hv = !1, this.rv = null !== this.sv, this.uv) { if (document.activeElement !== document.body && document.activeElement !== document.documentElement) y(document.activeElement).blur(); else { var i = document.getSelection(); null !== i && i.removeAllRanges() } var n = this.hi(); if (!this.uv.Di().Qt() && !n.j().Qt()) { if (null !== this.sv) { var e = n.Nl(); this.ev = { x: e.Mt(), y: e.bt() }, this.sv = { x: t.Xf, y: t.Zf } } en || this.bv(t.Xf, t.Zf) } } }, t.prototype.gf = function (t) { if (this.uv) { var i = t.Xf, n = t.Zf; if (this.mv() && this.gv(), !en) { this.bv(i, n); var e = this.zu(i, n); this.hi().bl(e && { ml: e.ml, pv: e.pv }), null !== e && void 0 !== e.nc.yv && e.nc.yv(i, n) } } }, t.prototype.Ef = function (t) { if (null !== this.uv) { var i = t.Xf, n = t.Zf, e = this.zu(i, n); if (null !== e && void 0 !== e.nc.kv && e.nc.kv(i, n), this.iv.un()) { var s = this.hi().Nl().R(); this.iv.en(s, { x: i, y: n }) } this.xv() } }, t.prototype.Sf = function (t) { if (null !== this.uv) { var i = this.hi(), n = t.Xf, e = t.Zf; if (null !== this.sv) { this.rv = !1; var s = y(this.ev), r = s.x + (n - this.sv.x), o = s.y + (e - this.sv.y); this.bv(r, o) } else this.mv() || this.bv(n, e); if (!i.j().Qt()) { var h = this.av.P().dv; if (h.pressedMouseMove && "touch" !== t.ic || (h.horzTouchDrag || h.vertTouchDrag) && "mouse" !== t.ic) { var u = this.uv.Di(); null !== this.Qc || this.Nv() || (this.Qc = { x: t.Hf, y: t.Yf }), null === this.Qc || this.Qc.x === t.Hf && this.Qc.y === t.Yf || this.tv || (u.Qt() || i.Io(this.uv, u, t.Zf), i.Ll(t.Xf), this.tv = !0), this.tv && (u.Qt() || i.Wo(this.uv, u, t.Zf), i.Bl(t.Xf)) } } } }, t.prototype.Tf = function (t) { if (null !== this.uv) { this.hv = !1; var i = this.hi(); if (this.tv) { var n = this.uv.Di(); i.Ro(this.uv, n), i.Fl(), this.Qc = null, this.tv = !1 } } }, t.prototype.qf = function (t) { if (this.hv = !0, null === this.sv && fn) { var i = { x: t.Xf, y: t.Zf }; this.Sv(i, i) } }, t.prototype.Uf = function (t) { null !== this.uv && (this.uv.ct().bl(null), sn || this.gv()) }, t.prototype.Dv = function () { return this.iv }, t.prototype.Of = function () { this.nv = 1 }, t.prototype.Pf = function (t, i) { if (this.av.P().Xc.pinch) { var n = 5 * (i - this.nv); this.nv = i, this.hi().Al(t.m, n) } }, t.prototype.zu = function (t, i) { var n = this.uv; if (null === n) return null; for (var e = 0, s = n.zh(); e < s.length; e++) { var r = s[e], o = this.Cv(r.ci(n), t, i); if (null !== o) return { ml: r, nc: o.nc, pv: o.pv } } return null }, t.prototype.Tv = function (t, i) { y("left" === i ? this.Jc : this.Gc).Pc(new Hi(t, this.oc.st)) }, t.prototype.Av = function () { return this.oc }, t.prototype.Pc = function (t) { if (t.ht < 0 || t.st < 0) throw new Error("Try to set invalid size to PaneWidget " + JSON.stringify(t)); this.oc.fn(t) || (this.oc = t, this.pc.resizeCanvas({ width: t.ht, height: t.st }), this.yc.resizeCanvas({ width: t.ht, height: t.st }), this.lv.style.width = t.ht + "px", this.lv.style.height = t.st + "px") }, t.prototype.Ev = function () { var t = y(this.uv); t.Bo(t.Fo()), t.Bo(t.Vo()); for (var i = 0, n = t.Vh(); i < n.length; i++) { var e = n[i]; if (t.Tu(e)) { var s = e.X(); null !== s && t.Bo(s), e.Wi() } } }, t.prototype.Kc = function () { return this.pc.canvas }, t.prototype.Rc = function (t) { if (0 !== t && null !== this.uv) { if (t > 1 && this.Ev(), null !== this.Jc && this.Jc.Rc(t), null !== this.Gc && this.Gc.Rc(t), 1 !== t) { var i = Ui(this.pc.canvas); i.save(), this.Uc(i, this.Lv(), this.pc.pixelRatio), this.uv && (this.Bv(i, this.pc.pixelRatio), this.Fv(i, this.pc.pixelRatio), this.Vv(i, this.pc.pixelRatio)), i.restore() } var n = Ui(this.yc.canvas); n.clearRect(0, 0, Math.ceil(this.oc.ht * this.yc.pixelRatio), Math.ceil(this.oc.st * this.yc.pixelRatio)), this.zv(n, this.yc.pixelRatio) } }, t.prototype.Ov = function () { return this.Jc }, t.prototype.Pv = function () { return this.Gc }, t.prototype.Lv = function () { return this.av.P().layout.backgroundColor }, t.prototype.ov = function () { null !== this.uv && this.uv.Yo().rn(this), this.uv = null }, t.prototype.Uc = function (t, i, n) { var e = this; J(t, n, function () { X(t, 0, 0, e.oc.ht, e.oc.st, i) }) }, t.prototype.Bv = function (t, i) { for (var n = y(this.uv), e = this.hi().kl().ci(n), s = n.wt(), r = n.dt(), o = 0, h = e; o < h.length; o++) { var u = h[o]; t.save(); var l = u.I(s, r); null !== l && l.h(t, i, !1), t.restore() } }, t.prototype.Fv = function (t, i) { var n = this.hi().xl(); this.Iv(n, t, i), this.Wv(n, t, i) }, t.prototype.zv = function (t, i) { this.Wv(this.hi().Nl(), t, i) }, t.prototype.Vv = function (t, i) { for (var n = y(this.uv).zh(), e = 0, s = n; e < s.length; e++) { var r = s[e]; this.Iv(r, t, i) } for (var o = 0, h = n; o < h.length; o++)r = h[o], this.Wv(r, t, i) }, t.prototype.Wv = function (t, i, n) { for (var e = y(this.uv), s = t.ci(e), r = e.wt(), o = e.dt(), h = e.ct().Ml(), u = null !== h && h.ml === t, l = null !== h && u && void 0 !== h.pv ? h.pv.Ou : void 0, a = 0, c = s; a < c.length; a++) { var f = c[a].I(r, o); null !== f && (i.save(), f.h(i, n, u, l), i.restore()) } }, t.prototype.Iv = function (t, i, n) { for (var e = y(this.uv), s = t.ci(e), r = e.wt(), o = e.dt(), h = e.ct().Ml(), u = null !== h && h.ml === t, l = null !== h && u && void 0 !== h.pv ? h.pv.Ou : void 0, a = 0, c = s; a < c.length; a++) { var f = c[a].I(r, o); null !== f && void 0 !== f.u && (i.save(), f.u(i, n, u, l), i.restore()) } }, t.prototype.Cv = function (t, i, n) { for (var e = 0, s = t; e < s.length; e++) { var r = s[e], o = r.I(this.oc.st, this.oc.ht); if (null !== o && o.zu) { var h = o.zu(i, n); if (null !== h) return { nc: r, pv: h } } } return null }, t.prototype.Mv = function () { if (null !== this.uv) { var t = this.av; t.P().leftPriceScale.visible || null === this.Jc || (this.fv.removeChild(this.Jc.Ec()), this.Jc.an(), this.Jc = null), t.P().rightPriceScale.visible || null === this.Gc || (this.cv.removeChild(this.Gc.Ec()), this.Gc.an(), this.Gc = null); var i = t.ct().jl(); t.P().leftPriceScale.visible && null === this.Jc && (this.Jc = new cn(this, t.P().layout, i, "left"), this.fv.appendChild(this.Jc.Ec())), t.P().rightPriceScale.visible && null === this.Gc && (this.Gc = new cn(this, t.P().layout, i, "right"), this.cv.appendChild(this.Gc.Ec())) } }, t.prototype.mv = function () { return fn && null === this.sv }, t.prototype.Nv = function () { return fn && this.hv || null !== this.sv }, t.prototype.Rv = function (t) { return Math.max(0, Math.min(t, this.oc.ht - 1)) }, t.prototype.jv = function (t) { return Math.max(0, Math.min(t, this.oc.st - 1)) }, t.prototype.bv = function (t, i) { this.hi().Pl(this.Rv(t), this.jv(i), y(this.uv)) }, t.prototype.gv = function () { this.hi().Wl() }, t.prototype.xv = function () { this.rv && (this.sv = null, this.gv()) }, t.prototype.Sv = function (t, i) { this.sv = t, this.rv = !1, this.bv(i.x, i.y); var n = this.hi().Nl(); this.ev = { x: n.Mt(), y: n.bt() } }, t.prototype.hi = function () { return this.av.ct() }, t }(), vn = function () { function t(t, i, n, e) { var s = this; this.T = !0, this.oc = new Hi(0, 0), this.dc = function () { return s.Rc(3) }, this.mc = "left" === t, this.ol = n.jl, this.xi = i, this.Uv = e, this.gc = document.createElement("div"), this.gc.style.width = "25px", this.gc.style.height = "100%", this.gc.style.overflow = "hidden", this.pc = tn(this.gc, new Hi(16, 16)), this.pc.subscribeCanvasConfigured(this.dc) } return t.prototype.an = function () { this.pc.unsubscribeCanvasConfigured(this.dc), this.pc.destroy() }, t.prototype.Ec = function () { return this.gc }, t.prototype.Av = function () { return this.oc }, t.prototype.Pc = function (t) { if (t.ht < 0 || t.st < 0) throw new Error("Try to set invalid size to PriceAxisStub " + JSON.stringify(t)); this.oc.fn(t) || (this.oc = t, this.pc.resizeCanvas({ width: t.ht, height: t.st }), this.gc.style.width = t.ht + "px", this.gc.style.minWidth = t.ht + "px", this.gc.style.height = t.st + "px", this.T = !0) }, t.prototype.Rc = function (t) { if ((!(t < 3) || this.T) && 0 !== this.oc.ht && 0 !== this.oc.st) { this.T = !1; var i = Ui(this.pc.canvas); this.Uc(i, this.pc.pixelRatio), this.uu(i, this.pc.pixelRatio) } }, t.prototype.Kc = function () { return this.pc.canvas }, t.prototype.uu = function (t, i) { if (this.Uv()) { var n = this.oc.ht; t.save(), t.fillStyle = this.xi.timeScale.borderColor; var e = Math.floor(this.ol.P().Dt * i), s = this.mc ? Math.round(n * i) - e : 0; t.fillRect(s, 0, e, e), t.restore() } }, t.prototype.Uc = function (t, i) { var n = this; J(t, i, function () { X(t, 0, 0, n.oc.ht, n.oc.st, n.xi.layout.backgroundColor) }) }, t }(); function dn(t, i) { return t.Os > i.Os ? t : i } var yn = function () { function t(t) { var i = this; this.qv = null, this.Hv = null, this.ne = null, this.Yv = !1, this.oc = new Hi(0, 0), this.dc = function () { return i.av.ct().Lr() }, this.bc = function () { return i.av.ct().Lr() }, this.av = t, this.xi = t.P().layout, this.Kv = document.createElement("tr"), this.$v = document.createElement("td"), this.$v.style.padding = "0", this.Xv = document.createElement("td"), this.Xv.style.padding = "0", this.gc = document.createElement("td"), this.gc.style.height = "25px", this.gc.style.padding = "0", this.Zv = document.createElement("div"), this.Zv.style.width = "100%", this.Zv.style.height = "100%", this.Zv.style.position = "relative", this.Zv.style.overflow = "hidden", this.gc.appendChild(this.Zv), this.pc = tn(this.Zv, new Hi(16, 16)), this.pc.subscribeCanvasConfigured(this.dc); var n = this.pc.canvas; n.style.position = "absolute", n.style.zIndex = "1", n.style.left = "0", n.style.top = "0", this.yc = tn(this.Zv, new Hi(16, 16)), this.yc.subscribeCanvasConfigured(this.bc); var e = this.yc.canvas; e.style.position = "absolute", e.style.zIndex = "2", e.style.left = "0", e.style.top = "0", this.Kv.appendChild(this.$v), this.Kv.appendChild(this.gc), this.Kv.appendChild(this.Xv), this.Jv(), this.av.ct().So().tn(this.Jv.bind(this), this), this.Ac = new rn(this.yc.canvas, this, { xf: !0, Nf: !1 }) } return t.prototype.an = function () { this.Ac.an(), null !== this.qv && this.qv.an(), null !== this.Hv && this.Hv.an(), this.yc.unsubscribeCanvasConfigured(this.bc), this.yc.destroy(), this.pc.unsubscribeCanvasConfigured(this.dc), this.pc.destroy() }, t.prototype.Ec = function () { return this.Kv }, t.prototype.Gv = function () { return this.qv }, t.prototype.Qv = function () { return this.Hv }, t.prototype.Ff = function (t) { if (!this.Yv) { this.Yv = !0; var i = this.av.ct(); !i.j().Qt() && this.av.P().Xc.$c.time && i.Tl(t.Xf) } }, t.prototype.Vf = function () { var t = this.av.ct(); !t.j().Qt() && this.Yv && (this.Yv = !1, this.av.P().Xc.$c.time && t.zl()) }, t.prototype.Sf = function (t) { var i = this.av.ct(); !i.j().Qt() && this.av.P().Xc.$c.time && i.Vl(t.Xf) }, t.prototype.Tf = function (t) { this.Yv = !1; var i = this.av.ct(); i.j().Qt() && !this.av.P().Xc.$c.time || i.zl() }, t.prototype.Af = function () { this.av.P().Xc.axisDoubleClickReset && this.av.ct().Ol() }, t.prototype.mf = function (t) { this.av.ct().P().Xc.$c.time && this.Zc(1) }, t.prototype.Uf = function (t) { this.Zc(0) }, t.prototype.Av = function () { return this.oc }, t.prototype.t_ = function (t, i, n) { this.oc && this.oc.fn(t) || (this.oc = t, this.pc.resizeCanvas({ width: t.ht, height: t.st }), this.yc.resizeCanvas({ width: t.ht, height: t.st }), this.gc.style.width = t.ht + "px", this.gc.style.height = t.st + "px"), null !== this.qv && this.qv.Pc(new Hi(i, t.st)), null !== this.Hv && this.Hv.Pc(new Hi(n, t.st)) }, t.prototype.i_ = function () { var t = this.n_(); return Math.ceil(t.Dt + t.St + t.Vt + t.Ct + t.Tt) }, t.prototype.B = function () { this.av.ct().j().Vn() }, t.prototype.Kc = function () { return this.pc.canvas }, t.prototype.Rc = function (t) { if (0 !== t) { if (1 !== t) { var i = Ui(this.pc.canvas); this.Uc(i, this.pc.pixelRatio), this.uu(i, this.pc.pixelRatio), this.qc(i, this.pc.pixelRatio), null !== this.qv && this.qv.Rc(t), null !== this.Hv && this.Hv.Rc(t) } var n = Ui(this.yc.canvas), e = this.yc.pixelRatio; n.clearRect(0, 0, Math.ceil(this.oc.ht * e), Math.ceil(this.oc.st * e)), this.h_([this.av.ct().Nl()], n, e) } }, t.prototype.Uc = function (t, i) { var n = this; J(t, i, function () { X(t, 0, 0, n.oc.ht, n.oc.st, n.Lv()) }) }, t.prototype.uu = function (t, i) { if (this.av.P().timeScale.borderVisible) { t.save(), t.fillStyle = this.s_(); var n = Math.max(1, Math.floor(this.n_().Dt * i)); t.fillRect(0, 0, Math.ceil(this.oc.ht * i), n), t.restore() } }, t.prototype.qc = function (t, i) { var n = this, e = this.av.ct().j().Vn(); if (e && 0 !== e.length) { var s = e.reduce(dn, e[0]).Os; s > 30 && s < 40 && (s = 30), t.save(), t.strokeStyle = this.s_(); var r = this.n_(), o = r.Dt + r.St + r.Ct + r.Vt - r.Ft; t.textAlign = "center", t.fillStyle = this.s_(); var h = Math.floor(this.n_().Dt * i), u = Math.max(1, Math.floor(i)), l = Math.floor(.5 * i); if (this.av.ct().j().P().borderVisible) { t.beginPath(); for (var a = Math.round(r.St * i), c = e.length; c--;) { var f = Math.round(e[c].En * i); t.rect(f - l, h, u, a) } t.fill() } t.fillStyle = this.ue(), J(t, i, function () { t.font = n.r_(); for (var i = 0, r = e; i < r.length; i++)(l = r[i]).Os < s && t.fillText(l.Ln, l.En, o); t.font = n.e_(); for (var h = 0, u = e; h < u.length; h++) { var l; (l = u[h]).Os >= s && t.fillText(l.Ln, l.En, o) } }) } }, t.prototype.h_ = function (t, i, n) { for (var e = this.n_(), s = 0, r = t; s < r.length; s++)for (var o = 0, h = r[s].vi(); o < h.length; o++) { var u = h[o]; i.save(), u.I().h(i, e, n), i.restore() } }, t.prototype.Lv = function () { return this.xi.backgroundColor }, t.prototype.s_ = function () { return this.av.P().timeScale.borderColor }, t.prototype.ue = function () { return this.xi.textColor }, t.prototype.se = function () { return this.xi.fontSize }, t.prototype.r_ = function () { return Dt(this.se(), this.xi.fontFamily) }, t.prototype.e_ = function () { return Dt(this.se(), this.xi.fontFamily, "bold") }, t.prototype.n_ = function () { null === this.ne && (this.ne = { Dt: 1, Ft: NaN, Ct: NaN, Tt: NaN, ni: NaN, St: 3, Vt: NaN, kt: "", ii: new vi }); var t = this.ne, i = this.r_(); if (t.kt !== i) { var n = this.se(); t.Vt = n, t.kt = i, t.Ct = Math.ceil(n / 2.5), t.Tt = t.Ct, t.ni = Math.ceil(n / 2), t.Ft = Math.round(this.se() / 5), t.ii.pu() } return this.ne }, t.prototype.Zc = function (t) { this.gc.style.cursor = 1 === t ? "ew-resize" : "default" }, t.prototype.Jv = function () { var t = this.av.ct(), i = t.P(); i.leftPriceScale.visible || null === this.qv || (this.$v.removeChild(this.qv.Ec()), this.qv.an(), this.qv = null), i.rightPriceScale.visible || null === this.Hv || (this.Xv.removeChild(this.Hv.Ec()), this.Hv.an(), this.Hv = null); var n = { jl: this.av.ct().jl() }; if (i.leftPriceScale.visible && null === this.qv) { var e = function () { return i.leftPriceScale.borderVisible && t.j().P().borderVisible }; this.qv = new vn("left", this.av.P(), n, e), this.$v.appendChild(this.qv.Ec()) } i.rightPriceScale.visible && null === this.Hv && (e = function () { return i.rightPriceScale.borderVisible && t.j().P().borderVisible }, this.Hv = new vn("right", this.av.P(), n, e), this.Xv.appendChild(this.Hv.Ec())) }, t }(), gn = function () { function t(t, i) { this.u_ = [], this.a_ = 0, this.zn = 0, this.Hs = 0, this.o_ = 0, this.l_ = 0, this.f_ = null, this.c_ = !1, this.iv = new tt, this.ul = new tt, this.xi = i, this.Kv = document.createElement("div"), this.Kv.classList.add("tv-lightweight-charts"), this.Kv.style.overflow = "hidden", this.Kv.style.width = "100%", this.Kv.style.height = "100%", this.v_ = document.createElement("table"), this.v_.setAttribute("cellspacing", "0"), this.Kv.appendChild(this.v_), this.__ = this.d_.bind(this), this.Kv.addEventListener("wheel", this.__, { passive: !1 }), this.hi = new Zi(this.al.bind(this), this.xi), this.ct().Sl().tn(this.w_.bind(this), this), this.M_ = new yn(this), this.v_.appendChild(this.M_.Ec()); var n = this.xi.width, e = this.xi.height; if (0 === n || 0 === e) { var s = t.getBoundingClientRect(); 0 === n && (n = Math.floor(s.width), n -= n % 2), 0 === e && (e = Math.floor(s.height), e -= e % 2) } n = Math.max(70, n), e = Math.max(50, e), this.b_(n, e), this.m_(), t.appendChild(this.Kv), this.g_(), this.hi.j().Hr().tn(this.hi._l.bind(this.hi), this), this.hi.So().tn(this.hi._l.bind(this.hi), this) } return t.prototype.ct = function () { return this.hi }, t.prototype.P = function () { return this.xi }, t.prototype.p_ = function () { return this.u_ }, t.prototype.an = function () { this.Kv.removeEventListener("wheel", this.__), 0 !== this.a_ && window.cancelAnimationFrame(this.a_), this.hi.Sl().rn(this), this.hi.j().Hr().rn(this), this.hi.So().rn(this), this.hi.an(); for (var t = 0, i = this.u_; t < i.length; t++) { var n = i[t]; this.v_.removeChild(n.Ec()), n.Dv().rn(this), n.an() } this.u_ = [], y(this.M_).an(), null !== this.Kv.parentElement && this.Kv.parentElement.removeChild(this.Kv), this.ul.an(), this.iv.an(), delete this.Kv }, t.prototype.b_ = function (t, i, n) { if (void 0 === n && (n = !1), this.zn !== i || this.Hs !== t) { this.zn = i, this.Hs = t; var e = i + "px", s = t + "px"; y(this.Kv).style.height = e, y(this.Kv).style.width = s, this.v_.style.height = e, this.v_.style.width = s, n ? this.y_(new jt(3)) : this.hi._l() } }, t.prototype.Rc = function (t) { void 0 === t && (t = new jt(3)); for (var i = 0; i < this.u_.length; i++)this.u_[i].Rc(t.Ne(i).ke); this.M_.Rc(t.xe()) }, t.prototype.eh = function (t) { this.hi.eh(t), this.g_(); var i = t.width || this.Hs, n = t.height || this.zn; this.b_(i, n) }, t.prototype.Dv = function () { return this.iv }, t.prototype.Sl = function () { return this.ul }, t.prototype.k_ = function () { var t = this; null !== this.f_ && (this.y_(this.f_), this.f_ = null); var i = this.u_[0], n = $i(document, new Hi(this.Hs, this.zn)), e = Ui(n), s = qi(n); return J(e, s, function () { var n = 0, s = 0, r = function (i) { for (var r = 0; r < t.u_.length; r++) { var o = t.u_[r], h = o.Av().st, u = y("left" === i ? o.Ov() : o.Pv()), l = u.Kc(); e.drawImage(l, n, s, u.Ic(), h), s += h } }; t.x_() && (r("left"), n = y(i.Ov()).Ic()), s = 0; for (var o = 0; o < t.u_.length; o++) { var h = t.u_[o], u = h.Av(), l = h.Kc(); e.drawImage(l, n, s, u.ht, u.st), s += u.st } n += i.Av().ht, t.N_() && (s = 0, r("right")); var a = function (i) { var r = y("left" === i ? t.M_.Gv() : t.M_.Qv()), o = r.Av(), h = r.Kc(); e.drawImage(h, n, s, o.ht, o.st) }; if (t.xi.timeScale.visible) { n = 0, t.x_() && (a("left"), n = y(i.Ov()).Ic()); var c = t.M_.Av(); l = t.M_.Kc(), e.drawImage(l, n, s, c.ht, c.st), t.N_() && (n = i.Av().ht, a("right"), e.restore()) } }), n }, t.prototype.S_ = function (t) { return "none" === t ? 0 : "left" === t && !this.x_() || "right" === t && !this.N_() ? 0 : 0 === this.u_.length ? 0 : y("left" === t ? this.u_[0].Ov() : this.u_[0].Pv()).Ic() }, t.prototype.D_ = function () { for (var t = 0, i = 0, n = 0, e = 0, s = this.u_; e < s.length; e++) { var r = s[e]; this.x_() && (i = Math.max(i, y(r.Ov()).zc())), this.N_() && (n = Math.max(n, y(r.Pv()).zc())), t += r.Do() } var o = this.Hs, h = this.zn, u = Math.max(o - i - n, 0), l = this.xi.timeScale.visible ? this.M_.i_() : 0; l % 2 && (l += 1); for (var a = 0 + l, c = h < a ? 0 : h - a, f = c / t, p = 0, v = 0; v < this.u_.length; ++v) { (r = this.u_[v]).wv(this.hi.yl()[v]); var d, g; g = v === this.u_.length - 1 ? c - p : Math.round(r.Do() * f), p += d = Math.max(g, 2), r.Pc(new Hi(u, d)), this.x_() && r.Tv(i, "left"), this.N_() && r.Tv(n, "right"), r.Wc() && this.hi.Dl(r.Wc(), d) } this.M_.t_(new Hi(u, l), i, n), this.hi.kr(u), this.o_ !== i && (this.o_ = i), this.l_ !== n && (this.l_ = n) }, t.prototype.d_ = function (t) { var i = t.deltaX / 100, n = -t.deltaY / 100; if (0 !== i && this.xi.dv.mouseWheel || 0 !== n && this.xi.Xc.mouseWheel) { switch (t.cancelable && t.preventDefault(), t.deltaMode) { case t.DOM_DELTA_PAGE: i *= 120, n *= 120; break; case t.DOM_DELTA_LINE: i *= 32, n *= 32 }if (0 !== n && this.xi.Xc.mouseWheel) { var e = Math.sign(n) * Math.min(1, Math.abs(n)), s = t.clientX - this.Kv.getBoundingClientRect().left; this.ct().Al(s, e) } 0 !== i && this.xi.dv.mouseWheel && this.ct().El(-80 * i) } }, t.prototype.y_ = function (t) { var i = t.xe(); if (3 === i && this.C_(), 3 === i || 2 === i) { for (var n = this.hi.yl(), e = 0; e < n.length; e++)t.Ne(e).dh && n[e].qo(); t.De() && this.hi.j().Kr(); var s = t.Ce(); null !== s && this.hi.j().$r(s), this.M_.B() } this.Rc(t) }, t.prototype.al = function (t) { var i = this; null !== this.f_ ? this.f_.wn(t) : this.f_ = t, this.c_ || (this.c_ = !0, this.a_ = window.requestAnimationFrame(function () { i.c_ = !1, i.a_ = 0, null !== i.f_ && (i.y_(i.f_), i.f_ = null) })) }, t.prototype.C_ = function () { this.m_() }, t.prototype.m_ = function () { for (var t = this.hi.yl(), i = t.length, n = this.u_.length, e = i; e < n; e++) { var s = d(this.u_.pop()); this.v_.removeChild(s.Ec()), s.Dv().rn(this), s.an() } for (e = n; e < i; e++)(s = new pn(this, t[e])).Dv().tn(this.T_.bind(this), this), this.u_.push(s), this.v_.insertBefore(s.Ec(), this.M_.Ec()); for (e = 0; e < i; e++) { var r = t[e]; (s = this.u_[e]).Wc() !== r ? s.wv(r) : s._v() } this.g_(), this.D_() }, t.prototype.A_ = function (t, i) { var n, e = new Map; if (null !== t && this.hi.F().forEach(function (i) { var n = i.Zu(t); null !== n && e.set(i, n) }), null !== t) { var s = this.hi.j().si(t); null !== s && (n = s) } var r = this.ct().Ml(), o = null !== r && r.ml instanceof Ai ? r.ml : void 0, h = null !== r && void 0 !== r.pv ? r.pv.Iu : void 0; return { V: n, E_: i || void 0, L_: o, B_: e, F_: h } }, t.prototype.T_ = function (t, i) { var n = this; this.iv.en(function () { return n.A_(t, i) }) }, t.prototype.w_ = function (t, i) { var n = this; this.ul.en(function () { return n.A_(t, i) }) }, t.prototype.g_ = function () { var t = this.xi.timeScale.visible ? "" : "none"; this.M_.Ec().style.display = t }, t.prototype.x_ = function () { return this.xi.leftPriceScale.visible }, t.prototype.N_ = function () { return this.xi.rightPriceScale.visible }, t }(); function mn(t, i, n) { var e = n.value, s = { zs: i, V: t, Z: [e, e, e, e] }; return "color" in n && void 0 !== n.color && (s.et = n.color), s } function bn(t, i, n) { return { zs: i, V: t, Z: [n.open, n.high, n.low, n.close] } } function wn(t) { return void 0 !== t.Z } function Mn(t) { return function (i, n, e) { return void 0 === (s = e).open && void 0 === s.value ? { V: i, zs: n } : t(i, n, e); var s } } var _n = { Candlestick: Mn(bn), Bar: Mn(bn), Area: Mn(mn), Histogram: Mn(mn), Line: Mn(mn) }; function xn(t) { return _n[t] } function Sn(t) { return 60 * t * 60 * 1e3 } function Pn(t) { return 60 * t * 1e3 } var Cn = [{ V_: 1, Os: 20 }, { V_: (1, 1e3), Os: 19 }, { V_: Pn(1), Os: 20 }, { V_: Pn(5), Os: 21 }, { V_: Pn(30), Os: 22 }, { V_: Sn(1), Os: 30 }, { V_: Sn(3), Os: 31 }, { V_: Sn(6), Os: 32 }, { V_: Sn(12), Os: 33 }]; function Ln(t, i) { if (null !== i) { var n = new Date(1e3 * i), e = new Date(1e3 * t); if (e.getUTCFullYear() !== n.getUTCFullYear()) return 70; if (e.getUTCMonth() !== n.getUTCMonth()) return 60; if (e.getUTCDate() !== n.getUTCDate()) return 50; for (var s = Cn.length - 1; s >= 0; --s)if (Math.floor(n.getTime() / Cn[s].V_) !== Math.floor(e.getTime() / Cn[s].V_)) return Cn[s].Os } return 20 } function Tn(t) { if (!Ot(t)) throw new Error("time must be of type BusinessDay"); var i = new Date(Date.UTC(t.year, t.month - 1, t.day, 0, 0, 0, 0)); return { Ss: Math.round(i.getTime() / 1e3), Ns: t } } function Gn(t) { if (!Rt(t)) throw new Error("time must be of type isUTCTimestamp"); return { Ss: t } } function zn(t) { return 0 === t.length ? null : Ot(t[0].time) ? Tn : Gn } function kn(t) { return Rt(t) ? Gn(t) : Ot(t) ? Tn(t) : Tn(Vn(t)) } function Vn(t) { var i = new Date(t); if (isNaN(i.getTime())) throw new Error("Invalid date string=" + t + ", expected format=yyyy-mm-dd"); return { day: i.getUTCDate(), month: i.getUTCMonth() + 1, year: i.getUTCFullYear() } } function En(t) { M(t.time) && (t.time = Vn(t.time)) } function Nn(t) { return { zs: 0, z_: new Map, Wh: t } } var On = function () { function t() { this.O_ = new Map, this.P_ = new Map, this.I_ = new Map, this.W_ = [] } return t.prototype.an = function () { this.O_.clear(), this.P_.clear(), this.I_.clear(), this.W_ = [] }, t.prototype.R_ = function (t, i) { var n = this; this.I_.has(t) && this.O_.forEach(function (i) { return i.z_.delete(t) }); var e = []; if (0 !== i.length) { i.forEach(En); var s = y(zn(i)), r = xn(t.fa()); e = i.map(function (i) { var e = s(i.time), o = n.O_.get(e.Ss); void 0 === o && (o = Nn(e), n.O_.set(e.Ss, o)); var h = r(e, o.zs, i); return o.z_.set(t, h), h }) } return this.j_(), this.U_(t, e), this.q_(t) }, t.prototype.Hl = function (t) { return this.R_(t, []) }, t.prototype.H_ = function (t, i) { En(i); var n = y(zn([i]))(i.time), e = this.I_.get(t); if (void 0 !== e && n.Ss < e.Ss) throw new Error("Cannot update oldest data, last time=" + e.Ss + ", new time=" + n.Ss); var s = this.O_.get(n.Ss), r = void 0 === s; void 0 === s && (s = Nn(n), this.O_.set(n.Ss, s)); var o = xn(t.fa())(n, s.zs, i); s.z_.set(t, o); var h = this.Y_(t, o); if (!r) { var u = new Map; return null !== h && u.set(t, h), { K_: u, j: { Dr: this.X_() } } } return this.q_(t) }, t.prototype.Y_ = function (t, i) { var n = this.P_.get(t); void 0 === n && (n = [], this.P_.set(t, n)); var e = 0 !== n.length ? n[n.length - 1] : null, s = null; return null === e || i.V.Ss > e.V.Ss ? wn(i) && (n.push(i), s = { _l: !1, Z_: [i] }) : wn(i) ? (n[n.length - 1] = i, s = { _l: !1, Z_: [i] }) : (n.splice(-1, 1), s = { _l: !0, Z_: n }), this.I_.set(t, i.V), s }, t.prototype.U_ = function (t, i) { 0 !== i.length ? (this.P_.set(t, i.filter(wn)), this.I_.set(t, i[i.length - 1].V)) : (this.P_.delete(t), this.I_.delete(t)) }, t.prototype.j_ = function () { var t = new Map; this.O_.forEach(function (i, n) { i.z_.size > 0 && t.set(n, i) }), this.O_ = t }, t.prototype.J_ = function (t) { for (var i = -1, n = 0; n < this.W_.length && n < t.length; ++n) { var e = this.W_[n], s = t[n]; if (e.V.Ss !== s.V.Ss) { i = n; break } s.Vs = e.Vs } if (-1 === i && this.W_.length !== t.length && (i = Math.min(this.W_.length, t.length)), -1 === i) return -1; var r = function (i) { var n = d(o.O_.get(t[i].V.Ss)); n.zs = i, n.z_.forEach(function (t) { t.zs = i }) }, o = this; for (n = i; n < t.length; ++n)r(n); return function (t, i) { void 0 === i && (i = 0); for (var n = 0 === i || 0 === t.length ? null : t[i - 1].V.Ss, e = 0, s = i; s < t.length; ++s) { var r = t[s]; r.Vs = Ln(r.V.Ss, n), e += r.V.Ss - (n || r.V.Ss), n = r.V.Ss } if (0 === i && t.length > 1) { var o = Math.ceil(e / (t.length - 1)), h = t[0].V.Ss - o; t[0].Vs = Ln(t[0].V.Ss, h) } }(t, i), this.W_ = t, i }, t.prototype.X_ = function () { var t = 0; return this.P_.forEach(function (i) { 0 !== i.length && (t = Math.max(t, i[i.length - 1].zs)) }), t }, t.prototype.q_ = function (t) { var i = Array.from(this.O_.values()).map(function (t) { return { Vs: 0, V: t.Wh } }); i.sort(function (t, i) { return t.V.Ss - i.V.Ss }); var n = this.J_(i), e = { K_: new Map, j: { Dr: this.X_() } }; if (-1 !== n) this.P_.forEach(function (t, i) { e.K_.set(i, { Z_: t, _l: !0 }) }), e.j.G_ = this.W_; else { var s = this.P_.get(t); e.K_.set(t, { Z_: s || [], _l: !0 }) } return e }, t }(), Rn = { color: "#FF0000", price: 0, lineStyle: 2, lineWidth: 1, axisLabelVisible: !0 }, In = function () { function t(t) { this.ea = t } return t.prototype.applyOptions = function (t) { this.ea.eh(t) }, t.prototype.options = function () { return this.ea.P() }, t.prototype.Q_ = function () { return this.ea }, t }(); function Dn(t) { var i = t.overlay, n = function (t, i) { var n = {}; for (var e in t) Object.prototype.hasOwnProperty.call(t, e) && i.indexOf(e) < 0 && (n[e] = t[e]); if (null != t && "function" == typeof Object.getOwnPropertySymbols) { var s = 0; for (e = Object.getOwnPropertySymbols(t); s < e.length; s++)i.indexOf(e[s]) < 0 && Object.prototype.propertyIsEnumerable.call(t, e[s]) && (n[e[s]] = t[e[s]]) } return n }(t, ["overlay"]); return i && (n.priceScaleId = ""), n } var Bn = function () { function t(t, i, n) { this.Ie = t, this.td = i, this.nd = n } return t.prototype.an = function () { delete this.Ie, delete this.td }, t.prototype.priceFormatter = function () { return this.Ie.$h() }, t.prototype.K_ = function () { return this.Ie }, t.prototype.priceToCoordinate = function (t) { var i = this.Ie.q(); return null === i ? null : this.Ie.X().$(t, i.Z) }, t.prototype.coordinateToPrice = function (t) { var i = this.Ie.q(); return null === i ? null : this.Ie.X().Ci(t, i.Z) }, t.prototype.barsInLogicalRange = function (t) { if (null === t) return null; var i = new Et(new Gt(t.from, t.to)).js(), n = this.Ie.qi(); if (n.Qt()) return null; var e = n.Da(i.rs(), 1), s = n.Da(i.es(), -1), r = y(n.xa()), o = y(n.Ui()); if (null !== e && null !== s && e.zs > s.zs) return { barsBefore: t.from - r, barsAfter: o - t.to }; var h = { barsBefore: null === e || e.zs === r ? t.from - r : e.zs - r, barsAfter: null === s || s.zs === o ? o - t.to : o - s.zs }; return null !== e && null !== s && (h.from = e.V.Ns || e.V.Ss, h.to = s.V.Ns || s.V.Ss), h }, t.prototype.setData = function (t) { this.td.hd(this.Ie, t) }, t.prototype.update = function (t) { this.td.ho(this.Ie, t) }, t.prototype.setMarkers = function (t) { var i = t.map(function (t) { return f(f({}, t), { time: kn(t.time) }) }); this.Ie.uo(i) }, t.prototype.applyOptions = function (t) { var i = Dn(t); this.Ie.eh(i) }, t.prototype.options = function () { return x(this.Ie.P()) }, t.prototype.priceScale = function () { return this.nd.X(this.Ie.X().rh()) }, t.prototype.createPriceLine = function (t) { var i = m(x(Rn), t), n = this.Ie.ao(i); return new In(n) }, t.prototype.removePriceLine = function (t) { this.Ie.oo(t.Q_()) }, t }(), Jn = function (t) { function i() { return null !== t && t.apply(this, arguments) || this } return c(i, t), i.prototype.applyOptions = function (i) { _t(i), t.prototype.applyOptions.call(this, i) }, i }(Bn), Xn = { autoScale: !0, mode: 0, invertScale: !1, alignLabels: !0, borderVisible: !0, borderColor: "#2B2B43", entireTextOnly: !1, visible: !1, drawTicks: !0, scaleMargins: { bottom: .1, top: .2 } }, An = { color: "rgba(0, 0, 0, 0)", visible: !1, fontSize: 48, fontFamily: It, fontStyle: "", text: "", horzAlign: "center", vertAlign: "center" }, Wn = { width: 0, height: 0, layout: { backgroundColor: "#FFFFFF", textColor: "#191919", fontSize: 11, fontFamily: It }, crosshair: { vertLine: { color: "#758696", width: 1, style: 3, visible: !0, labelVisible: !0, labelBackgroundColor: "#4c525e" }, horzLine: { color: "#758696", width: 1, style: 3, visible: !0, labelVisible: !0, labelBackgroundColor: "#4c525e" }, mode: 1 }, grid: { vertLines: { color: "#D6DCDE", style: 0, visible: !0 }, horzLines: { color: "#D6DCDE", style: 0, visible: !0 } }, overlayPriceScales: f({}, Xn), leftPriceScale: f(f({}, Xn), { visible: !1 }), rightPriceScale: f(f({}, Xn), { visible: !0 }), timeScale: { rightOffset: 0, barSpacing: 6, fixLeftEdge: !1, lockVisibleTimeRangeOnResize: !1, rightBarStaysOnScroll: !1, borderVisible: !0, borderColor: "#2B2B43", visible: !0, timeVisible: !1, secondsVisible: !0 }, watermark: An, localization: { locale: nn ? navigator.language : "", dateFormat: "dd MMM 'yy" }, dv: { mouseWheel: !0, pressedMouseMove: !0, horzTouchDrag: !0, vertTouchDrag: !0 }, Xc: { $c: { time: !0, price: !0 }, axisDoubleClickReset: !0, mouseWheel: !0, pinch: !0 } }, jn = { upColor: "#26a69a", downColor: "#ef5350", wickVisible: !0, borderVisible: !0, borderColor: "#378658", borderUpColor: "#26a69a", borderDownColor: "#ef5350", wickColor: "#737375", wickUpColor: "#26a69a", wickDownColor: "#ef5350" }, Fn = { upColor: "#26a69a", downColor: "#ef5350", openVisible: !0, thinBars: !0 }, Kn = { color: "#2196f3", lineStyle: 0, lineWidth: 3, lineType: 0, crosshairMarkerVisible: !0, crosshairMarkerRadius: 4 }, Qn = { topColor: "rgba( 46, 220, 135, 0.4)", bottomColor: "rgba( 40, 221, 100, 0)", lineColor: "#33D778", lineStyle: 0, lineWidth: 3, lineType: 0, crosshairMarkerVisible: !0, crosshairMarkerRadius: 4 }, Zn = { color: "#26a69a", base: 0 }, Hn = { title: "", lastValueVisible: !0, priceLineVisible: !0, priceLineSource: 0, priceLineWidth: 1, priceLineColor: "", priceLineStyle: 2, baseLineVisible: !0, baseLineWidth: 1, baseLineColor: "#B2B5BE", baseLineStyle: 0, priceFormat: { type: "price", precision: 2, minMove: .01 } }, qn = function () { function t(t, i) { this.sd = t, this.rd = i } return t.prototype.an = function () { delete this.sd }, t.prototype.applyOptions = function (t) { this.sd.ct().gl(this.rd, t) }, t.prototype.options = function () { return this.Jt().P() }, t.prototype.width = function () { return Jt(this.rd) ? this.sd.S_("left" === this.rd ? "left" : "right") : 0 }, t.prototype.Jt = function () { return y(this.sd.ct().pl(this.rd)).X }, t }(), Un = function () { function t(t) { this.ed = new tt, this.Qs = new tt, this.hi = t, this.bo().Ur().tn(this.ud.bind(this)), this.bo().qr().tn(this.ad.bind(this)) } return t.prototype.an = function () { this.bo().Ur().rn(this), this.bo().qr().rn(this), this.ed.an(), delete this.hi }, t.prototype.scrollPosition = function () { return this.bo().Fr() }, t.prototype.scrollToPosition = function (t, i) { i ? this.bo().jr(t, 1e3) : this.bo().cr(t) }, t.prototype.scrollToRealTime = function () { this.bo().Rr() }, t.prototype.getVisibleRange = function () { var t, i, n = this.bo().Mr(); return null === n ? null : { from: null !== (t = n.from.Ns) && void 0 !== t ? t : n.from.Ss, to: null !== (i = n.to.Ns) && void 0 !== i ? i : n.to.Ss } }, t.prototype.setVisibleRange = function (t) { var i = { from: kn(t.from), to: kn(t.to) }, n = this.bo().pr(i); this.hi.Yl(n) }, t.prototype.getVisibleLogicalRange = function () { var t = this.bo().wr(); return null === t ? null : { from: t.rs(), to: t.es() } }, t.prototype.setVisibleLogicalRange = function (t) { v(t.from <= t.to, "The from index cannot be after the to index."), this.hi.Yl(t) }, t.prototype.resetTimeScale = function () { this.hi.Ol() }, t.prototype.fitContent = function () { this.hi.Kr() }, t.prototype.timeToCoordinate = function (t) { var i = kn(t), n = this.hi.j(), e = n.vr(i, !1); return null === e ? null : n.J(e) }, t.prototype.coordinateToTime = function (t) { var i, n = this.hi.j(), e = n.Tr(t), s = n.si(e); return null === s ? null : null !== (i = s.Ns) && void 0 !== i ? i : s.Ss }, t.prototype.subscribeVisibleTimeRangeChange = function (t) { this.ed.tn(t) }, t.prototype.unsubscribeVisibleTimeRangeChange = function (t) { this.ed.sn(t) }, t.prototype.subscribeVisibleLogicalRangeChange = function (t) { this.Qs.tn(t) }, t.prototype.unsubscribeVisibleLogicalRangeChange = function (t) { this.Qs.sn(t) }, t.prototype.applyOptions = function (t) { this.bo().eh(t) }, t.prototype.options = function () { return x(this.bo().P()) }, t.prototype.bo = function () { return this.hi.j() }, t.prototype.ud = function () { this.ed.un() && this.ed.en(this.getVisibleRange()) }, t.prototype.ad = function () { this.Qs.un() && this.Qs.en(this.getVisibleLogicalRange()) }, t }(); function Yn(t) { if (void 0 !== t && "custom" !== t.type) { var i = t; void 0 !== i.minMove && void 0 === i.precision && (i.precision = function (t) { if (t >= 1) return 0; for (var i = 0; i < 8; i++) { var n = Math.round(t); if (Math.abs(n - t) < 1e-8) return i; t *= 10 } return i }(i.minMove)) } } function $n(t) { return function (t) { if (_(t.handleScale)) { var i = t.handleScale; t.handleScale = { axisDoubleClickReset: i, axisPressedMouseMove: { time: i, price: i }, mouseWheel: i, pinch: i } } else if (void 0 !== t.handleScale && _(t.handleScale.axisPressedMouseMove)) { var n = t.handleScale.axisPressedMouseMove; t.handleScale.axisPressedMouseMove = { time: n, price: n } } var e = t.handleScroll; _(e) && (t.handleScroll = { horzTouchDrag: e, vertTouchDrag: e, mouseWheel: e, pressedMouseMove: e }) }(t), function (t) { if (t.priceScale) { t.leftPriceScale = t.leftPriceScale || {}, t.rightPriceScale = t.rightPriceScale || {}; var i = t.priceScale.position; delete t.priceScale.position, t.leftPriceScale = m(t.leftPriceScale, t.priceScale), t.rightPriceScale = m(t.rightPriceScale, t.priceScale), "left" === i && (t.leftPriceScale.visible = !0, t.rightPriceScale.visible = !1), "right" === i && (t.leftPriceScale.visible = !1, t.rightPriceScale.visible = !0), "none" === i && (t.leftPriceScale.visible = !1, t.rightPriceScale.visible = !1), t.overlayPriceScales = t.overlayPriceScales || {}, void 0 !== t.priceScale.invertScale && (t.overlayPriceScales.invertScale = t.priceScale.invertScale), void 0 !== t.priceScale.scaleMargins && (t.overlayPriceScales.scaleMargins = t.priceScale.scaleMargins) } }(t), t } var te = function () { function t(t, i) { var n = this; this.od = new On, this.ld = new Map, this.fd = new Map, this.vd = new tt, this._d = new tt; var e = void 0 === i ? x(Wn) : m(x(Wn), $n(i)); this.sd = new gn(t, e), this.sd.Dv().tn(function (t) { n.vd.un() && n.vd.en(n.dd(t())) }, this), this.sd.Sl().tn(function (t) { n._d.un() && n._d.en(n.dd(t())) }, this); var s = this.sd.ct(); this.wd = new Un(s) } return t.prototype.remove = function () { this.sd.Dv().rn(this), this.sd.Sl().rn(this), this.wd.an(), this.sd.an(), delete this.sd, this.ld.forEach(function (t, i) { i.an() }), this.ld.clear(), this.fd.clear(), this.vd.an(), this._d.an(), this.od.an(), delete this.od }, t.prototype.resize = function (t, i, n) { this.sd.b_(t, i, n) }, t.prototype.addAreaSeries = function (t) { void 0 === t && (t = {}), Yn((t = Dn(t)).priceFormat); var i = m(x(Hn), Qn, t), n = this.sd.ct().Ul("Area", i), e = new Bn(n, this, this); return this.ld.set(e, n), this.fd.set(n, e), e }, t.prototype.addBarSeries = function (t) { void 0 === t && (t = {}), Yn((t = Dn(t)).priceFormat); var i = m(x(Hn), Fn, t), n = this.sd.ct().Ul("Bar", i), e = new Bn(n, this, this); return this.ld.set(e, n), this.fd.set(n, e), e }, t.prototype.addCandlestickSeries = function (t) { void 0 === t && (t = {}), _t(t = Dn(t)), Yn(t.priceFormat); var i = m(x(Hn), jn, t), n = this.sd.ct().Ul("Candlestick", i), e = new Jn(n, this, this); return this.ld.set(e, n), this.fd.set(n, e), e }, t.prototype.addHistogramSeries = function (t) { void 0 === t && (t = {}), Yn((t = Dn(t)).priceFormat); var i = m(x(Hn), Zn, t), n = this.sd.ct().Ul("Histogram", i), e = new Bn(n, this, this); return this.ld.set(e, n), this.fd.set(n, e), e }, t.prototype.addLineSeries = function (t) { void 0 === t && (t = {}), Yn((t = Dn(t)).priceFormat); var i = m(x(Hn), Kn, t), n = this.sd.ct().Ul("Line", i), e = new Bn(n, this, this); return this.ld.set(e, n), this.fd.set(n, e), e }, t.prototype.removeSeries = function (t) { var i = d(this.ld.get(t)), n = this.od.Hl(i); this.sd.ct().Hl(i), this.Md(n), this.ld.delete(t), this.fd.delete(i) }, t.prototype.hd = function (t, i) { this.Md(this.od.R_(t, i)) }, t.prototype.ho = function (t, i) { this.Md(this.od.H_(t, i)) }, t.prototype.subscribeClick = function (t) { this.vd.tn(t) }, t.prototype.unsubscribeClick = function (t) { this.vd.sn(t) }, t.prototype.subscribeCrosshairMove = function (t) { this._d.tn(t) }, t.prototype.unsubscribeCrosshairMove = function (t) { this._d.sn(t) }, t.prototype.priceScale = function (t) { return t = t || this.sd.ct().Kl(), new qn(this.sd, t) }, t.prototype.timeScale = function () { return this.wd }, t.prototype.applyOptions = function (t) { this.sd.eh($n(t)) }, t.prototype.options = function () { return this.sd.P() }, t.prototype.takeScreenshot = function () { return this.sd.k_() }, t.prototype.Md = function (t) { var i = this.sd.ct(); i.Rl(t.j.Dr, t.j.G_), t.K_.forEach(function (t, i) { return i.ho(t.Z_, t._l) }), i.Er() }, t.prototype.bd = function (t) { return d(this.fd.get(t)) }, t.prototype.dd = function (t) { var i = this, n = new Map; t.B_.forEach(function (t, e) { n.set(i.bd(e), t) }); var e = void 0 === t.L_ ? void 0 : this.bd(t.L_); return { time: t.V && (t.V.Ns || t.V.Ss), point: t.E_, hoveredSeries: e, hoveredMarkerId: t.F_, seriesPrices: n } }, t }(); function ie(t) { return (ie = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) } function ne(t, i) { for (var n = 0; n < i.length; n++) { var e = i[n]; e.enumerable = e.enumerable || !1, e.configurable = !0, "value" in e && (e.writable = !0), Object.defineProperty(t, e.key, e) } } function ee(t, i) { return !i || "object" !== ie(i) && "function" != typeof i ? function (t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t }(t) : i } function se(t) { return (se = Object.setPrototypeOf ? Object.getPrototypeOf : function (t) { return t.__proto__ || Object.getPrototypeOf(t) })(t) } function re(t, i) { return (re = Object.setPrototypeOf || function (t, i) { return t.__proto__ = i, t })(t, i) } var oe = function (t) { function i(t) { return function (t, i) { if (!(t instanceof i)) throw new TypeError("Cannot call a class as a function") }(this, i), ee(this, se(i).call(this, t)) } var n, e, s; return function (t, i) { if ("function" != typeof i && null !== i) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(i && i.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), i && re(t, i) }(i, React.Component), n = i, (e = [{ key: "componentDidMount", value: function () { this.redrawChart() } }, { key: "componentDidUpdate", value: function (t, i, n) { } }, { key: "redrawChart", value: function () { var t = function (t, i) { var n = y(M(t) ? document.getElementById(t) : t); return new te(n, i) }(document.getElementById("chart"), {}), i = t.addCandlestickSeries(); t.applyOptions({ timeScale: { rightOffset: 12, barSpacing: 3, fixLeftEdge: !0, lockVisibleTimeRangeOnResize: !0, rightBarStaysOnScroll: !0, borderVisible: !1, borderColor: "#fff000", visible: !0, timeVisible: !0, secondsVisible: !0 }, watermark: { color: window.chartOptions.watermarkColor, visible: !0, text: "BiesStock - " + window.symbol + " chart", fontSize: 18, horzAlign: "left", vertAlign: "bottom" }, layout: { backgroundColor: window.chartOptions.backgroundColor, textColor: window.chartOptions.textColor }, grid: { vertLines: { visible: "true" === window.chartOptions.grid, color: window.chartOptions.gridColor }, horzLines: { visible: "true" === window.chartOptions.grid, color: window.chartOptions.gridColor } } }); var n = []; if (window.data && "ok" === window.data.s) for (var e = 0; e < window.data.t.length; e++)n.push({ time: window.data.t[e], open: window.data.o[e], high: window.data.h[e], low: window.data.l[e], close: window.data.c[e] }); i.setData(n) } }, { key: "render", value: function () { return React.createElement(React.Fragment, null, React.createElement("div", { id: "chart", style: { width: "100%", height: "100%" } })) } }]) && ne(n.prototype, e), s && ne(n, s), i }(); ReactDOM.render(React.createElement(oe, null), document.getElementById("root"))
}]);